# -*-python-*-

Import ('env', 'base_glob', 'install')
fonts = reduce (lambda x, y: x + y,
		map (lambda x: base_glob (x),
		     ('feta[0-9]*.mf',
		      'feta-braces-[a-z].mf',
		      'feta-din*[0-9].mf',
		      'feta-nummer*[0-9].mf',
		      'parmesan[0-9]*.mf',)))

t = map (env.TFM, fonts)
a = map (env.AFM, fonts)
p = map (env.PFA, fonts)

import os
map (lambda x: env.Depends (x + '.pfa', x + '.enc'), fonts)
#     map (lambda x: os.path.splitext (x)[0], fonts))

mf_essential = ['feta16', 'feta20', 'parmesan16', ]
pfa_essential = map (env.PFA, mf_essential)
env.Command ('cmr.enc', 'cmr.enc.in', 'cp $SOURCE $TARGET')
env.Alias ('mf-essential', pfa_essential)
env.Alias ('mf', 'cmr.enc')

# build essential stuff first, that's friendlier
env.Alias ('mf', pfa_essential + p)

install (t, env['sharedir_package_version'] + '/fonts/tfm')
install (a, env['sharedir_package_version'] + '/afm')
install (p, env['sharedir_package_version'] + '/fonts/type1')
