depth = ..

# elispdir defined in config.make

INSTALLATION_DIR=$(elispdir)
INSTALLATION_FILES=$(EL_FILES)

INSTALLATION_OUT_DIR=$(elispdir)
INSTALLATION_OUT_FILES=$(outdir)/lilypond-words.el

STEPMAKE_TEMPLATES=elisp install install-out

include $(depth)/make/stepmake.make

LILYPOND_WORDS = $(outdir)/lilypond-words.el
LILYPOND_WORDS_DEPENDS =\
  $(top-src-dir)/lily/lily-lexer.cc \
  $(buildscript-dir)/lilypond-words.py \
  $(top-src-dir)/scm/markup.scm \
  $(top-src-dir)/ly/engraver-init.ly

$(LILYPOND_WORDS):
	cd $(top-src-dir) && $(PYTHON) buildscripts/lilypond-words.py --el --dir=$(top-build-dir)/elisp/$(outconfbase)

all: $(LILYPOND_WORDS)
