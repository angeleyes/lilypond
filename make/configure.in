dnl Process this file with autoconf to produce a configure script.
AC_INIT(flower/lib/choleski.cc)
AC_LANG_CPLUSPLUS

AC_ARG_ENABLE(printing,
	[  --enable-printing	set debug printing],
	[DEFINES="$DEFINES -DNPRINT"])
AC_ARG_ENABLE(checking,
	[  --enable-checking	set debug checks],
	[DEFINES="$DEFINES -DNDEBUG"])
AC_ARG_ENABLE(debug,
	[  --enable-debug	set debug info],
	[DEFINES="$DEFINES -g"], [DEFINES="$DEFINES -O2"])

dnl COMPILEINFO="$HOST $host $TARGET $target"
AUTOHEADER="This file was automatically generated by configure"
CXXFLAGS=""
AC_PROG_CXX

AC_SUBST(DEFINES)
AC_SUBST(COMPILEINFO)
AC_SUBST(AUTOHEADER)
AC_SUBST(BISON)
AC_SUBST(FLEX)

AC_CHECK_PROGS(BISON, bison, error)
AC_CHECK_PROGS(FLEX, flex, error)
AC_CHECK_PROGS(MAKE, make, error)
AC_CHECK_PROGS(PODMAN, pod2man, error)

if test $MAKE = "error" 
then
	echo Please install GNU make
else
	$MAKE -v| grep -q GNU
	if test "$?" = 1
	then
		AC_MSG_ERROR(Please install *GNU* make)
	fi
fi

if test $BISON = "error" 
then
	AC_MSG_ERROR(can't find bison. Please install Bison (1.24 or better))
fi

if test $PODMAN = "error" 
then
	AC_MSG_WARN(can't find pod. You should install Perl (version 5 or better))
fi

if test $FLEX = "error" 
then
	AC_MSG_ERROR(can't find flex. Please install Flex (2.5 or better))
fi

if $CXX --version | grep -q '2\.7'
then
	true
else
	AC_MSG_ERROR(can't find g++ 2.7)
fi

AC_CHECK_HEADER(FlexLexer.h, true,
	AC_MSG_ERROR(can't find flex header. Please install Flex headers correctly))



AC_OUTPUT(make/out/ACVariables.make)
dnl AC_OUTPUT(config.hh)
