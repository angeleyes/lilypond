@c -*- coding: utf-8; mode: texinfo; documentlanguage: fr -*-
@c This file is part of lilypond.tely
@ignore
    Translation of GIT committish: 89af568420c7a794cc29980b4f8fabe10764c152

    When revising a translation, copy the HEAD committish of the
    version that you are working on.  See TRANSLATION for details.
@end ignore

@c \version "2.12.0"

@c Translators: Valentin Villenave
@c Translation checkers: Jean-Charles Malahieude, John Mandereau

@node Keyboard and other multi-staff instruments
@section Keyboard and other multi-staff instruments

@lilypondfile[quote]{keyboard-headword.ly}

Ce chapitre traite des différents aspects de la notation que l'on
rencontre particulièrement avec les instruments qui ont recours à
plusieurs portées, tels que ceux disposant de claviers, la harpe ou
le vibraphone.  Pour les besoins du discours, et pour simplifier, nous
parlerons ici de @qq{clavier} bien que le recours à des portées multiples
concerne aussi des instruments qui en sont dépourvus.

@menu
* Common notation for keyboards::  
* Piano::                       
* Accordion::                   
* Harp::                        
@end menu

@node Common notation for keyboards
@subsection Common notation for keyboards

Nous allons examiner ici les problèmes qui peuvent survenir en matière
de notation pour la plupart des instrument à cordes multiples.

@menu
* References for keyboards::    
* Changing staff manually::     
* Changing staff automatically::  
* Staff-change lines::          
* Cross-staff stems::           
@end menu

@node References for keyboards
@unnumberedsubsubsec References for keyboards

@c untranslated
@c ifnothtml
@c englishref
@c end ifnothtml
@cindex piano, système pour
@cindex portées pour piano
@cindex portées pour instrument à clavier
@cindex portées pour instrument à clés
@cindex clavier, portées pour instrument à
@cindex clés, portées pour instrument à

@funindex PianoStaff

La notation pour instrument à clavier est en règle générale présentée
sous la forme d'un système pour piano, autrement dit deux portées
normales ou plus réunies par une accolade. Cette notation sert également
à la harpe ou à d'autres instruments à clés.  L'organiste, quant à lui,
lira une partition composée de deux portées au sein d'un système
pianistique auquel vient s'adjoindre une portée normale pour le pédalier. 

Les portées sont largement autonomes, mais il arrive que des voix
passent de l'une à l'autre.  Le contexte @code{PianoStaff} est
précisément conçu pour gérer la notation spécifique au piano et autres
instruments à clavier, notamment ces croisements.

Certaines particularités de la notation pour claviers sont abordées dans
d'autres chapitres :

@itemize

@item Les claviers ont régulièrement recours à plusieurs voix dont le
nombre peut varier. voir à ce sujet @ref{Collision resolution}.

@item On peut écrire la musique pour claviers de façon parallèle, comme
l'explique @ref{Writing music in parallel}.

@item Les indications de doigté sont abrodées dans 
@ref{Fingering instructions}. 

@item Les indications en matière de pédalier d'orgue sont traitées comme
des articulations. Voir à ce sujet @ref{List of articulations}.

@item Pour générer des repères verticaux, voir @ref{Grid lines}.

@item En plus des @notation{Laissez vibrer}, les liaisons en matière de
clavier peuvent intervenir sur des accords arpégés ou des trémolos.
Reportez-vous au chapitre @ref{Ties}.

@item Le traitement des arpèges couvrant plusieurs voix ou portées est
abordé au chapitre @ref{Arpeggio}.

@item Une description des indications de tremolo est disponible au
chapitre @ref{Tremolo repeats}.

@item Certaines retouches particulières au monde des claviers sont
abordées au chapitre @rlearning{Real music example}.

@item Des notes fantômes permettent d'introduire des liaisons de tenue
qui passent d'une voix à l'autre, comme le montre 
@rlearning{Other uses for tweaks}.

@end itemize


@seealso
Manuel d'initiation :
@rlearning{Real music example},
@rlearning{Other uses for tweaks}.

Manuel de notation :
@ref{Grouping staves},
@ref{Instrument names},
@ref{Collision resolution},
@ref{Writing music in parallel},
@ref{Fingering instructions},
@ref{List of articulations},
@ref{Grid lines},
@ref{Ties},
@ref{Arpeggio},
@ref{Tremolo repeats}.

Référence des propriétés internes :
@rinternals{PianoStaff}.

Exemples de code :
@rlsr{Keyboards}.



@knownissues

@cindex claviers, centrage des nuances
@cindex nuances entre les portées d'un système pianistique
@cindex piano, nuances entre les portées
@cindex centrage des nuances entre deux portées de piano
@funindex staff-padding

Les nuances ne sont pas automatiquement centrées verticalement, mais il
existe des astuces.  Voir à ce sujet le modèle @qq{alignement des
nuances au piano} au chapitre @rlearning{Piano templates} ; une autre
solution consiste à augmenter le décalage des nuances par rapport à la
portée (@code{staff-pagging}) comme l'indique 
@rlearning{Moving objects}.


@node Changing staff manually
@unnumberedsubsubsec Changing staff manually

@cindex changements de portée manuels
@cindex changement de portée forcé
@cindex inter-portée, notes
@cindex notes inter-portée
@cindex inter-portée, ligatures
@cindex ligature inter-portée

@funindex \change
@funindex change

Il est possible de passer d'une portée à l'autre de façon manuelle, au
moyen de la commande

@example
\change Staff = @var{nomDeLaPortee}
@end example

@noindent
La valeur @var{nomDeLaPortee} est le nom de la portée sur laquelle va se
déplacer la voix courante.  Pour des raisons pratiques, on nomme la portée
supérieure @code{"haut"} et la portée inférieure @code{"bas"}, donc
@var{nomDeLaPortee} désigne habituellement @code{"haut"}, @code{"bas"},
@code{"MD"} ou @code{"MG"}.  Dans tous les cas, le contexte de
portée ainsi utilisé doit exister au préalable. 

Pour ligaturer automatiquement des notes entre deux portées, procédez
ainsi : 

@lilypond[verbatim,quote]
\new PianoStaff <<
  \new Staff = "up" {
    <e' c'>8
    \change Staff = "down"
    g8 fis g
    \change Staff = "up"
    <g'' c''>8
    \change Staff = "down"
    e8 dis e
    \change Staff = "up"
  }
  \new Staff = "down" {
    \clef bass
    % keep staff alive
    s1
  }
>>
@end lilypond

Si les ligatures demandaient à être retouchées, commencez par
modifier la direction des hampes.  L'emplacement des ligatures sera
alors calculé à partir du centre de la portée la plus proche -- voir
@rlearning{Fixing overlapping notation} pour un exemple de retouche sur
des ligatures. 


@seealso
Manuel d'initiation :
@rlearning{Fixing overlapping notation}.

Manuel de notation :
@ref{Stems},
@ref{Automatic beams}.

Exemples de code :
@rlsr{Keyboards}.

Référence des propriétés internes :
@rinternals{Beam},
@rinternals{ContextChange}.


@node Changing staff automatically
@unnumberedsubsubsec Changing staff automatically

@cindex Changement de portée automatique
@cindex Automatique, changement de portée

@funindex \autochange
@funindex autochange
@funindex PianoStaff

Les voix peuvent passer automatiquement d'une portée à l'autre, au moyen
de la syntaxe suivante :

@example
\autochange @dots{}@var{musique}@dots{}
@end example

@noindent
Deux portées seront alors créées au sein du contexte @code{PianoStaff},
nommées respectivement @code{"up"} et @code{"down"}.  La portée du bas 
sera par défaut en clé de fa.  La commande @code{\autochange} bascule
les notes d'une portée à l'autre en fonction de leur hauteur (le do du
milieu servant de pivot), et place les silences en fonction des notes
qui les suivront. Ainsi : 

@lilypond[quote,verbatim]
\new PianoStaff {
  \autochange {
    g4 a b c'
    d'4 r a g
  }
}
@end lilypond

@cindex mode relatif et autochange
@cindex autochange et mode relatif

@funindex \relative
@funindex relative

Une section en mode @code{\relative} se situant en dehors de la commande
@code{\autochange} n'aura pas d'effet sur les hauteurs de l'expression
@var{musique}.  Il est donc préférable d'introduire la directive
@code{\relative} @strong{après} @code{\autochange}.

Lorsque des contrôles particuliers doivent s'appliquer aux portées,
mieux vaut les nommer explicitement -- attention : sous peine
d'effet indésirable quant au résultat, la portée supérieure doit
s'appeler @code{"up"} et l'inférieure @code{"down"} ; @emph{ceci est à
notre connaissance le seul cas où ces noms de variable sont figés}.
Cette procédure sert, entre autres, à indiquer l'armure sur la portée
inférieure :

@c Keep Ly needed, otherwise 'up' and 'down' get
@c incorrectly translated in verbatim output
@c KEEP LY
@lilypond[quote,verbatim,nogettext]
\new PianoStaff <<
  \new Staff = "up" {
    \new Voice = "melodieUn" {
      \key g \major
      \autochange \relative c' {
        g8 b a c b d c e
        d8 r fis, g a2
      }
    }
  }
  \new Staff = "down" {
    \key g \major
    \clef bass
  }
>>
@end lilypond


@seealso
Dans ce même manuel : 
@ref{Changing staff manually}.

Exemples de code :
@rlsr{Keyboards}.

Référence des propriétés internes : 
@rinternals{AutoChangeMusic}.


@knownissues

@cindex accords, répartition sur plusieurs portées avec \autochange

Les changements de portée automatiques n'interviennent pas toujours à
l'endroit le plus opportun.  Pour un résultat de meilleure qualité, il
vaut mieux indiquer soi-même ces changements.

Un accord ne peut se répartir sur plusieurs portées ; sa portée
d'affectation sera déterminée par la première hauteur mentionnée dans la
construction de cet accord.  

@code{\autochange} ne peut intervenir à l'intérieur d'une commande
@code{\times}.


@node Staff-change lines
@unnumberedsubsubsec Staff-change lines

@cindex voix entre deux portées
@cindex changements de portée
@cindex mélodie d'une portée à une autre

@funindex followVoice
@funindex \showStaffSwitch
@funindex showStaffSwitch
@funindex \hideStaffSwitch
@funindex hideStaffSwitch

Lorsqu'une voix change de portée, il est possible d'imprimer
automatiquement une ligne reliant les notes, en faisant appel à la
commande @code{\showStaffSwitch} :

@lilypond[quote,verbatim,relative=1]
\new PianoStaff <<
  \new Staff = "one" {
    \showStaffSwitch
    c1
    \change Staff = "two"
    b2 a
  }
  \new Staff = "two" {
    \clef bass
    s1*2
  }
>>
@end lilypond


@predefined
@code{\showStaffSwitch},
@code{\hideStaffSwitch}.
@endpredefined


@seealso
Extraits de code :
@rlsr{Keyboards}.

Référence des propriétés internes : 
@rinternals{Note_head_line_engraver},
@rinternals{VoiceFollower}.


@node Cross-staff stems
@unnumberedsubsubsec Cross-staff stems

@cindex hampe, enjambement portées
@cindex distance entre deux portées de piano

@funindex Stem
@funindex cross-staff
@funindex length
@funindex flag-style

Pour écrire des accords qui enjambent deux portées, on allonge la hampe
de l'accord de l'une des deux portées de façon à ce qu'elle rejoigne celle de
l'autre portée.

@lilypond[verbatim,quote]
\new PianoStaff <<
  \new Staff {
    \relative c' {
      f8 e4 d8 d f e4
    }
  }
  \new Staff {
    \relative c' {
      << {
        \clef bass
        % stems may overlap the other staff
        \override Stem #'cross-staff = ##t
        % extend the stems to reach other other staff
        \override Stem #'length = #12
        % do not print extra flags
        \override Stem #'flag-style = #'no-flag
        % prevent beaming as needed
        a8 g4 f8 f bes\noBeam g4
      }
      \\
      {
        f,2 bes4 c
      } >>
    }
  }
>>
@end lilypond

@snippets
@lilypondfile[verbatim,lilyquote,texidoc,doctitle]
{indicating-cross-staff-chords-with-arpeggio-bracket.ly}


@seealso
Extraits de code :
@rlsr{Keyboards}.

Référence des propriétés internes :
@rinternals{Stem}.


@node Piano
@subsection Piano

Ce chapitre traîte des aspects de la notation directement liés au piano.  

@menu
* Piano pedals::                
@end menu

@node Piano pedals
@unnumberedsubsubsec Piano pedals

@cindex piano et pédales
@cindex pédales de piano
@cindex sustain, pédale
@cindex pédale sustain
@cindex sostenuto, pédale
@cindex pédale sostenuto
@cindex una corda
@cindex tre corde
@cindex sos.
@cindex U.C.

@funindex \sustainOn
@funindex sustainOn
@funindex \sustainOff
@funindex sustainOff
@funindex \sostenutoOn
@funindex sostenutoOn
@funindex \sostenutoOff
@funindex sostenutoOff
@funindex \unaCorda
@funindex unaCorda
@funindex \treCorde
@funindex treCorde


Le piano possède deux pédales, parfois trois, permettant de modifier
l'émission du son : une pédale de @notation{tenue} (@emph{sustain}),
une pédale de @notation{sourdine} (@emph{una corda} ou @emph{U.C.}) et
une pédale @notation{tonale} (@emph{sostenuto} ou @emph{sos.}).  La
pédale @emph{sustain} se rencontre aussi sur les vibraphones et
celestas.  

@lilypond[quote,verbatim,relative=2]
c4\sustainOn d e g
<c, f a>1\sustainOff
c4\sostenutoOn e g c,
<bes d f>1\sostenutoOff
c4\unaCorda d e g
<d fis a>1\treCorde
@end lilypond

@cindex pédale, styles d'indications de
@cindex pédale, indication textuelle de
@cindex pédale, indication graphique de
@cindex pédale, indication combinée de
@cindex pédale sustain, style
@cindex sustain, style de pédale

@funindex pedalSustainStyle
@funindex mixed
@funindex bracket
@funindex text

Trois styles sont à votre disposition pour imprimer les indications de
pédale : sous forme de texte, de crochet, ou une combinaison des deux.  
@code{text} est le style de notation par défaut pour les pédales de
tenue ou de sourdine --- le traditionnel @q{*Ped.}.  La pédale tonale,
en revanche, utilise @code{mixed} par défaut.

@lilypond[quote,verbatim,relative=2]
c4\sustainOn g c2\sustainOff
\set Staff.pedalSustainStyle = #'mixed
c4\sustainOn g c d
d\sustainOff\sustainOn g, c2\sustainOff
\set Staff.pedalSustainStyle = #'bracket
c4\sustainOn g c d
d\sustainOff\sustainOn g, c2
\bar "|."
@end lilypond

Le placement des commandes de pédale correspond au mouvement de la
pédale de tenue pendant le jeu.  Garder une pédale enclanchée jusqu'à la
barre finale s'obtient tout simplement en omettant la commande de
relacher. 


@seealso
Manuel de notation :
@ref{Ties}.

Extraits de code :
@rlsr{Keyboards}.

Référence des propriétés internes :
@rinternals{SustainPedal},
@rinternals{SustainPedalLineSpanner},
@rinternals{SustainEvent},
@rinternals{SostenutoPedal},
@rinternals{SostenutoPedalLineSpanner},
@rinternals{SostenutoEvent},
@rinternals{UnaCordaPedal},
@rinternals{UnaCordaPedalLineSpanner},
@rinternals{UnaCordaEvent},
@rinternals{PianoPedalBracket},
@rinternals{Piano_pedal_engraver}.


@node Accordion
@subsection Accordion

@menu
* Discant symbols::             
@end menu

@node Discant symbols
@unnumberedsubsubsec Discant symbols

@untranslated
@ifnothtml
@englishref
@end ifnothtml

@node Harp
@subsection Harp

@untranslated
