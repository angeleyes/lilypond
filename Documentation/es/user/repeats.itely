@c -*- coding: utf-8; mode: texinfo; -*-
@ignore
    Translation of GIT committish: 0204d415337bf74ae8626f396e6ea3cc5669c8f2

    When revising a translation, copy the HEAD committish of the
    version that you are working on.  See TRANSLATION for details.
@end ignore

@c \version "2.11.38"

@node Repeats
@section Repeats

@lilypondfile[ragged-right,line-width=16\cm,staffsize=16,quote]
{repeats-headword.ly}

La repetición es un concepto fundamental en música, y existen varios
tipos de notación para las repeticiones.  LilyPond contempla los
siguientes tipos de repetición:

@table @code
@item volta (primera y segunda vez)
La repetición de la música no se imprime de forma desarrollada, sino
que se indica encerrándola entre barras de repetición.  Si el salto de
la repetición se encuentra al comienzo de una pieza, la barra de
repetición sólo se imprime al final del fragmento.  Se imprimen una
serie de finales alternativos (volte) de izquierda a derecha indicados
mediante corchetes.  Ésta es la notación estándar para las
repeticiones con alternativas.

@item unfold (desplegada)
Las música repetida se escribe y se interpreta completamente tantas
veces como especifique el valor @var{número_de_repeticiones}.  Es útil
cuando se estáescribiendo música repetitiva.

@item percent (porcentaje)
Hacer repeticiones de compases o parte de ellos.  Tienen un aspecto
semejante a un signo de porcentaje.  Las repeticiones de porcentaje se
deben declarar dentro de un contexto @code{Voice}.

@item tremolo (trémolo)
Hacer barras de trémolo.

@end table

@ignore
LilyPond tiene una construcción sintáctica para especificar distintos
tipos de repetición.  La sintaxis es

@example
\repeat @var{variante} @var{número_de_repeticiones} @var{cuerpo_de_la_repetición}
@end example

donde @var{cuerpo_de_la_repetición} es una expresión musical.


Los finales alternativos se escriben con
@funindex \alternative
@example
\alternative @{
  @var{alternativa1}
  @var{alternativa2}
  @var{alternativa3}
  @dots{}
@}
@end example

@noindent
después de un bloque @code{\repeat volta} o @code{unfold}, donde cada
@var{alternativa} es una expresión musical.  Si especifica menos
alternativas que las que se especifican en
@var{número_de_repeticiones}, se supondrá que la primera alternativa
se interpreta más de una vez.
@end ignore

@menu
* Writing long repeats::        
* Short repeats::               
@end menu

@node Writing long repeats
@subsection Writing long repeats

@menu
* Normal repeats::              
* Manual repeat marks::         
* Written-out repeats::         
@end menu

@cindex volta
@cindex prima volta
@cindex primera y segunda vez
@cindex seconda volta
@cindex volta, prima
@cindex volta, seconda
@funindex \repeat

@node Normal repeats
@subsubsection Normal repeats

La sintaxis de una repetición simple es

@example
\repeat @var{variante} @var{número_de_repeticiones} @var{cuerpo_de_la_repetición}
@end example

donde @var{cuerpo_de_la_repetición} es una expresión musical.

Repeticiones normales sin finales alternativos:

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
\repeat volta 2 { c4 d e f }
c2 d
\repeat volta 2 { d4 e f g }
@end lilypond

Repeticiones normales con primera y segunda vez:

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
\repeat volta 2 { g f e d }
  \alternative {
    { cis2 g' }
    { cis,2 b }
  }
c1
@end lilypond


Repeticiones con anacrusa:

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
\new Staff {
  \partial 4
  e |
  \repeat volta 4 { c2 d2 | e2 f2 | }
  \alternative { { g4 g g e } { a a a a | b2. } }
}
@end lilypond

@noindent
o bien

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
\new Staff {
  \partial 4 
  \repeat volta 4 { e | c2 d2 | e2 f2 | }
  \alternative { { \partial 4*3 g4 g g } { a a a a | b2. } }
}
@end lilypond


@funindex \repeatTie

Se pueden añadir ligaduras de unión al segundo final:

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
c1
\repeat volta 2 {c4 d e f ~ }
\alternative { {f2 d} {f\repeatTie f,} }
@end lilypond

De manera predeterminada, los corchetes de primera y segunda vez se
dibujan por encima de todo el fragmento de finales alternativos, pero
es posible acortar los corchetes de primera y segunda vez
estableciendo @code{voltaSpannerDuration}.  En el ejemplo siguiente,
el corchete sólo dura un compás, lo que supone una duración de 3/4.

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
\time 3/4
c c c
\set Score.voltaSpannerDuration = #(ly:make-moment 3 4)
\repeat volta 5 { d d d }
\alternative { { e e e f f f }
{ g g g } }
@end lilypond

El grabador @code{Volta_engraver} reside de manera predeterminada
dentro del contexto Score, y así los corchetes de las repeticiones se
imprimen solamente por encima del pentagrama superior.  Se puede
ajustar esto añadiento el grabador @code{Volta_engraver} al contexto
Staff en que queremos que aparezcan los corchetes; véase
@ref{Modifying context plug-ins} y
@c @lsr{repeats,volta@/-multi@/-staff@/.ly}.

@lilypond[verbatim,ragged-right,quote]
\score { <<
  \new Staff { \repeat volta 2 { c'1 } \alternative { c' } }
  \new Staff { \repeat volta 2 { c'1 } \alternative { c' } }
  \new Staff \with { \consists Volta_engraver } { c'2 g' e' a' }
  \new Staff { \repeat volta 2 { c'1 } \alternative { c' } }
 >> }
@end lilypond

@c Is there a way to have a final bar ("|.") at the end of the
@c previous line? Doesn't seem to be.
Si quiere comenzar una repetición al principio de una línea y tiene una
doble barra al final de la línea anterior, utilice

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
c4 c c c
\bar "||:" \break 
\repeat volta 2 { c4 d e f }   
@end lilypond

consulte @ref{Bar lines} para ver más información.

@seealso

Glosario musical: @rglos{repeat}.
@c FIXME : add @rglos{volta} after glossary addition

Referencia de la notación: @ref{Bar lines}, @ref{Modifying context plug-ins}.

Fragmentos de código: @lsrdir{Repeats,Repeats}

Referencia de funcionamiento interno: @internalsref{VoltaBracket},
@internalsref{RepeatedMusic}, @internalsref{VoltaRepeatedMusic},
@internalsref{UnfoldedRepeatedMusic}.

@c Ejemplos:

@knownissues

@cindex repetición ambigua

Una repetición anidada como

@example
\repeat @dots{}
\repeat @dots{}
\alternative
@end example

@noindent
es ambigua porque no está claro a qué @code{\repeat} pertenece la
@code{\alternative}.  Esta ambigüedad se resuelve haciendo que la
@code{\alternative} pertenezca siempre a la @code{\repeat} más
interna.  Para más claridad, se recomienda usar llaves en tales
situaciones.

La información del contador de tiempo no se recuerda al comienzo de
una alternativa, por ello después de una repetición la información de
la cuenta de tiempo se debe reajustar manualmente; por ejemplo,
estableciendo el valor de @code{Score.measurePosition} o introduciendo
@code{\partial}.  De forma similar, las ligaduras de expresión o de
unión tampoco se repiten.



@node Manual repeat marks
@subsubsection Manual repeat marks

@funindex repeatCommands

@c FIXME: Markup does not work in the "text" field
@c And how does one change the font?
@c On the whole, this section needs better documentation (why the
@c double parentheses around the volta expressions?)

Se puede usar la propiedad @code{repeatCommands} para controlar la
disposición de las repeticiones.  Su valor es una lista de Scheme de
comandos de repetición.

@table @asis
@item @code{start-repeat}
Imprimir una barra de compás @code{|:}

@item @code{end-repeat}
Imprimir una barra de compás @code{:|}

@item @code{(volta @var{texto})}
Imprimir un corchete de volta que diga @var{texto} El texto se puede
especificar como una cadena de texto o como un texto de marcado,
consulte @ref{Text markup}.  No olvide cambiar la fuente tipográfica,
porque el tipo por defecto para los números no contiene caracteres
alfabéticos;

@item @code{(volta #f)}
Detener un corchete de volta mantenido.
@end table

@lilypond[quote,ragged-right,verbatim,fragment,relative=2]
c4
  \set Score.repeatCommands = #'((volta "93") end-repeat)
c4 c4
  \set Score.repeatCommands = #'((volta #f))
c4 c4
@end lilypond

@c FIXME: improve visibility of bar lines link?

@seealso

Referencia de la notación: @ref{Bar lines}.

Fragmentos de código: @lsrdir{Repeats,Repeats}

Referencia del programa: @internalsref{VoltaBracket},
@internalsref{RepeatedMusic}, @internalsref{VoltaRepeatedMusic} y
@internalsref{UnfoldedRepeatedMusic}.


@node Written-out repeats
@subsubsection Written-out repeats

unfold




@node Short repeats
@subsection Short repeats

@menu
* Percent repeats::             
* Tremolo repeats::             
@end menu

@node Percent repeats
@subsubsection Percent repeats

@cindex porcentaje, repeticiones de
@cindex compás, repeticiones de

En el estilo @code{percent} (porcentaje), se puede hacer que se repita
un patrón de notas.  Se imprime una sola vez, y luego el patrón se
sustituye con un símbolo especial.  Los patrones de uno y dos compases
se sustituyen por símbolos parecidos a un porcentaje, y los patrones
que dividen a la duración de un compás se sustituyen por barras
inclinadas.  Las repeticiones de porcentaje se deben declarar dentro
de un contexto @code{Voice}.

@lilypond[quote,verbatim,ragged-right]
\new Voice \relative c' {
  \repeat percent 4 { c4 }
  \repeat percent 2 { c2 es2 f4 fis4 g4 c4 }
}
@end lilypond

Las repeticiones de compás de más de 2 compases llevan un contador, si
se activa la propiedad @code{countPercentRepeats},

@lilypond[relative=2,fragment,quote,verbatim,ragged-right]
\new Voice {
\set countPercentRepeats = ##t
  \repeat percent 4 { c1 }
}
@end lilypond

También se pueden imprimir porcentajes aislados.  Esto se hace
mediante la colocación de un silencio multicompás con una función de
impresión distinta,

@lilypond[fragment,verbatim,quote]
\override MultiMeasureRest #'stencil
  = #ly:multi-measure-rest::percent
R1
@end lilypond


@seealso

Fragmentos de código: @lsrdir{Repeats,Repeats}

Referencia del programa: @internalsref{RepeatSlash},
@internalsref{PercentRepeat}, @internalsref{DoublePercentRepeat},
@internalsref{DoublePercentRepeatCounter},
@internalsref{PercentRepeatCounter},
@internalsref{PercentRepeatedMusic}.

@node Tremolo repeats
@subsubsection Tremolo repeats

@cindex barras de trémolo

Para colocar marcas de trémolo entre las notas, use @code{\repeat} con
el estilo @code{tremolo} (trémolo):

@lilypond[quote,verbatim,ragged-right]
\new Voice \relative c' {
  \repeat tremolo 8 { c16 d16 }
  \repeat tremolo 4 { c16 d16 }
  \repeat tremolo 2 { c16 d16 }
}
@end lilypond

La sintaxis de @code{\repeat tremolo} espera que se escriban
exactamente dos notas dentro de las llaves, y el número de
repeticiones debe corresponderse con un valor que se pueda expresar
con figuras normales o con puntillo.  Así, @code{\repeat tremolo 7} es
válido y produce una nota con doble puntillo, pero @code{\repeat
tremolo 9} no es válido.

La duración del trémolo es igual a la duración de la expresión entre
llaves, multiplicada por el número de repeticiones: @code{\repeat
tremolo 8 @{ c16 d16 @}} da como resultado un trémolo de redonda,
escrito como dos redondas unidas por barras de trémolo.

Existen dos maneras de colocar marcas de trémolo sobre una única nota.
Incluso aquí se puede utilizar la sintaxis @code{\repeat tremolo}, en
cuyo caso la nota no debe ir encerrada entre llaves:

@lilypond[quote,verbatim,ragged-right]
\repeat tremolo 4 c'16
@end lilypond

@cindex trémolo, indicaciones de
@funindex tremoloFlags

El mismo resultado se puede obtener escribiendo
@q{@code{:}[@var{número}]} después de la nota.  El número indica la
duración de la subdivisión, y debe ser 8 como mínimo.  Un valor de 8
para @var{número} produce una línea que atraviesa la plica de la nota.
Si se omite la longitud, se utiliza el último valor (almacenado en
@code{tremoloFlags})

@lilypond[quote,ragged-right,verbatim,fragment]
c'2:8 c':32 | c': c': |
@end lilypond


@knownissues


Los trémolos que se escriben con @q{@code{:}[@var{número}]} no se
trasladan hacia la salida MIDI.


@seealso

Referencia de la notación: @ref{Tremolo repeats}.

Referencia de funcionamiento interno: @internalsref{Beam},
@internalsref{StemTremolo}.

Fragmentos de código: @lsrdir{Repeats,Repeats}

En otros lugares: @internalsref{StemTremolo}.





