@c -*- coding: utf-8; mode: texinfo; -*-
@ignore
    Translation of GIT committish: 024932c39052e559d3541b0844660c7c9b988d5f

    When revising a translation, copy the HEAD committish of the
    version that you are working on.  See TRANSLATION for details.
@end ignore

@c \version "2.11.38"

@node Simultaneous notes
@section Simultaneous notes

@lilypondfile[quote]{simultaneous-headword.ly}

La polifonía en música hace referencia a tener más de una voz en una
pieza cualquiera de música.  En LilyPond la polifonía hace referencia
a tener más de una voz en el mismo pentagrama.

@menu
* Single voice::                
* Multiple voices::             
@end menu


@node Single voice
@subsection Single voice

@menu
* Chorded notes::                      
* Clusters::                    
@end menu

@node Chorded notes
@subsubsection Chorded notes

@cindex acordes
@cindex paréntesis en ángulo
@funindex <
@funindex >
@funindex <...>

Un acorde se forma encerrando un conjunto de notas entre @code{<} y
@code{>}.  Un acorde puede ir seguido de una duración o un conjunto de
articulaciones, como si fueran simples notas.

@lilypond[verbatim,ragged-right,fragment,quote,relative=1]
<c e g>2 <c f a>4-> <e g c>-.
@end lilypond

Para ver más información sobre los acordes, consulte @ref{Modern chords}.

@seealso

Glosario musical:
@rglos{chord}.

Manual de aprendizaje:
@rlearning{Combining notes into chords}.

Referencia de la notación:
@ref{Modern chords}.

Fragmentos de código:
@rlsr{Simultaneous notes}.

@knownissues

Por algún motivo, expresiones musicales como @code{<< @{ g8 e8 @} a4
>>}, que se deberían convertir en acordes, aparecen en dos pentagramas
separados.  Para evitarlo emplee acordes explícitos como en
@code{<g a>8 <e a>8}.



@node Clusters
@subsubsection Clusters

@cindex cluster
@cindex racimo (cluster)

Un «cluster» o racimo indica que se deben tocar simultáneamente un
conjunto de notas consecutivas.  Se escriben aplicando la función
@code{\makeClusters} a una secuencia de acordes, p.ej.:

@lilypond[quote,ragged-right,relative=2,fragment,verbatim]
\makeClusters { <g b>2 <c g'> }
@end lilypond

Se pueden mezclar en el mismo pentagrama notas normales y clusters,
incluso al mismo tiempo.  En tal caso, no se hace ningún intento de
evitar automáticamente las colisiones entre clusters y notas normales.

@seealso

Glosario musical:
@rglos{cluster}.

Fragmentos de código:
@rlsr{Simultaneous notes}.

Referencia de funcionamiento interno:
@rinternals{ClusterSpanner},
@rinternals{ClusterSpannerBeacon},
@rinternals{Cluster_spanner_engraver}.

@c Examples: @rlsr{contemporary,cluster@/.ly}.

@knownissues

Los clusters sólo tienen un buen aspecto cuando abarcan un mínimo de
dos acordes.  En caso contrario aparecerán excesivamente estrechos.

Los clusters no llevan plica y por sí mismos no pueden indicar las
duraciones.  Los racimos separados necesitarían silencios de
separación entre ellos.

@node Multiple voices
@subsection Multiple voices

@menu
* Collision resolution::        
* Automatic part combining::    
* Writing music in parallel::   
@end menu

@node Collision resolution
@subsubsection Collision resolution

@cindex mezclar notas
@cindex notas, colisiones de
@cindex colisiones
@funindex \shiftOn
@funindex \shiftOnn
@funindex \shiftOnnn
@funindex \shiftOff
@cindex desplazamiento de silencios, automático

Las cabezas de notas con igual duración se combinan automáticamente,
pero las que tienen duraciones distintas no se combinan.  Los
silencios que se encuentran en el lado opuesto de una plica se
desplazan verticalmente.

@lilypond[quote,verbatim,relative=2]
<<
  {
    c8 d e d c d c4
    g'2 fis
  } \\ {
    c2 c8. b16 c4
    e,2 r
  } \\ {
    \oneVoice
    s1
    e8 a b c d2
  }
>>
@end lilypond

Las cabezas de notas diferentes se pueden combinar, con la excepción
de blancas con negras:

@lilypond[quote,verbatim,relative=2]
<<
  {
    \override Staff.NoteCollision #'merge-differently-headed = ##t
    c8 d e d c d c4
    g'2 fis
  } \\ {
    c2 c8. b16 c4
    e,2 r
  } \\ {
    \oneVoice
    s1
    e8 a b c d2
  }
>>
@end lilypond

Se pueden combinar cabezas con puntillos diferentes:

@lilypond[quote,relative=2,verbatim]
<<
  {
    \override Staff.NoteCollision #'merge-differently-headed = ##t
    \override Staff.NoteCollision #'merge-differently-dotted = ##t
    c8 d e d c d c4
    g'2 fis
  } \\ {
    c2 c8. b16 c4
    e,2 r
  } \\ {
    \oneVoice
    s1
    e8 a b c d2
  }
>>
@end lilypond

@cindex desplazar nota

La colisión del segundo compás se produce porque
@code{merge-differently-headed} no es capaz de completar
satisfactoriamente la combinación cuando se encuentran tres o más
notas alineadas en la misma columna (de hecho, se obtiene una
advertencia por este motivo).  Para conseguir que la combinación
funcione adecuadamente, aplique un @code{\shift} o desplazamiento a la
nota que no se debe combinar.  Aquí, se aplica @code{\shiftOn} para
mover el sol agudo fuera de la columna, y entonces
@code{merge-differently-headed} hace su trabajo correctamente.

@lilypond[quote,relative=2,verbatim]
<<
  {
    \override Staff.NoteCollision #'merge-differently-headed = ##t
    \override Staff.NoteCollision #'merge-differently-dotted = ##t
    c8 d e d c d c4
    \shiftOn
    g'2 fis
  } \\ {
    c2 c8. b16 c4
    e,2 r
  } \\ {
    \oneVoice
    s1
    e8 a b c d2
  }

>>
@end lilypond

Sólo se combinan las notas si tienen la plica en direcciones opuestas
(o sea en las @code{Voice}s 1 y 2).

@cindex multiple voices
@cindex polyphonic music
@cindex shifting voices

En ciertos casos de polifonía compleja, podría necesitar voces
adicionales para evitar colisiones entre las notas.  Las voces
adicionales se añaden definiendo una variable, como se muestra a
continuación:

@lilypond[quote,verbatim]
voiceFive = #(context-spec-music (make-voice-props-set 4) 'Voice)
\relative c'''
<<
  { \voiceOne g2. ~ \stemDown g32[ f( es d c b a b64) g] } \\
  { \voiceThree b4 } \\
  { \voiceFive d,  } \\
  { \voiceTwo g,   }
>>
@end lilypond


@predefined

@funindex \oneVoice
@code{\oneVoice},
@funindex \voiceOne
@code{\voiceOne},
@funindex \voiceTwo
@code{\voiceTwo},
@funindex \voiceThree
@code{\voiceThree},
@funindex \voiceFour
@code{\voiceFour}.

@funindex \voiceNeutralStyle
@funindex \voiceOneStyle
@funindex \voiceTwoStyle
@funindex \voiceThreeStyle
@funindex \voiceFourStyle
@example
\voiceNeutralStyle
\voiceOneStyle
\voiceTwoStyle
\voiceThreeStyle
\voiceFourStyle
@end example

@funindex \shiftOn
@code{\shiftOn},
@funindex \shiftOnn
@code{\shiftOnn},
@funindex \shiftOnnn
@code{\shiftOnnn},
@funindex \shiftOff
@code{\shiftOff}: estos comandos especifican el grado en que se deben
desplazar los acordes de la voz en curso.  Las voces exteriores
(normalmente: la voz uno y la voz dos) tienen @code{\shiftOff}
(desplazamiento desactivado), mientras que las voces interiores (tres
y cuatro) tienen @code{\shiftOn} (desplazamiento activado).
@code{\shiftOnn} y @code{\shiftOnnn} definen niveles de desplazamiento
más grandes.

Cuando LilyPond no puede con todo, se pueden usar la propiedad
@code{force-hshift} (forzar desplazamiento horizontal) del objeto
@code{NoteColumn} y los silencios con altura para sobreescribir las
decisiones de composición tipográfica.

@lilypond[quote,verbatim,relative=1]
<<
  { <d g>2
    <d g>  }
  \\
  { <b f'>2
    \once \override NoteColumn #'force-hshift = #1.7
    <b f'> }
>>
@end lilypond


@seealso

Glosario musical:
@rglos{polyphony}.

Manual de aprendizaje:
@rlearning{Multiple notes at once},
@rlearning{Voices contain music},
@rlearning{Collisions of objects}.

Fragmentos de código:
@rlsr{Simultaneous notes}.

Referencia de funcionamiento interno:
@rinternals{NoteColumn}.
Los objetos responsables de la resolución de colisiones son
@rinternals{NoteCollision} y
@rinternals{RestCollision}.


@knownissues

Cuando se emplea @code{merge-differently-headed} con una corchea (o
una nota más corta) con la plica hacia arriba, y una blanca con la
plica hacia abajo, la corchea recibe un desplazamiento ligeramente
incorrecto a causa de la anchura diferente del símbolo de la cabeza de
la blanca.

No está claro en qué circunstancias se pueden combinar cabezas de nota
distintas que tienen también distinto puntillo.

No están contemplados los racimos (clusters) donde la misma nota se
presenta con diferentes alteraciones accidentales dentro del mismo
acorde.  En este caso se recomienda usar la transcripción enarmónica,
o usar la notación especial de racimos (véase @ref{Clusters}).


@node Automatic part combining
@subsubsection Automatic part combining

@cindex automática, combinación de partes
@cindex partes, combinación automática
@cindex partes, combinador de

La combinación automática de particellas se usa para mezclar dos
partes musicales sobre un pentagrama.  Tiene como objetivo el
tipografiado de partituras orquestales.  Cuando las dos partes son
idénticas durante un período de tiempo, sólo se presenta una de ellas.
En los lugares en que las dos partes son diferentes, se tipografían
como voces separadas, y las direcciones de las plicas se establecen de
forma automática.  También las partes de solo y @emph{a due} quedan
identificadas y es posible marcarlas.

La sintaxis para la combinación de las partes es:

@example
\partcombine @var{expresión_musical_1} @var{expresión_musical_2}
@end example


El ejemplo siguiente ejemplifica la funcionalidad básica del
combinador de partes: poner las partes en un solo pentagrama, y
establecer las direcciones de las plicas y la polifonía. Se utilizan
las mismas variables para las partes independientes y el pentagrama
combinado.

@lilypond[quote,verbatim]
instrumentOne = \relative c' {
  c4 d e f
  R1
  d'4 c b a
  b4 g2 f4
  e1
}

instrumentTwo = \relative g' {
  R1
  g4 a b c
  d c b a
  g f( e) d
  e1
}

<<
  \new Staff \instrumentOne
  \new Staff \instrumentTwo
  \new Staff \partcombine \instrumentOne \instrumentTwo
>>
@end lilypond

Las notas del tercer compás aparecen solamente una vez a pesar de que
se han especificado en las dos partes.  Las direcciones de las plicas
y ligaduras se establecen de forma automática, según se trate de un
solo o de un unísono.  Cuando se necesita en situaciones de polifonía,
la primera parte (que recibe el nombre de contexto @code{one}) siempre
recibe las plicas hacia arriba, mientras que la segunda (llamada
@code{two}) siempre recibe las plicas hacia abajo.  En los fragmentos
de solo, las partes se marcan con @q{Solo} y @q{Solo II},
respectivamente.  Las partes en unísono (@notation{a due}) se marcan
con el texto predeterminado @qq{a2}.

Los dos argumentos de @code{\partcombine} se interpretan como
contextos de @rinternals{Voice}.  Si se están usando octavas
relativas, se debe especificar @code{\relative} para ambas expresiones
musicales, es decir:

@example
\partcombine
  \relative @dots{} @var{expresión_musical_1}
  \relative @dots{} @var{expresión_musical_2}
@end example

@noindent
Una sección @code{\relative} que se encuentra fuera de
@code{\partcombine} no tiene ningún efecto sobre las notas de
@var{expresión_musical_1} y @var{expresión_musical_2}.

@snippets

Las partes se pueden combinar sin imprimir ningún texto:

@lilypond[quote,verbatim]
\new Staff <<
  \set Staff.printPartCombineTexts = ##f
  \partcombine
    \relative g' { g a( b) r }
    \relative g' { g r4 r f }
>>
@end lilypond

Es posible modificar los textos que se imprimen:

@c KEEP LY
@lilypond[quote,verbatim]
\new Staff <<
  \set Score.soloText = #"ellas"
  \set Score.soloIIText = #"ellos"
  \set Score.aDueText = #"todos"
  \partcombine
    \relative g' { g4 g r r a2 g }
    \relative g' { r4 r a( b) a2 g }
>>
@end lilypond


@seealso

Glosario musical:
@rglos{a due},
@rglos{part}.

Referencia de la notación:
@ref{Writing parts}.

Fragmentos de código:
@rlsr{Simultaneous notes}.


Referencia de funcionamiento interno:
@rinternals{PartCombineMusic},
@rinternals{Voice}.

@knownissues

Si @code{printPartCombineTexts} está establecido, cuando las dos voces
tocan y terminan las mismas notas, el combinador de partes puede
tipografiar @code{a2} más de una vez en el mismo compás.

@code{\partcombine} no puede estar dentro de @code{\times}.

@code{\partcombine} no puede estar dentro de @code{\relative}.

Internamente, el @code{\partcombine} interpreta los dos argumentos
como @code{Voice}s llamadas @code{one} y @code{two}, y después decide
cuándo se pueden combinar las partes.  Como consecuencia, si los
argumentos cambian a contextos de @rinternals{Voice} con nombres
diferentes, los eventos que contienen se ignorarán.


@node Writing music in parallel
@subsubsection Writing music in parallel

@cindex Escribir música en paralelo
@cindex Música intercalada
@funindex parallelMusic

La música para varias partes se puede intercalar dentro del código de
entrada.  La función @code{\parallelMusic} admite una lista que
contiene los nombres de las variables que se van a crear, y una
expresión musical.  El contenido de los compases alternativos
extraídos de la expresión se convierten en el valor de las variables
respectivas, de manera que podemos utilizarlas más tarde para imprimir
la música.

@warning{Es obligatorio utilizar comprobaciones de compás @code{|}, y
los compases deben tener la misma longitud.}

@lilypond[quote,verbatim]
\parallelMusic #'(voiceA voiceB) {
  % Bar 1
  r8 g'16[ c''] e''[ g' c'' e''] r8 g'16[ c''] e''[ g' c'' e''] |
  c'2                               c'2                         |

  % Bar 2
  r8 a'16[ d''] f''[ a' d'' f''] r8 a'16[ d''] f''[ a' d'' f''] |
  c'2                               c'2                         |
}
\new StaffGroup <<
  \new Staff  \voiceA
  \new Staff  \voiceB
>>
@end lilypond

Se puede usar el modo relativo.  Observe que la instrucción
@code{\relative} no se utiliza dentro del propio bloque
@code{\parallelMusic}.  Las notas guardan relación con la nota
anterior en la misma voz, no con la nota anterior dentro del código de
entrada (dicho de otra manera, las notas relativas de @code{vozA}
ignoran a las notas que hay en @code{vozB}.

@lilypond[quote,verbatim]
\parallelMusic #'(voiceA voiceB) {
  % Bar 1
  r8 g16 c e g, c e r8 g,16 c e g, c e  |
  c2                c                   |

  % Bar 2
  r8 a,16 d f a, d f r8 a,16 d f a, d f |
  c2                 c                  |
 }
\new StaffGroup <<
  \new Staff \relative c'' \voiceA
  \new Staff \relative c'  \voiceB
>>
@end lilypond

Esto funciona aceptablemente bien para música de piano.  El siguiente
ejemplo asigna cada cuatro compases consecutivos a cuatro variables:

@lilypond[quote,verbatim]
global = {
  \key g \major
  \time 2/4
}

\parallelMusic #'(voiceA voiceB voiceC voiceD) {
  % Bar 1
  a8    b     c   d     |
  d4          e         |
  c16 d e fis d e fis g |
  a4          a         |

  % Bar 2
  e8      fis  g     a   |
  fis4         g         |
  e16 fis g  a fis g a b |
  a4           a         |

  % Bar 3 ...
}

\score {
\new PianoStaff <<
 \new Staff {
   \global
   <<
     \relative c'' \voiceA \\
     \relative c'  \voiceB
   >>
 }
 \new Staff {
   \global \clef bass
   <<
     \relative c \voiceC \\
     \relative c \voiceD
   >>
 }
>>
}
@end lilypond

@seealso

Manual de aprendizaje:
@rlearning{Organizing pieces with variables}

Fragmentos de código:
@rlsr{Simultaneous notes}.

