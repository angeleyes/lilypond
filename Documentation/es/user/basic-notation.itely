@c -*- coding: utf-8; mode: texinfo; -*-
@c This file is part of lilypond.tely
@ignore
    Translation of GIT committish: 4d9a81ea05bea52229dd9045b9eceecd64dbe61d

    When revising a translation, copy the HEAD committish of the
    version that you are working on.  See TRANSLATION for details.
@end ignore


@c A menu is needed before every deeper *section nesting of @node's; run
@c     M-x texinfo-all-menus-update
@c to automatically fill in these menus before saving changes

@node Basic notation
@chapter Basic notation

Este capítulo explica cómo usar las funcionalidades de notación básica.

@menu
* Pitches::                     
* Rhythms::                     
* Polyphony::                   
* Staff notation::              
* Connecting notes::            
* Expressive marks::            
* Repeats::                     
@end menu



@node Pitches
@section Pitches

Esta sección trata de cómo especificar la altura de las notas.

@menu
* Normal pitches::              
* Accidentals::                 
* Cautionary accidentals::      
* Micro tones::                 
* Note names in other languages::  
* Relative octaves::            
* Octave check::                
* Transpose::                   
* Rests::                       
* Skips::                       
@end menu


@node Normal pitches
@subsection Normal pitches

@cindex Nombres de las notas
@cindex alturas

El nombre de una nota se especifica usando las letras minúsculas de la @code{a} a la @code{g}.
Una escala ascendente de Do mayor se tipografía con

@lilypond[quote,fragment,verbatim,ragged-right]
\clef bass
c d e f g a b c'
@end lilypond

El nombre de la nota @code{c} se tipografía una octava por debajo del Do central.

@lilypond[quote,fragment,verbatim,ragged-right]
\clef treble
c1
\clef bass
c1
@end lilypond

@funindex '
@funindex ,

La especificación opcional de la octava tiene la forma de una serie de
comillas simples o apóstrofes (@samp{'}) o bien una serie de comas
(@samp{,}).  Cada @samp{'} eleva la altura una octava;
cada @samp{,} baja la altura una octava.

@lilypond[quote,ragged-right,fragment,verbatim]
\clef treble
c' c'' e' g d'' d' d c
\clef bass
c, c,, e, g d,, d, d c
@end lilypond

Se puede usar un método alternativo para declarar en qué octava grabar
una nota; este método no requiere tantas especificaciones de octava
(@code{'} y @code{,}).  Consulte
@ref{Relative octaves}.


@node Accidentals
@subsection Accidentals

@cindex nombres de las notas, holandés
@cindex nombres de las notas, por omisión

Un sostenido se forma añadiendo @code{-is} al final del nombre de la nota y
un bemol se forma añadiendo @code{-es}.  Los dobles sostenidos y dobles bemoles
se obtienen añadiendo @code{-isis} o @code{-eses} al nombre de la nota.

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
a2 ais a aes
a2 aisis a aeses
@end lilypond

@noindent
Estos son los nombres de las notas en holandés.  En holandés, @code{aes} se contrae en
@code{as}, pero las dos formas se aceptan.  De forma similar, se aceptan
tanto @code{es} como @code{ees}

@lilypond[fragment,quote,ragged-right,verbatim,relative=2]
a2 as e es
@end lilypond

Un becuadro cancelará el efecto de una alteración accidental o de la armadura.
Sin embargo, los becuadros no se codifican dentro de la sintaxis del nombre de la nota con un
sufijo; una nota becuadro se muestra como un simple nombre de nota natural

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
a4 aes a2
@end lilypond

La entrada @code{d e f} se interpreta como @q{imprimir un Re natural,
Mi natural y Fa natural}, independientemente de la armadura de la tonalidad.
Para ver más información acerca de la distinción entre
el contenido musical y la presentación de ese contenido, consulte
@ref{Accidentals and key signatures}.

@lilypond[fragment,quote,ragged-right,verbatim,relative]
\key d \major
d e f g
d e fis g
@end lilypond


@commonprop

De acuerdo con las reglas estándar del tipografiado, se imprime un signo de becuadro
antes de un sostenido o un bemol siempre que una alteración anterior tiene que cancelarse.
Para modificar este comportamiento, utilice
@code{\set Staff.extraNatural = ##f}

@lilypond[fragment,quote,ragged-right,verbatim,relative=2]
ceses4 ces cis c
\set Staff.extraNatural = ##f
ceses4 ces cis c
@end lilypond


@seealso

Referencia del programa: @internalsref{LedgerLineSpanner},
@internalsref{NoteHead}.


@node Cautionary accidentals
@subsection Cautionary accidentals

@cindex alteración recordatoria
@cindex alteración de precaución
@cindex alteración con paréntesis
@cindex recordatoria, alteración
@funindex ?
@cindex precaución, alteración de
@cindex paréntesis, alteración con
@funindex !

Normalmente las alteraciones accidentales se imprimen automáticamente, pero también puede
imprimirlas manualmente.  Un alteración recordatoria
se puede forzar añadiendo un signo de admiración @code{!}
después de la altura de la nota.  Una alteración de precaución
(o sea, una alteración entre paréntesis) se puede obtener añadiendo el
signo de interrogación @samp{?} después del nombre de la nota.  Estas alteraciones adicionales
se pueden usar también para producir notas con becuadro.

@lilypond[quote,ragged-right,fragment,verbatim,relative=1]
cis cis cis! cis? c c? c! c
@end lilypond


@seealso

La producción automática de alteraciones accidentales se puede ajustar de muchas formas.
Para ver más información, consulte @ref{Automatic accidentals}.


@node Micro tones
@subsection Micro tones

@cindex cuartos de tono
@cindex semi-bemoles, semi-sostenidos

Los medios bemoles y los medios sostenidos se forman añadiendo @code{-eh} y
@code{-ih}; a continuación presentamos una serie de DOs cada vez más agudos

@lilypond[verbatim,ragged-right,quote,relative=2,fragment]
\set Staff.extraNatural = ##f
ceseh ceh cih cisih
@end lilypond

Los microtonos también se exportan al archivo MIDI.


@refbugs

No existen estándares reconocidos ampliamente para denotar
los bemoles de tres cuartos, de manera que los símbolos de LilyPond
no se ajustan a ningún estándar.


@node Note names in other languages
@subsection Note names in other languages

Existen conjuntos predefinidos de nombres de notas para algunos idiomas
aparte del inglés.  Para usarlos, incluya el archivo de inicio
específico del idioma.  Por ejemplo, añada @code{\include "english.ly"}
al principio del archivo de entrada.  Los archivos de idioma disponibles
y los nombres de las notas que definen son los siguientes:

@c  Should this be made into a multitable?
@cindex idiomas, nombres de las notas en otros
@example
                     Nombres de las notas      sostenido   bemol       doble        doble
                                                                      sostenido     bemol

nederlands.ly  c   d   e   f   g   a   bes b   -is         -es       -isis         -eses
english.ly     c   d   e   f   g   a   bf  b   -s/-sharp   -f/-flat  -ss/-x/       -ff/
                                                                     -sharpsharp   -flatflat
deutsch.ly     c   d   e   f   g   a   b   h   -is         -es       -isis         -eses
norsk.ly       c   d   e   f   g   a   b   h   -iss/-is    -ess/-es  -ississ/-isis -essess/-eses
svenska.ly     c   d   e   f   g   a   b   h   -iss        -ess      -ississ       -essess
italiano.ly    do  re  mi  fa  sol la  sib si  -d          -b        -dd           -bb
catalan.ly     do  re  mi  fa  sol la  sib si  -d/-s       -b        -dd/-ss       -bb
espanol.ly     do  re  mi  fa  sol la  sib si  -s          -b        -ss           -bb
@end example

@noindent
Tenga en cuenta que en holandés, alemán, noruego y sueco, los bemoles
del @samp{La} como por ejemplo @code{aes} y @code{aeses}
se contraen normalmente como @code{as} y @code{ases} (o más frecuentemente
como @code{asas}). Algunas veces se definen sólo estas contracciones
en los archivos de idioma correspondientes (esto también se aplica a los
sufijos para cuartos de tono que se ven más abajo).

@noindent
Algunas músicas utilizan microtonos cuyas alteraciones son fracciones
de un sostenido o bemol @q{normales}.  Los nombres de nota para cuartos
de tono que se definen en los distintos archivos de idioma se encuentran
listados en la tabla siguiente.  Aquí los prefijos @q{semi-} y @q{sesqui-} significan
@q{medio} y @q{uno y medio} respectivamente.  Para el noruego,
sueco, catalán y español no se ha definido aún ningún nombre especial.
@c What about Turkish Maquam music and similar microtonal systems?
@c
@c Note that the term "three-quarter-sharp/-flat" used in lilypond's source code 
@c is actually misleading since the alteration is in fact one and a half
@c of a regular sharp/flat. Whence the naming "sesqui-sharp/-flat" used below.

@example
                    Nombres de las notas       semi-      semi-  sesqui-    sesqui-
                                               sostenido  bemol  sostenido  bemol

nederlands.ly  c   d   e   f   g   a   bes b   -ih       -eh     -isih      -eseh
english.ly     c   d   e   f   g   a   bf  b   -qs       -qf     -tqs       -tqf
deutsch.ly     c   d   e   f   g   a   b   h   -ih       -eh     -isih      -eseh
norsk.ly       c   d   e   f   g   a   b   h   
svenska.ly     c   d   e   f   g   a   b   h   
italiano.ly    do  re  mi  fa  sol la  sib si  -sd       -sb     -dsd       -bsb
catalan.ly     do  re  mi  fa  sol la  sib si  
espanol.ly     do  re  mi  fa  sol la  sib si  
@end example



@node Relative octaves
@subsection Relative octaves

@cindex Relativo
@cindex Relativas, especificación de octavas
@funindex \relative

Las octavas se especifican añadiendo @code{'} y @code{,} a los nombres de las notas.
Cuando copie música existente, es fácil poner por accidente una nota en la octava
equivocada y luego es difícil encontrar dicho error.  La octava relativa
previene estos errores haciendo que éstos tengan consecuencias mucho mayores:
un solo error transporta una octava el resto de la pieza

@example
\relative @var{altura_inicial} @var{expresión_musical}
@end example

@noindent
o bien

@example
\relative @var{expresión_musical}
@end example

@noindent
@code{c'} se usa por defecto si no se define una altura inicial.

La octava de las notas que aparecen dentro de @var{expresión_musical} se calculan como
sigue: si no se usa ninguna marca de cambio de octava, el intervalo básico
entre la nota actual y la anterior se toma siempre como si fuera una cuarta o menos.
Esta distancia se determina independientemente de las alteraciones; un
@code{fisis} (Fa doble sostenido) después de un @code{ceses} (Do doble bemol) se colocará
por encima del @code{ceses}.  En otras palabras, una cuarta doble aumentada se considera
un intervalo menor que una quinta disminuida, incluso aunque la cuarta doble aumentada
tiene siete semitonos mientras que la quinta disminuida sólo tiene seis semitonos.

Las marcas de cambio de octava @code{'} y @code{,} se pueden añadir para
elevar o bajar la altura en una octava más.  Al entrar en el modo relativo,
se puede especificar una altura de inicio absoluta que se comportará como
la nota precedente a la primera nota de la @var{expresión_musical}.  Si no
se especifica ninguna altura inicial, se utilizará el Do central como
comienzo.

Aquí podemos ver el modo relativo en acción:
@lilypond[quote,fragment,ragged-right,verbatim]
\relative c'' {
  b c d c b c bes a
}
@end lilypond

Las marcas de cambio de octava se utilizan para intervalos mayores de la cuarta

@lilypond[quote,ragged-right,fragment,verbatim]
\relative c'' {
  c g c f, c' a, e''
}
@end lilypond

Si el elemento anterior es un acorde, la primera nota del acorde se utiliza para
determinar la primera nota del siguiente acorde

@lilypond[quote,ragged-right,fragment,verbatim]
\relative c' {
  c <c e g>
  <c' e g>
  <c, e' g>
}
@end lilypond

La altura después del @code{\relative} contiene un nombre de nota.

La conversión relativa no afecta a las secciones @code{\transpose},
@code{\chordmode} o @code{\relative} en su argumento.  Para usar
el modo relativo dentro de música transportada, se debe escribir 
un @code{\relative} adicional dentro de @code{\transpose}.


@node Octave check
@subsection Octave check

@cindex Comprobación de octava

Las comprobaciones de octava hacen que los errores de octava sean más
fáciles de corregir: una nota puede venir seguida de @code{=}@var{comillas}
lo que indica cuál debería ser su octava absoluta.  En el siguiente ejemplo,

@example
\relative c'' @{ c='' b=' d,='' @}
@end example

@noindent
la @code{d} generará una advertencia, porque se esperaba un @code{d''}
(a causa de que el intervalo de @code{b'} a @code{d''} es de una tercera solamente),
pero aparece un @code{d'}.  En la salida, la octava se corrige para que sea un @code{d''} y
la siguiente nota se calcula de forma relativa a @code{d''} en lugar de a @code{d'}.

También existe una comprobación de octava que no produce ninguna salida visible. La sintaxis

@example
\octave @var{altura}
@end example

comprueba que @var{altura} (sin las comillas) produce @var{altura} (con
las comillas) en modo @code{\relative} comparado con la nota que se da en el
comando @code{\relative}.  Si no es así, se imprime una advertencia, y la
octava se corrige.  La @var{altura} no se imprime como una nota.

En el ejemplo que aparece a continuación, la primera comprobación
se aprueba sin más problema, porque el @code{e} (en modo @code{relative})
está dentro de una quinta desde @code{a'}.  Sin embargo
la segunda comprobación produce una advertencia porque el @code{e} no está dentro
de una quinta del @code{b'}.  Se imprime el mensaje de advertencia y la octava se ajusta
de modo que las notas siguientes están en la octava correcta
de nuevo.

@example
\relative c' @{
  e
  \octave a'
  \octave b'
@}
@end example


La octava de una nota que sigue a una comprobación de octava
se determina con respecto a la nota que la precede.  En el siguiente fragmento,
la última nota es una @code{a'}, por encima del Do central.  Esto
significa que la comprobación de @code{\octave} se aprueba satisfactoriamente,
así que la comprobación se puede borrar sin que cambie la salida de la pieza.

@lilypond[quote,ragged-right,verbatim,fragment]
\relative c' {
  e
  \octave b
  a
}
@end lilypond


@node Transpose
@subsection Transpose

@cindex Transposición
@cindex Transposición de alturas
@funindex \transpose

Una expresión musical se puede transportar mediante @code{\transpose}.  La
sintaxis es
@example
\transpose @var{desde} @var{hacia} @var{expresión_musical}
@end example

Esto significa que la @var{expresión_musical} se transporta el intervalo
que hay entre las notas @var{desde} y @var{hacia}: cualquier nota con la altura @code{desde}
se cambia por @code{hacia}.

Por ejemplo, tomemos una pieza escrita en la tonalidad de Re mayor.
Si esta pieza es demasiado grave para el ejecutante, se puede transportar
hacia arriba a Mi mayor con
@example
\transpose d e @dots{}
@end example

Suponga una pieza escrita para el violín (que es un instrumento en Do).  Si
esta parte se tiene que tocar con un clarinete en La (para el que un La
se escribe como un Do, y que suena una tercera menor por debajo de lo que
está escrito), el siguiente transporte producirá la particella correcta:

@example
\transpose a c @dots{}
@end example

@code{\transpose} distingue entre notas enarmónicas: tanto
@code{\transpose c cis} como @code{\transpose c des} transportarán un
semitono hacia arriba.  La primera versión imprimirá sostenidos y la
segunda imprimirá bemoles


@lilypond[quote,ragged-right,verbatim]
mus = { \key d \major cis d fis g }
\new Staff {
  \clef "F" \mus
  \clef "G"
  \transpose c g' \mus
  \transpose c f' \mus
}
@end lilypond

@code{\transpose} también se puede usar para introducir notas escritas para un
instrumento transpositor.  Las alturas se introducen normalmente en LilyPond
en Do (o en @q{afinación de concierto}), pero se pueden introducir en otra
tonalidad.  Por ejemplo, al introducir música para una trompeta en Si bemol
que comienza en un Re de concierto, se puede escribir

@example
\transpose c bes @{ e4 @dots{} @}
@end example

Para imprimir esta música en Si bemol de nuevo (o sea, para producir una particella de trompeta
en vez de una partitura para el director en afinación de concierto), puede envolver la música existente
con otro @code{transpose}

@example
\transpose bes c @{ \transpose c bes @{ e4 @dots{} @} @}
@end example


@seealso

Referencia del programa: @internalsref{TransposedMusic}.

Ejemplo: @lsr{scheme,transpose-pitches-with-minimum-accidentals.ly}.


@refbugs

Si quiere usar al mismo tiempo @code{\transpose} y @code{\relative},
debe escribir @code{\transpose} por fuera de @code{\relative}, porque
@code{\relative} no tendrá ningún efecto sobre la música que aparezca dentro de un
@code{\transpose}.


@node Rests
@subsection Rests
@cindex Silencios

@funindex \rest
@funindex r

Los silencios se introducen como notas con el nombre @code{r}

@lilypond[fragment,quote,ragged-right,verbatim]
r1 r2 r4 r8
@end lilypond

Los silencios de un compás centrados en medio del compás,
se deben hacer con silencios multicompás.  Se pueden usar para 
un solo compás así como para muchos compases, y se tratan en
@ref{Multi measure rests}.

Para especificar explícitamente la posición vertical de un silencio, escriba una nota
seguida de @code{\rest}.  Se colocará un silencio en la posición en que debería
aparecer la nota:

@lilypond[fragment,quote,ragged-right,verbatim]
a'4\rest d'4\rest
@end lilypond

@noindent
Esto hace mucho más sencillo el formateo de
la música polifónica,
porque el formateador automático de colisiones de silencios se olvidará de ellos.

@seealso

Referencia del programa: @internalsref{Rest}.


@node Skips
@subsection Skips

@cindex Desplazamiento
@cindex Silencio invisible
@cindex Nota de espaciado
@funindex \skip
@funindex s

Un silencio invisible -- también conocido como @q{skip} (desplazamiento) --
se puede introducir como una nota con el nombre @samp{s} o con @code{\skip @var{duración}}

@lilypond[fragment,quote,ragged-right,verbatim,relative=2]
a4 a4 s4 a4 \skip 1 a4
@end lilypond

La sintaxis de @code{s} sólo está disponible en el modo de notas y en el modo de acordes.
En otras situaciones, por ejemplo, cuando se introduce la letra, debe
usar el comando @code{\skip}

@lilypond[quote,ragged-right,verbatim]
<<
  \relative { a'2 a2 }
  \new Lyrics \lyricmode { \skip 2 bla2 }
>>
@end lilypond

El comando skip es un mero contenedor musical vacío.  No produce
ninguna salida, ni siquiera una salida transparente.

El comando de desplazamiento @code{s} crea un @internalsref{Staff} y una
@internalsref{Voice} cuando es necesario, de forma similar a los comandos de nota y de silencio.
Por ejemplo, el fragmento siguiente produce un pentagrama vacío.

@lilypond[quote,ragged-right,verbatim]
{ s4 }
@end lilypond

El fragmento @code{@{ \skip 4 @} } produciría una página vacía.

@seealso

Referencia del programa: @internalsref{SkipMusic}.



@node Rhythms
@section Rhythms

Esta sección trata los ritmos, duraciones y compases.

@menu
* Durations::                   
* Augmentation dots::           
* Tuplets::                     
* Scaling durations::           
* Bar check::                   
* Barnumber check::             
* Automatic note splitting::    
@end menu


@node Durations
@subsection Durations

@cindex duración
@funindex \longa
@funindex \breve
@funindex \maxima

En los modos de Nota, Acorde y Letra, las duraciones se designan
mediante números y puntos: las duraciones se introducen como sus
valores recíprocos respecto de la redonda.  Por ejemplo, una negra
se escribe usando un @code{4} (puesto que es 1/4 de redonda), mientras
que una blanca se escribe con un @code{2} (por ser 1/2 de redonda).  Para
notas mayores de la redonda se deben usar los comandos @code{\longa} y @code{\breve}

@example
c'\breve
c'1 c'2 c'4 c'8 c'16 c'32 c'64 c'64
r\longa r\breve
r1 r2 r4 r8 r16 r32 r64 r64
@end example

@lilypond[quote]
\score {
\relative c'' {
    a\breve*1/2 \autoBeamOff
    a1 a2 a4 a8 a16 a32 a64 a64
   \bar "empty"
   \break
    r\longa*1/4 r\breve *1/2
    r1 r2 r4 r8 r16 r32 r64 r64
  }
  \layout {
    ragged-right = ##t
    indent=0\mm
    \context {
      \Score
        \remove "Bar_number_engraver"
    }
    \context {
      \Staff
        \remove "Clef_engraver"
        \override StaffSymbol #'transparent = ##t
        \override TimeSignature #'transparent = ##t
        \override BarLine #'transparent = ##t
        \consists "Pitch_squash_engraver"
    }
  }
}
@end lilypond

Si la duración se omite, su valor será el de la duración de la nota
anterior.  Por omisión, el valor de la primera nota es el de una negra.

@lilypond[quote,ragged-right,verbatim,fragment]
{ a a a2 a a4 a a1 a }
@end lilypond


@node Augmentation dots
@subsection Augmentation dots

@funindex .

Para obtener duraciones de notas con puntillo, simplemente escriba un
punto (@samp{.}) después del número.  Las notas con doble puntillo se consiguen de manera similar.

@lilypond[quote,ragged-right,fragment,verbatim]
a'4 b' c''4. b'8 a'4. b'4.. c''8.
@end lilypond

@refcommands

Normalmente los puntillos se desplazan hacia arriba para evitar las
líneas del pentagrama, excepto en situaciones de polifonía.  Se pueden
utilizar los siguientes comandos para forzar manualmente una dirección en particular

@funindex \dotsUp
@code{\dotsUp},
@funindex \dotsDown
@code{\dotsDown},
@funindex \dotsNeutral
@code{\dotsNeutral}.

@seealso

Referencia del programa: @internalsref{Dots} y @internalsref{DotColumn}.


@node Tuplets
@subsection Tuplets

@cindex grupos especiales
@cindex tresillos
@funindex \times

Los grupos especiales se obtienen a partir de una expresión musical
multiplicando todas las duraciones por una fracción:

@example
\times @var{fracción} @var{expresión_musical}
@end example

@noindent
La duración de la @var{expresión _musical} se multiplicará por la
fracción.  El denominador de la fracción se imprimirá sobre las notas,
opcionalmente con un corchete.  El grupo especial más común es el
tresillo, en el que 3 notas tienen el valor de 2, por tanto las notas
duran 2/3 de su valor escrito

@lilypond[quote,ragged-right,fragment,verbatim]
g'4 \times 2/3 {c'4 c' c'} d'4 d'4
@end lilypond

Los grupos pueden anidarse unos dentro de otros, por ejemplo

@lilypond[fragment,ragged-right,verbatim,relative=2]
\override TupletNumber #'text = #tuplet-number::calc-fraction-text
\times 4/6 {
  a4 a
  \times 3/5 { a a a a a }
}
@end lilypond

@refcommands

@funindex \tupletUp
@code{\tupletUp},
@funindex \tupletDown
@code{\tupletDown},
@funindex \tupletNeutral
@code{\tupletNeutral}.


@commonprop

@funindex tupletNumberFormatFunction
@cindex formateo de los grupos especiales

La propiedad @code{tupletSpannerDuration} (duración del selector de
grupo) especifica la duración de cada corchete.  Con esto puede hacer
muchos grupos escribiendo @code{\times} una sola vez, ahorrándose
mucho trabajo de teclado.  En el siguiente ejemplo se muestran dos
tresillos, aunque @code{\times} sólo se ha utilizado una vez

@lilypond[quote,fragment,relative=2,ragged-right,verbatim]
\set tupletSpannerDuration = #(ly:make-moment 1 4)
\times 2/3 { c8 c c c c c }
@end lilypond

@noindent
Para ver más información sobre @code{make-moment}, consulte
@ref{Time administration}.

El formato del número se determina por medio de la propiedad @code{text} en
@code{TupletNumber}.  Por defecto se imprime sólo el denominador, pero si
su valor se establece a la función @code{tuplet-number::calc-fraction-text},
se imprimirá como @var{numerador}:@var{denominador}

Para que no se impriman los números de los grupos, emplee

@lilypond[quote,fragment,relative=2,ragged-right,verbatim]
\times 2/3 { c8 c c } \times 2/3 { c8 c c }
\override TupletNumber #'transparent = ##t
\times 2/3 { c8 c c } \times 2/3 { c8 c c }
@end lilypond

Utilice la función @code{\tweak} para sobreescribir los grupos anidados que comienzan en el mismo
instante musical.  En este ejemplo, @code{\tweak} especifica un texto de fracción
para el
@code{TupletNumber} exterior y un texto de denominador para el @code{TupletNumber}
del primero de los tres grupos interiores.

@lilypond[quote,ragged-right,verbatim]
\new Staff {
  \tweak #'text #tuplet-number::calc-fraction-text
  \times 4/3 {
     \tweak #'text #tuplet-number::calc-denominator-text
     \times 2/3 { c'8[ c'8 c'8] }
     \times 2/3 { c'8[ c'8 c'8] }
     \times 2/3 { c'8[ c'8 c'8] }
  }
}
@end lilypond

Aquí @code{\tweak} y @code{\override} trabajan conjuntamente para especificar la dirección
del @code{TupletBracket} (el corchete del grupo).  El primer @code{\tweak} coloca
el @code{TupletBracket} del grupo 
exterior por encima del pentagrama.  El segundo @code{\tweak} coloca el
@code{TupletBracket} del primero de los tres grupos interiores por debajo del
pentagrama.  Tenga en cuenta que este par de funciones @code{\tweak} afecta solamente
al grupo exterior y al primero de los tres grupos interiores porque sólo
esos dos grupos comienzan en el mismo instante musical.  Utilizamos @code{\override}
de la manera usual para colocar los corchetes @code{TupletBrackets} del
segundo y tercer grupos interiores por debajo del pentagrama.

@lilypond[quote,ragged-right,verbatim]
\new Staff {
  \tweak #'text #tuplet-number::calc-fraction-text
  \tweak #'direction #up
  \times 4/3 {
     \tweak #'direction #down
     \times 2/3 { c'8[ c'8 c'8] }
     \override TupletBracket #'direction = #down
     \times 2/3 { c'8[ c'8 c'8] }
     \times 2/3 { c'8[ c'8 c'8] }
  }
}
@end lilypond

Se puede hacer que los corchetes de grupo abarquen tanto como su duración completa indique o que lleguen hasta justo antes de la nota siguiente

@lilypond[ragged-right]
\new RhythmicStaff {
  \set tupletFullLength = ##t
  \time 4/4
  \times 4/5 {
    c4 c1
  }
  \set tupletFullLengthNote = ##t
  \time 2/4
  \times 2/3 {
    c4 c c 
  }
  \time 3/4
  c4 
}
@end lilypond


@seealso

Referencia del programa: @internalsref{TupletBracket},
@internalsref{TupletNumber} y @internalsref{TimeScaledMusic}.



@node Scaling durations
@subsection Scaling durations

Es posible alterar la duración de las figuras en un factor @var{N/M}
añadiendo @samp{*@var{N/M}} (o @samp{*@var{N}} si @var{M=1}).  Esto no
afectará a la apariencia de las notas o silencios que se producen.  Se
pueden combinar en la forma @samp{*M*N}.

En el siguiente ejemplo las tres primeras notas duran exactamente dos
partes, pero no se imprime ningún corchete de tresillo.

@lilypond[quote,ragged-right,fragment,relative=2,verbatim]
\time 2/4
a4*2/3 gis4*2/3 a4*2/3
a4 a4 a4*2
b16*4 c4
@end lilypond


@seealso

En este manual: @ref{Tuplets}.


@node Bar check
@subsection Bar check

@cindex Compás, comprobación de
@funindex barCheckSynchronize
@funindex |

Las comprobaciones de compás ayudan a detectar errores en las duraciones.  Una comprobación de compás se
escribe usando el símbolo de la barra vertical, @samp{|}.  Cuando se encuentra durante 
la interpretación, debe caer en el límite entre dos compases.  Si no es así,
se muestra una advertencia.  En el siguiente ejemplo, la segunda comprobación
de compás avisará de un error
@example
\time 3/4 c2 e4 | g2 |
@end example

Las comprobaciones de compás también se pueden usar en la letra de las canciones, por ejemplo

@example
\lyricmode @{
  \time 2/4
  Bri -- lla | Bri -- lla 
@}
@end example

Las comprobaciones de compás fallidas tienen su origen en la
introducción incorrecta de las duraciones.  Las duraciones incorrectas
a menudo desbaratan la partitura completamente, sobre todo si la
música es polifónica, por ello el mejor sitio para empezar a corregir
la entrada es hacer un barrido en busca de comprobaciones de compás
fallidas y duraciones incorrectas.

@funindex |
@funindex pipeSymbol

También es posible redefinir el significado de @code{|}.  Se hace
asignando una expresión musical a @code{pipeSymbol},

@lilypond[quote,ragged-right,verbatim]
pipeSymbol = \bar "||"

{ c'2 c' | c'2 c' }
@end lilypond


@node Barnumber check
@subsection Barnumber check

Al copiar piezas musicales grandes puede servir de ayuda comprobar que
el número de compás de LilyPond corresponde al original desde el que está copiando.
Esto se puede comprobar con @code{\barNumberCheck}, por ejemplo

@verbatim
\barNumberCheck #123
@end verbatim

@noindent
imprimirá una advertencia si el @code{currentBarNumber} (número del
compás actual) no es 123 cuando se está procesando.


@node Automatic note splitting
@subsection Automatic note splitting

Las notas largas se pueden convertir automáticamente en notas ligadas.
Se hace mediante la sustitución del @internalsref{Note_heads_engraver}
por el @internalsref{Completion_heads_engraver}.  En los siguientes
ejemplos, las notas que atraviesan la barra de compás se dividen y se unen mediante una ligadura.

@lilypond[quote,fragment,verbatim,relative=1,line-width=12\cm]
\new Voice \with {
  \remove "Note_heads_engraver"
  \consists "Completion_heads_engraver"
} {
  c2. c8 d4 e f g a b c8 c2 b4 a g16 f4 e d c8. c2
}
@end lilypond

Este grabador divide todas las notas largas en la barra de compás e
inserta ligaduras.  Uno de sus usos es depurar partituras complejas:
si los compases no están completos, las ligaduras mostrarán
exactamente cuánto le falta a cada compás.

Si quiere permitir el salto de línea en las barras de compás en las
que @internalsref{Completion_heads_engraver} divide las notas, debe
eliminar también @internalsref{Forbid_line_break_engraver}.


@refbugs

No todas las duraciones (sobre todo las que contienen grupos
especiales) se pueden representar exactamente con notas normales y
puntillos, pero el grabador nunca insertará grupos especiales.

@code{Completion_heads_engraver} afecta sólo a las notas; no divide
silencios.


@seealso

Referencia del programa: @internalsref{Completion_heads_engraver}.


@node Polyphony
@section Polyphony

La polifonía en música hace referencia a tener más de una voz en una
pieza cualquiera de música.  En LilyPond la polifonía hace referencia
a tener más de una voz en el mismo pentagrama.

@menu
* Chords::                      
* Stems::                       
* Basic polyphony::             
* Explicitly instantiating voices::  
* Collision Resolution::        
@end menu


@node Chords
@subsection Chords

@cindex Acordes

Un acorde se forma encerrando un conjunto de notas entre @code{<} y
@code{>}.  Un acorde puede ir seguido de una duración o un conjunto de
articulaciones, como si fueran simples notas.

@lilypond[verbatim,ragged-right,fragment,quote,relative=1]
<c e g>4 <c>8
@end lilypond

Para ver más información sobre los acordes, consulte @ref{Chord names}.


@c  I don't like having this here, but I can't think of
@c  anywhere else to put it.  :(   -gp
@node Stems
@subsection Stems

Cuando se encuentra con una nota, se crea un objeto
@internalsref{Stem} (plica) automáticamente.  Para las redondas y los
silencios, también se crean pero se hacen invisibles.

@refcommands

@funindex \stemUp
@code{\stemUp},
@funindex \stemDown
@code{\stemDown},
@funindex \stemNeutral
@code{\stemNeutral}.


@commonprop

Para modificar la dirección de las plicas en medio de un pentagrama, utilice

@lilypond[quote,ragged-right,fragment,relative=2,verbatim]
a4 b c b
\override Stem #'neutral-direction = #up
a4 b c b
\override Stem #'neutral-direction = #down
a4 b c b
@end lilypond


@node Basic polyphony
@subsection Basic polyphony

@cindex polyphony

La manera más fácil de escribir fragmentos con más de una voz sobre el mismo pentagrama
es introducir cada voz como una secuencia (con @code{@{...@}}), y combinarlas
simultáneamente, separando las voces con @code{\\}

@funindex \\

@lilypond[quote,verbatim,fragment]
\new Staff \relative c' {
  c16 d e f
  <<
    { g4 f e | d2 e2 } \\
    { r8 e4 d c8 ~ | c b16 a b8 g ~ g2 } \\
    { s2. | s4 b4 c2 }
  >>
}
@end lilypond

El separador hace que se produzca un nuevo contexto de @internalsref{Voice}@footnote{Las voces polifónicas
se conocen a veces como @q{capas} en otros programas de edición de partituras.}.
@cindex capas
Llevan los nombres @code{"1"}, @code{"2"}, etc.  En cada
uno de estos contextos, la dirección vertical de las ligaduras, plicas, etc., se establece
de la manera que corresponda.

Todas estas voces están separadas de la voz que contiene las notas
justo por fuera de la construcción @code{<< \\ >>}.  Se debe tener
esto en cuenta cuando haga algún cambio en una voz.  También
significa que las ligaduras de unión y de expresión no pueden salir de (ni
entrar en) una construcción @code{<< \\ >>}.  En cambio las voces
paralelas que están en construcciones @code{<< \\ >>} separadas dentro
del mismo pentagrama, son la misma voz.  Presentamos a continuación el
mismo ejemplo, con cabezas y colores distintos para cada voz.  Dese cuenta de
que el cambio en el estilo de cabezas de nota en la voz principal no
afecta a las que están dentro de la construcción @code{<< \\ >>}.
Asimismo, el cambio a la segunda voz en la primera construcción
@code{<< \\ >>} es efectiva en la segunda @code{<< \\ >>}, y la voz se liga de una construcción a otra.

@cindex cabezas de nota, estilos de

@lilypond[quote,verbatim,fragment]
\new Staff \relative c' {
  \override NoteHead #'style = #'cross
  \override NoteHead #'color = #red
  c16 d e f
  <<
    { g4 f e } \\
    { \override NoteHead #'style = #'triangle
      \override NoteHead #'color = #blue
    r8 e4 d c8 ~ }
  >> |
  <<
    { d2 e2 } \\
    { c8 b16 a b8 g ~ g2 } \\
    { \override NoteHead #'style = #'slash 
      \override NoteHead #'color = #green
      s4 b4 c2 }
  >>
}
@end lilypond

La polifonía no cambia la relación entre las notas que están dentro de
un bloque @code{\relative @{ @}}.  Cada una de las notas se calcula
relativa a la nota inmediatamente anterior.

@example
\relative @{ notaA << notaB \\ notaC >> notaD @}
@end example

@code{notaC} es relativa a @code{notaB}, no a @code{notaA};
@code{notaD} es relativa a @code{notaC}, no a @code{notaB} ni a
@code{notaA}.


@node Explicitly instantiating voices
@subsection Explicitly instantiating voices

Los contextos de @internalsref{Voice} también se pueden instanciar manualmente
dentro de un bloque @code{<< >>} para crear música polifónica, usando
@code{\voiceOne}, hasta @code{\voiceFour} para asignar las direcciones de las plicas
y un desplazamiento horizontal para cada parte.

Concretamente:
@example
<< \superior \\ \inferior >>
@end example

@noindent
equivale a

@example
<<
  \new Voice = "1" @{ \voiceOne \superior @}
  \new Voice = "2" @{ \voiceTwo \inferior @}
>>
@end example

Los comandos @code{\voiceXXX} establecen la dirección de las plicas, ligaduras de expresión y de unión,
articulaciones, anotaciones de texto, puntillos y digitaciones.
@code{\voiceOne} y @code{\voiceThree} hacen
a los mencionados objetos apuntar hacia arriba, mientras que @code{\voiceTwo} y @code{\voiceFour}
los hacen apuntar hacia abajo.
El comando @code{\oneVoice} hace volver a los ajustes normales.

Una expresión que aparece directamente dentro de un @code{<< >>} pertenece a
la voz principal.  Es útil cuando aparecen voces adicionales al tiempo que está cantando la voz
principal.  A continuación podemos ver una representación mejor del ejemplo del apartado anterior.
Las cabezas de color y en forma de cruz demuestran que
la melodía principal ahora está en un contexto de una voz única.

@lilypond[quote,ragged-right,verbatim]
\new Staff \relative c' {
  \override NoteHead #'style = #'cross
  \override NoteHead #'color = #red
  c16 d e f
  \voiceOne
  <<
    { g4 f e | d2 e2 }
    \new Voice="1" { \voiceTwo
      r8 e4 d c8 ~ | c8 b16 a b8 g ~ g2
      \oneVoice
    }
    \new Voice { \voiceThree
      s2. | s4 b4 c2
      \oneVoice
    }
  >>
  \oneVoice
}
@end lilypond

La definición correcta de las voces permite que la melodía se pueda marcar con ligaduras de expresión.
@lilypond[quote,ragged-right,verbatim]
\new Staff \relative c' {
  c16^( d e f
  \voiceOne
  <<
    { g4 f e | d2 e2) }
    \context Voice="1" { \voiceTwo
      r8 e4 d c8 ~ | c8 b16 a b8 g ~ g2
      \oneVoice
    }
    \new Voice { \voiceThree
      s2. s4 b4 c2
      \oneVoice
    }
  >>
  \oneVoice
}
@end lilypond

Al evitar el separador @code{\\} posibilitamos la escritura de
construcciones polifónicas anidadas, lo que en algún caso podría constituir
una forma más natural de tipografiar la música.

@lilypond[quote,ragged-right,verbatim]
\new Staff \relative c' {
  c16^( d e f
  \voiceOne
  <<
    { g4 f e | d2 e2) }
    \context Voice="1" { \voiceTwo
      r8 e4 d c8 ~ |
      <<
        {c8 b16 a b8 g ~ g2}
        \new Voice { \voiceThree
          s4 b4 c2
          \oneVoice
        }
      >>
    \oneVoice
    }
  >>
  \oneVoice
}
@end lilypond

En ciertos casos de música polifónica compleja podría ser necesario
utilizar voces adicionales para evitar colisiones entre las notas.
Las voces adicionales se añaden definiendo un identificador como se muestra a continuación:

@lilypond[quote,verbatim,ragged-right,relative=2]
voiceFive = #(context-spec-music (make-voice-props-set 4) 'Voice)

\relative c''' <<
  { \voiceOne g4 ~  \stemDown g32[ f( es d c b a b64 )g] } \\
  { \voiceThree  b4} \\
  { \voiceFive d,} \\
  { \voiceTwo g,}
>>
@end lilypond


@node Collision Resolution
@subsection Collision Resolution

Normalmente las cabezas de nota con un número de puntillos diferente
no se mezclan en una sola, pero cuando se le da un valor verdadero a
la propiedad @code{merge-differently-dotted} en el objeto @internalsref{NoteCollision}, se juntan en una sola:

@lilypond[quote,verbatim,fragment,ragged-right,relative=2]
\new Voice << {
  g8 g8
  \override Staff.NoteCollision
    #'merge-differently-dotted = ##t
  g8 g8
} \\ { g8.[ f16] g8.[ f16] } >>
@end lilypond

De forma similar puede mezclar cabezas de blanca con corcheas,
ajustando @code{merge-differently-headed}:

@lilypond[quote,ragged-right,fragment,relative=2,verbatim]
\new Voice << {
  c8 c4.
  \override Staff.NoteCollision
    #'merge-differently-headed = ##t
c8 c4. } \\ { c2 c2 } >>
@end lilypond

@noindent
@code{merge-differently-headed} y @code{merge-differently-dotted}
se aplican solamente a direcciones de plica opuestas (es decir, a las voces 1 y 2).

LilyPond también desplaza verticalmente los silencios que están en el lado contrario de una plica,
por ejemplo

@lilypond[quote,ragged-right,fragment,verbatim]
\new Voice << c''4 \\ r4 >>
@end lilypond

Si tres o más notas coinciden verticalmente en la misma columna,
@code{merge-differently-headed} no puede completar satisfactoriamente
la mezcla de las dos notas que deberían mezclarse.
Para hacer posible que la mezcla funcione, aplique un @code{\shift} (desplazamiento) a la nota que no
debe mezclarse.  En el primer compás del ejemplo siguiente,
@code{merge-differently-headed} no funciona (la cabeza de la blanca está rellena)
En el segundo compás, se aplica @code{\shiftOn} para mover horizontalmente el
@code{g} (Sol) superior, y @code{merge-differently-headed}
funciona correctamente.

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
\override Staff.NoteCollision #'merge-differently-headed = ##t
<<
  { d=''2 g2 } \\
  { \oneVoice d=''8 c8 r4 e,8 c'8 r4 } \\
  { \voiceFour e,,2 e'2}
>>
<<
  { d'=''2 \shiftOn g2 } \\ 
  { \oneVoice d=''8 c8 r4 e,8 c'8 r4 } \\
  { \voiceFour e,,2 e'2}
>>
@end lilypond


@refcommands

@funindex \oneVoice
@code{\oneVoice},
@funindex \voiceOne
@code{\voiceOne},
@funindex \voiceTwo
@code{\voiceTwo},
@funindex \voiceThree
@code{\voiceThree},
@funindex \voiceFour
@code{\voiceFour}.

@funindex \shiftOn
@code{\shiftOn},
@funindex \shiftOnn
@code{\shiftOnn},
@funindex \shiftOnnn
@code{\shiftOnnn},
@funindex \shiftOff
@code{\shiftOff}: estos comandos especifican el grado en que
se deben desplazar los acordes de la voz en curso.
Las voces exteriores (normalmente: la voz uno y la voz dos)
tienen @code{\shiftOff} (desplazamiento desactivado), mientras que las voces interiores (tres y cuatro)
tienen @code{\shiftOn} (desplazamiento activado).  @code{\shiftOnn} y @code{\shiftOnnn} definen niveles de desplazamiento
más grandes.

Cuando LilyPond no puede con todo, se pueden usar la propiedad
@code{force-hshift} (forzar desplazamiento) del objeto @internalsref{NoteColumn}
y los silencios con altura para sobreescribir las decisiones de tipografía.

@lilypond[quote,verbatim,ragged-right]
\relative <<
{
  <d g>
  <d g>
} \\ {
  <b f'>
  \once \override NoteColumn #'force-hshift = #1.7
  <b f'>
} >>
@end lilypond


@seealso

Referencia del programa: los objetos responsables de resolver las colisiones son
@internalsref{NoteCollision} y @internalsref{RestCollision}.


@refbugs

Cuando se emplea @code{merge-differently-headed} con una corchea (o una nota más corta)
con la plica hacia arriba, y una blanca con la plica hacia abajo,
la corchea no tiene el desplazamiento correcto.

No están contemplados los racimos (clusters) donde la misma nota se presenta
con diferentes alteraciones accidentales dentro del mismo acorde.  En
este caso se recomienda usar la transcripción enarmónica, o usar la
notación especial de racimos (ver @ref{Clusters}).



@node Staff notation
@section Staff notation

@cindex Notación de los pentagramas

Esta sección describe la notación musical que se produce en el nivel del pentagrama,
como las armaduras de tonalidad, claves e indicaciones de compás.

@menu
* Clef::                        
* Key signature::               
* Time signature::              
* Partial measures::            
* Bar lines::                   
* Unmetered music::             
* System start delimiters::     
* Staff symbol::                
* Writing music in parallel::   
@end menu


@node Clef
@subsection Clef

@funindex \clef

La clave indica qué líneas del pentagrama corresponden a qué
notas.  La clave se establece con el comando @code{\clef} 

@lilypond[quote,ragged-right,fragment,verbatim]
{ c''2 \clef alto g'2 }
@end lilypond

@cindex clave de Sol
@cindex clave de violín
@cindex clave de Do en tercera (clave de viola)
@cindex clave de Do en cuarta (clave de tenor)
@cindex clave de Fa en cuarta (clave de bajo)
@cindex clave de Sol en primera (clave de violín francesa)
@cindex clave de Do en primera (clave de soprano)
@cindex clave de Do en segunda (clave de mezzosoprano)
@cindex clave de Do en quinta (clave de barítono)
@cindex clave de Fa en tercera (clave de varbarítono)
@cindex clave de Fa en quinta (clave de sub-bajo)

Las claves contempladas son

@multitable @columnfractions .33 .66
@headitem Clave @tab Posición
@item @code{treble}, violin, G, G2 @tab
clave de Sol en 2ª
@item @code{alto, C} @tab
clave de Do en 3ª
@item @code{tenor} @tab
clave de Do en 4ª
@item @code{bass, F} @tab
clave de Fa en 4ª
@item @code{french} @tab
clave de Sol en 1ª, conocida también como clave de violín francesa
@item @code{soprano} @tab
clave de Do en 1ª
@item @code{mezzosoprano} @tab
clave de Do en 2ª
@item @code{baritone} @tab
clave de Do en 5ª
@item @code{varbaritone} @tab
clave de Fa en 3ª
@item @code{subbass} @tab
clave de Fa en 5ª
@item @code{percussion} @tab
clave de percusión
@item @code{tab} @tab
clave de tablatura
@end multitable

Al añadir @code{_8} o @code{^8} al nombre de la clave, la clave se transpone
una octava hacia abajo o hacia arriba, respectivamente, y @code{_15} y
@code{^15} la transpone dos octavas.  El argumento @var{nombre_de_clave}
se debe encerrar entre comillas cuando contiene guiones bajos o dígitos.  Por
ejemplo:

@cindex clave de tenor coral
@lilypond[quote,ragged-right,verbatim,fragment,relative=1]
\clef "G_8" c4
@end lilypond


@commonprop

El comando @code{\clef "treble_8"} equivale a establecer
@code{clefGlyph},
@code{clefPosition} (que controla la posición Y de la clave),
@code{middleCPosition} y @code{clefOctavation}.  Se imprime una clave
cuando se cambia cualquiera de estas propiedades.  El siguiente ejemplo muestra
las posibilidades que se ofrecen estableciendo manualmente las propiedades.

@lilypond[quote,ragged-right,verbatim]
{
  \set Staff.clefGlyph = #"clefs.F"
  \set Staff.clefPosition = #2
  c'4
  \set Staff.clefGlyph = #"clefs.G"
  c'4
  \set Staff.clefGlyph = #"clefs.C"
  c'4
  \set Staff.clefOctavation = #7
  c'4
  \set Staff.clefOctavation = #0
  \set Staff.clefPosition = #0
  c'4
  \clef "bass"
  c'4
  \set Staff.middleCPosition = #4
  c'4
}
@end lilypond


@seealso

En el presente manual: @ref{Grace notes}.

Referencia del programa: @internalsref{Clef}.


@node Key signature
@subsection Key signature

@cindex Armadura de la tonalidad
@funindex \key

La armadura indica la tonalidad en que se toca una pieza.  Está
denotada por un conjunto de alteraciones (bemoles o sostenidos) al comienzo del
pentagrama.

El establecimiento o modificación de la armadura se hace con el
comando @code{\key}

@example
@code{\key} @var{nota} @var{tipo}
@end example

@funindex \minor
@funindex \major
@funindex \minor
@funindex \ionian
@funindex \locrian
@funindex \aeolian
@funindex \mixolydian
@funindex \lydian
@funindex \phrygian
@funindex \dorian
@cindex modos eclesiásticos

Aquí, @var{tipo} debe ser @code{\major} o @code{\minor} para obtener
la tonalidad @var{nota}-mayor o @var{nota}-menor, respectivamente.  También puede
usar los nombres estándar de modo (también conocidos como @q{modos eclesiásticos}): @code{\ionian} (jónico),
@code{\locrian} (locrio), @code{\aeolian} (eolio), @code{\mixolydian} (mixolidio), @code{\lydian} (lidio),
@code{\phrygian} (frigio) y @code{\dorian} (dórico).

Este comando establece la propiedad de contexto
@code{Staff.keySignature}.  Se pueden especificar armaduras no estándar
estableciendo esta propiedad directamente.

Las alteraciones accidentales y las armaduras son una frecuente causa de confusión para los nuevos usuarios,
porque las notas sin alteración pueden llevar signos de becuadro en función de la armadura.
Para ver más información, consulte @ref{Accidentals} o @ref{Accidentals and key signatures}.

@lilypond[quote,ragged-right,verbatim,relative=2,fragment]
\key g \major
f1
fis
@end lilypond


@commonprop

Se imprime un símbolo de becuadro para cancelar las alteraciones anteriores.  Se puede
suprimir esto estableciendo la propiedad
@code{Staff.printKeyCancellation}.

@lilypond[quote,fragment,ragged-right,fragment,verbatim,relative=2]
\key d \major
a b cis d
\key g \minor
a bes c d
\set Staff.printKeyCancellation = ##f
\key d \major
a b cis d
\key g \minor
a bes c d
@end lilypond


@seealso

Referencia del programa: @internalsref{KeyCancellation},
@internalsref{KeySignature}.


@node Time signature
@subsection Time signature

@cindex Indicación de compás
@cindex metro, medida
@funindex \time

La indicación de compás indica el metro de la pieza: su patrón regular de
partes fuertes y débiles.  Se denota por una fracción al comienzo del
pentagrama.

La indicación de compás se establece mediante el comando @code{\time}

@lilypond[quote,ragged-right,fragment,verbatim]
\time 2/4 c'2 \time 3/4 c'2.
@end lilypond

@commonprop

Se puede personalizar el símbolo que se imprime mediante la propiedad @code{style}.
Un valor de @code{#'()} produce un estilo de fracción para los compases de 4/4 y
de 2/2,

@lilypond[fragment,quote,ragged-right,verbatim]
\time 4/4 c'1
\time 2/2 c'1
\override Staff.TimeSignature #'style = #'()
\time 4/4 c'1
\time 2/2 c'1
@end lilypond

Existen otras muchas opciones para su presentación.  Para ver más ejemplos, consulte @ref{Ancient time
signatures}.

@code{\time} establece las propiedades @code{timeSignatureFraction},
@code{beatLength} y @code{measureLength} en el contexto @code{Timing},
cuyo nombre alternativo normalmente es @internalsref{Score}.  La
propiedad @code{measureLength} determina el lugar en que se deben insertar las barras de compás
y cómo se generan las barras de corchea automáticas.  La modificación del valor de
@code{timeSignatureFraction} también provoca que se imprima
el símbolo.

Están disponibles más opciones a través de la función de Scheme
@code{set-time-signature}.  En combinación con el grabador
@internalsref{Measure_grouping_engraver} (agrupación de compases), creará signos de
@internalsref{MeasureGrouping}.  Estos signos facilitan la lectura de música moderna
rítmicamente compleja.  En el siguiente ejemplo el compás de 9/8
se subdivide en 2, 2, 2 y 3.  Esto se pasa a
@code{set-time-signature} como un tercer argumento con el valor @code{(2 2 2 3)}

@lilypond[quote,ragged-right,verbatim]
\score {
  \relative c'' {
    #(set-time-signature 9 8 '(2 2 2 3))
    g8[ g] d[ d] g[ g] a8[( bes g]) |
    #(set-time-signature 5 8 '(3 2))
    a4. g4
  }
  \layout {
    \context {
      \Staff
      \consists "Measure_grouping_engraver"
    }
  }
}
@end lilypond


@seealso

Referencia del programa: @internalsref{TimeSignature} y
@internalsref{Timing_translator}.

Ejemplos: @lsr{contemporary,compound-time-signature.ly}.


@refbugs

EL barrado automático no utiliza la agrupación de compases especificada con
@code{set-time-signature}.


@node Partial measures
@subsection Partial measures

@cindex anacrusa
@cindex parte al alzar
@cindex compás parcial
@cindex parcial, compás
@cindex acortar compases
@funindex \partial

Los compases parciales como las anacrusas o partes al alzar se escriben usando la construcción

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
\partial 16*5 c16 cis d dis e | a2. c,4 | b2
@end lilypond

La sintaxis de este comando es la siguiente:

@example
\partial @var{duración}
@end example

donde @code{duración} es el valor rítmico que se se debe añadir antes
del siguiente compás.

Esto se traduce internamente a

@example
\set Timing.measurePosition = -@var{longitud de la duración}
@end example

La propiedad @code{measurePosition} contiene un número racional
que indica qué parte del compás ha transcurrido hasta el momento.
Observe que es un número negativo; @code{\partial 4} se traduce internamente
con el significado de @qq{queda un valor de negra en este compás}.


@refbugs

Este comando no tiene en cuenta las notas de adorno al comienzo
de la música.  Cuando una pieza comienza con notas de adorno en la anacrusa,
el @code{\partial} debe escribirse después de las notas de adorno

@lilypond[verbatim,quote,ragged-right,relative,fragment]
\grace f16
\partial 4
g4
a2 g2
@end lilypond

El uso de @code{\partial} está previsto solamente para el comienzo de una
pieza.  Si se emplea después del comienzo se obtendrán varias advertencias
desagradables.


@node Bar lines
@subsection Bar lines

@cindex Barras de compás
@funindex \bar
@cindex líneas divisorias
@cindex repetición, barras de

Las líneas divisorias delimitan a los compases pero también se pueden usar
para indicar las repeticiones.  Normalmente se insertan de manera automática.
Los saltos de línea solamente pueden producirse sobre las barras de compás.

Se pueden forzar tipos especiales de línea divisoria con 
el comando @code{\bar}

@lilypond[quote,ragged-right,relative=2,fragment,verbatim]
c4 \bar "|:" c4
@end lilypond

Se encuentran disponibles los siguientes tipos de barra:

@lilypondfile[ragged-right,quote]{bar-lines.ly}

Además se puede especificar @code{"||:"}, que equivale a
@code{"|:"} excepto en los saltos de línea, en que produce una doble barra
al final de la línea y una repetición izquierda (de comienzo) al principio de
la línea siguiente.

Para permitir un salto de línea donde no hay ninguna línea divisoria visible,
utilice

@example
\bar ""
@end example

@noindent
De esta manera se insertará una barra invisible de compás y se hará posible
el salto de línea en este punto (sin incrementar el contador de los números de compás).

En las partituras con muchos pentagramas, un comando @code{\bar} en uno de ellos se aplica
automáticamente a todos los demás.  Las líneas resultantes se conectan entre los distintos pentagramas
de un @code{StaffGroup}, @code{PianoStaff} o @code{GrandStaff}.

@lilypond[quote,ragged-right,fragment,verbatim]
<<
  \new StaffGroup <<
    \new Staff {
      e'4 d'
      \bar "||"
      f' e'
    }
    \new Staff { \clef bass c4 g e g }
  >>
  \new Staff { \clef bass c2 c2 }
>>
@end lilypond


@commonprop

@funindex whichBar
@funindex repeatCommands
@funindex defaultBarType

El comando @code{\bar }@var{tipo_de_barra} es una forma corta de hacer
@code{\set Timing.whichBar = }@var{tipo_de_barra}.  Cuando @code{whichBar}
se establece con el valor de una cadena, se crea una línea divisoria de ese tipo.

Una línea divisoria se crea cuando se establece la propiedad @code{whichBar}.
Al comienzo del compás su valor se toma de
@code{Timing.defaultBarType}.  Los contenidos de los @code{repeatCommands} se
utilizan para sobreescribir a las barras de compás por omisión.

Le recomendamos que utilice siempre @code{\repeat} para hacer repeticiones.
Consulte @ref{Repeats}.


@seealso

En este manual: @ref{Repeats}, @ref{System start delimiters}.

Referencia del programa: @internalsref{BarLine} (creada al nivel de
@internalsref{Staff} (pentagrama)), @internalsref{SpanBar} (a través de los pentagramas).


@node Unmetered music
@subsection Unmetered music

@cindex cadencia
@funindex \cadenzaOn
@funindex \cadenzaOff

Las líneas divisorias y los números de compás se calculan automáticamente.
Para música sin compasear (por ejemplo cadencias), esto no es deseable.
Para desactivar las barras y los números de compás automáticos, utilice los comandos
@code{\cadenzaOn} y @code{\cadenzaOff}.

@lilypond[verbatim,quote,ragged-right,relative=2,fragment]
c4 d e d
\cadenzaOn
c4 c d8 d d f4 g4.
\cadenzaOff
\bar "|"
d4 e d c
@end lilypond


@refbugs

LilyPond insertará saltos de línea y de página solamente en las barras de compás.
A menos que la música sin compasear acabe antes del final de la línea del pentagrama,
tendrá que insertar barras
de compás invisibles

@example
\bar ""
@end example

@noindent
para indicar dónde se pueden producir los saltos.


@node System start delimiters
@subsection System start delimiters

@cindex comienzo del sistema
@cindex Pentagramas, varios
@cindex corchete vertical
@cindex llave vertical
@cindex pentagramas de piano
@cindex pentagramas, grupo de
@cindex pauta de coro

Muchas partituras constan de más de un pentagrama.  Estos pentagramas se pueden
unir de cuatro formas distintas:

@itemize @bullet
@item El grupo comienza con una llave a la izquierda y las líneas de compás
están conectadas.  Esto se hace con el contexto @internalsref{GrandStaff}.

@lilypond[verbatim,ragged-right,quote]
\new GrandStaff
\relative <<
  \new Staff { c1 c }
  \new Staff { c c }
>>
@end lilypond

@item El grupo comienza con un corchete recto y las líneas de compás están conectadas.
Esto se hace con el contexto
@internalsref{StaffGroup}

@lilypond[verbatim,ragged-right,quote]
\new StaffGroup
\relative <<
  \new Staff { c1 c }
  \new Staff { c c }
>>
@end lilypond

@item El grupo comienza con un corchete recto pero las líneas de compás no están conectadas.
Esto se hace con el contexto @internalsref{ChoirStaff}.

@lilypond[verbatim,ragged-right,quote]
\new ChoirStaff
\relative <<
  \new Staff { c1 c }
  \new Staff { c c }
>>
@end lilypond

@item El grupo comienza con una línea vertical.  Las líneas de compás
no están conectadas.  Ésta es la opción por defecto para la partitura.

@lilypond[verbatim,ragged-right,quote]
\relative <<
  \new Staff { c1 c }
  \new Staff { c c }
>>
@end lilypond
@end itemize


@seealso

Las barras de compás al principio de cada sistema son
@internalsref{SystemStartBar}, @internalsref{SystemStartBrace} y
@internalsref{SystemStartBracket}.  En cada contexto solamente se
crea uno de estos tipos, y ese tipo está determinado por la propiedad
@code{systemStartDelimiter}.


@commonprop

Los delimitadores del comienzo del sistema se pueden anidar muchas veces:

@lilypond[quote,ragged-right,verbatim]
\new StaffGroup
\relative <<
  \set StaffGroup.systemStartDelimiterHierarchy
    = #'(SystemStartSquare (SystemStartBracket a (SystemStartSquare b)) d)
  \new Staff { c1 }
  \new Staff { c1 }
  \new Staff { c1 }
  \new Staff { c1 }
  \new Staff { c1 }
>>
@end lilypond


@node Staff symbol
@subsection Staff symbol

@cindex ajuste del símbolo del pentagrama

Las notas, signos dinámicos, etc. están agrupados con un conjunto de líneas horizontales
que reciben el nombre de pentagrama o pauta (@q{staff}, en plural @q{staves}).  En
LilyPond, estas líneas se dibujan utilizando un objeto de presentación separado
que se llama el @code{staff symbol} (el símbolo del pentagrama).

El símbolo del pentagrama se puede ajustar en el número, grosor
y separación de las líneas, usando las propiedades.  Esto se demuestra en los archivos de ejemplo
@lsr{staff,changing-the-number-of-lines-in-a-staff.ly} y
@lsr{staff,changing-the-staff-size.ly}.

Además, los pentagramas se pueden iniciar e interrumpir libremente.  Esto se
hace con @code{\startStaff} y @code{\stopStaff}.

@lilypond[verbatim,relative=2,fragment]
b4 b
\override Staff.StaffSymbol #'line-count = 2
\stopStaff \startStaff
b b
\revert Staff.StaffSymbol #'line-count
\stopStaff \startStaff
b b
@end lilypond

En combinación con los pentagramas ocultos o franceses,
esto se puede usar para componer tipográficamente secciones de ossia.  He aquí un ejemplo:

@cindex ossia

@lilypondfile{ossia.ly}

@cindex pentagrama, establecer el número de líneas del
@cindex pentagrama, establecer el grosor de las líneas del
@cindex grosor de las líneas del pentagrama, establecer
@cindex número de líneas del pentagrama, establecer

@seealso

Referencia del programa: @internalsref{StaffSymbol}.

Ejemplos: @lsrdir{staff}


@node Writing music in parallel
@subsection Writing music in parallel

@cindex Escribir música en paralelo
@cindex Música intercalada

La música para varias partes se puede intercalar

@lilypond[quote,fragment,verbatim]
\parallelMusic #'(voiceA voiceB) {
  r8     g'16[ c''] e''[ g' c'' e''] r8     g'16[ c''] e''[ g' c'' e''] |
  c'2                                c'2                                |
  r8     a'16[ d''] f''[ a' d'' f''] r8     a'16[ d''] f''[ a' d'' f''] |
  c'2                                c'2                                |
}
\new StaffGroup <<
  \new Staff \new Voice \voiceA
  \new Staff \new Voice \voiceB
>>
@end lilypond

Esto funciona bastante bien para música de piano

@lilypond[quote,verbatim]
music = {
  \key c \major
  \time 4/4
  \parallelMusic #'(voiceA voiceB voiceC voiceD) {
    % Bar 1
    r8  g'16[ c''] e''[ g' c'' e''] r8  g'16[ c''] e''[ g' c''
e''] |
    c'2                                 c'2 |
    r8  a16[ d'] f'[ a d' f']       r8  a16[ d'] f'[ a d' f'] |
    c2                                  c2 |

    % Bar 2
    a'8 b'      c'' d''    e'' f''    g'' a'' |
    d'4         d'         d'         d' |
    c16 d e f   d e f g    e f g a    f g a b |
    a,4         a,4        a,4        a,4 |

    % Bar 3 ...
  }
}

\score {
  \new PianoStaff <<
    \music
    \new Staff <<
      \voiceA \\
      \voiceB
    >>
    \new Staff {
      \clef bass
      <<
        \voiceC \\
        \voiceD
      >>
    }
  >>
}
@end lilypond


@node Connecting notes
@section Connecting notes

Esta sección trata de la notación que afecta a grupos de notas.

@menu
* Ties::                        
* Slurs::                       
* Phrasing slurs::              
* Laissez vibrer ties::         
* Automatic beams::             
* Manual beams::                
* Grace notes::                 
@end menu


@node Ties
@subsection Ties

@cindex ligadura de unión
@funindex ~

Una ligadura de unión conecta dos notas adyacentes de la misma altura.  La ligadura
en efecto extiende la longitud de una nota.  No deben confundirse las ligaduras de unión con
las ligaduras de expresión, que indican articulación, ni con las ligaduras de fraseo, que indican
el fraseo musical.  Se introduce una ligadura de unión usando el símbolo de la tilde curva @samp{~}

@lilypond[quote,ragged-right,fragment,verbatim]
e' ~ e' <c' e' g'> ~ <c' e' g'>
@end lilypond

Cuando se aplica una ligadura de unión a un acorde, se conectan todas las cabezas de las notas cuyas alturas coinciden.
Si no coincide ningún par de cabezas, no se crea ninguna ligadura.  Los acordes
se pueden ligar parcialmente colocando la ligadura dentro del acorde,

@lilypond[quote,ragged-right,fragment,verbatim,relative=1]
<c~ e g~ b> <c e g b>
@end lilypond

Una ligadura es simplemente una forma de extender la duración de una nota, parecida al
puntillo.  El ejemplo siguiente muestra dos formas de escribir
exactamente el mismo concepto:

@lilypond[quote,fragment,ragged-right]
\time 3/4 c'2. c'2 ~ c'4
@end lilypond

@noindent
Se usan ligaduras de expresión bien cuando la nota atraviesa la barra
de compás o bien cuando no se pueden usar puntillos para denotar el
ritmo.  Cuando se usan ligaduras, las notas de mayor duración se deben alinear con las subdivisiones del compás, como

@lilypond[fragment,quote,ragged-right]
\relative {
  r8 c8 ~ c2 r4 | r8^"not" c2 ~ c8 r4
}
@end lilypond

Si necesita unir muchas notas a través de las líneas divisorias, puede
resultar más fácil utilizar la división automática de notas (vea
@ref{Automatic note splitting}).  Este mecanismo divide las notas
largas de forma automática y las liga a través de las barras de compás.

@funindex \repeatTie

Cuando la segunda vez de una repetición comienza con una nota ligada,
es necesario repetir la ligadura.  Esto se puede conseguir mediante @code{\repeatTie},

@lilypond[fragment,quote,ragged-right,relative=2]
r <c e g>\repeatTie
@end lilypond

@cindex ligaduras de repetición
@cindex corchetes de repetición de primera y segunda vez y ligaduras

@commonprop

A veces se usan ligaduras para escribir arpegios.  En este caso, dos notas ligadas no
necesitan ser consecutivas.  Esto se puede conseguir estableciendo la propiedad @code{tieWaitForNote}
(ligadura - esperar nota) al valor verdadero. La misma funcionalidad puede resultar útil,
por ejemplo, para ligar un trémolo a un acorde.  Por ejemplo,

@lilypond[fragment,verbatim,relative=1,ragged-right,quote]
\set tieWaitForNote = ##t
\grace { c16[~ e~ g]~ } <c, e g>2
\repeat tremolo 8 { c32~ c'~ } <c c,>1
e8~ c~ a~ f~ <e' c a f>2
@end lilypond

Las ligaduras de pueden grabar manualmente modificando la propiedad
@code{tie-configuration}.  El primer número indica la distancia desde
el centro del pentagrama en espacios de pentagrama, y el segundo
número indica la dirección (1 = hacia arriba, -1 = hacia abajo).

@lilypond[fragment,verbatim,relative=1,ragged-right,quote]
<c e g>2~ <c e g> |
\override TieColumn #'tie-configuration =
  #'((0.0 . 1) (-2.0 . 1) (-4.0 . 1))
<c e g>~ <c e g> |
@end lilypond


@refcommands


@funindex \tieUp
@code{\tieUp},
@funindex \tieDown
@code{\tieDown},
@funindex \tieNeutral
@code{\tieNeutral},
@funindex \tieDotted
@code{\tieDotted},
@funindex \tieDashed
@code{\tieDashed},
@funindex \tieSolid
@code{\tieSolid}.


@seealso

En el presente manual: @ref{Automatic note splitting}.

Referencia del programa: @internalsref{Tie}.


@refbugs

Un cambio de pentagrama cuando hay una ligadura activa no producirá una ligadura inclinada.

Los cambios de clave o de octava durante una ligadura de unión no
están bien definidos realmente.  En estos casos puede ser preferible una ligadura de expresión.


@node Slurs
@subsection Slurs

@cindex Ligaduras de expresión

Una ligadura de expresión indica que las notas se deben tocar unidas o
@emph{legato}.  Se escriben utilizando paréntesis

@lilypond[quote,ragged-right,relative=2,fragment,verbatim]
f( g a) a8 b( a4 g2 f4)
<c e>2( <b d>2)
@end lilypond

La dirección de una ligadura de expresión se puede especificar con
@code{\slur@emph{DIRECCIÓN}}, donde @code{@emph{DIRECCIÓN}} es o bien
@code{Up} (arriba), @code{Down} (abajo), o @code{Neutral}
(seleccionada automáticamente).

Sin embargo, hay una forma abreviada muy conveniente para forzar las
direcciones de las ligaduras de expresión.  Escribiendo @code{_} o
@code{^} antes de los paréntesis de apertura, también se establece la dirección.  Por ejemplo,

@lilypond[relative=2,ragged-right,quote,verbatim,fragment]
c4_( c) c^( c)
@end lilypond

Se puede imprimir una sola ligadura cada vez.  Si necesita imprimir
una ligadura larga por encima de varias ligaduras más cortas, consulte @ref{Phrasing slurs}.


@commonprop

Algunos compositores escriben dos ligaduras cuando quieren acordes
legato.  Esto se consigue en LilyPond mediante el establecimiento de @code{doubleSlurs},

@lilypond[verbatim,ragged-right,relative,fragment,quote]
\set doubleSlurs = ##t
<c e>4 ( <d f> <c e> <d f> )
@end lilypond


@refcommands

@funindex \slurUp
@code{\slurUp},
@funindex \slurDown
@code{\slurDown},
@funindex \slurNeutral
@code{\slurNeutral},
@funindex \slurDashed
@code{\slurDashed},
@funindex \slurDotted
@code{\slurDotted},
@funindex \slurSolid
@code{\slurSolid}.

@seealso

Referencia del programa: @seeinternals{Slur}.


@node Phrasing slurs
@subsection Phrasing slurs

@cindex ligaduras de fraseo
@cindex marcas de fraseo

Una ligadura de fraseo (o marca de fraseo) conecta las notas y se
utiliza para indicar una frase musical.  Se escribe usando @code{\(} y
@code{\)} respectivamente

@lilypond[quote,ragged-right,fragment,verbatim,relative=1]
\time 6/4 c'\( d( e) f( e) d\)
@end lilypond

Tipográficamente, la ligadura de fraseo se comporta casi exactamente
igual que una ligadura de expresión normal.  Sin embargo, se tratan
como objetos diferentes.  Una @code{\slurUp} no tendrá ningún efecto sobre una ligadura de fraseo; utilice en su lugar
@code{\phrasingSlurUp}, @code{\phrasingSlurDown}, y
@code{\phrasingSlurNeutral}.

No se pueden tener varias ligaduras de fraseo simultáneas.


@refcommands

@funindex \phrasingSlurUp
@code{\phrasingSlurUp},
@funindex \phrasingSlurDown
@code{\phrasingSlurDown},
@funindex \phrasingSlurNeutral
@code{\phrasingSlurNeutral}.


@seealso

Referencia del programa: @internalsref{PhrasingSlur}.


@node Laissez vibrer ties
@subsection Laissez vibrer ties
@cindex Laissez vibrer
@cindex Ligaduras laissez vibrer

Las ligaduras L.v. (laissez vibrer, dejar vibrar) indican que las
notas no se deben apagar al final.  Se usan en la notación para piano,
arpa y otros instrumentos de cuerda y percusión.  Se pueden introducir escribiendo @code{\laissezVibrer},

@lilypond[fragment,ragged-right,verbatim,relative=1]
<c f g>\laissezVibrer
@end lilypond

@seealso

Referencia del programa:
@internalsref{LaissezVibrerTie}
@internalsref{LaissezVibrerTieColumn}

Archivos de ejemplo:
@lsr{connecting,laissez-vibrer-ties.ly}


@node Automatic beams
@subsection Automatic beams

LilyPond inserta las barras de corchea automáticamente

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
\time 2/4 c8 c c c \time 6/8 c c c c8. c16 c8
@end lilypond

Cuando estas decisiones automáticas no son lo bastante buenas, se
pueden escribir los barrados de forma explícita.  También es posible
definir patrones de barrado que difieran de los ajustes por defecto.
Para ver más detalles, consulte @ref{Setting automatic beam behavior}.

Las notas individuales se pueden marcar con @code{\noBeam} para evitar
que lleven una barra

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
\time 2/4 c8 c\noBeam c c
@end lilypond


@seealso

Referencia del programa: @internalsref{Beam}.


@node Manual beams
@subsection Manual beams

@cindex barras manuales
@funindex ]
@funindex [

En ciertos casos puede ser preciso sobreescribir el algoritmo de
barrado automático.  Por ejemplo, el barrador automático no escribe
barras por encima de los silencios o las líneas divisorias.  Tales
barras se especifican manualmente marcando los puntos de comienzo y final con @code{[} y @code{]}

@lilypond[quote,ragged-right,fragment,relative=1,verbatim]
{
  r4 r8[ g' a r8] r8 g[ | a] r8
}
@end lilypond


@commonprop

@funindex stemLeftBeamCount
@funindex stemRightBeamCount


LilyPond es capaz de determinar automáticamente los patrones de barrado dentro de una barra,
pero a veces este comportamiento automático puede producir resultados extraños;
por ello, se pueden usar las propiedades @code{stemLeftBeamCount} y @code{stemRightBeamCount}
para sobreescribir los valores por defecto.  Si
se establece con un valor una cualquiera de estas propiedades, dicho valor se utilizará una sola vez, y después
se borrará.

@lilypond[quote,ragged-right,fragment,relative=1,verbatim]
{
   f8[ r16
      f g a]
   f8[ r16
   \set stemLeftBeamCount = #1
      f g a]
}
@end lilypond

Se puede establecer la propiedad @code{subdivideBeams} para subdividir
todas las barras de semicorchea y de valores inferiores en las
posiciones de las fracciones o partes, tal y como está definido por parte de la propiedad @code{beatLength}.

@lilypond[fragment,quote,relative=2,verbatim]
c16[ c c c c c c c]
\set subdivideBeams = ##t
c16[ c c c c c c c]
\set Score.beatLength = #(ly:make-moment 1 8)
c16[ c c c c c c c]
@end lilypond
@funindex subdivideBeams

@noindent
Para ver más información sobre @code{make-moment}, consulte
@ref{Time administration}.

Los saltos de línea normalmente están prohibidos cuando las barras
cruzan las líneas divisorias.  Este comportamiento se puede modificar estableciendo @code{breakable}.

@funindex breakable

@cindex barras de corchea y saltos de línea
@cindex barras en ángulo
@cindex ángulo, barras en
@cindex auto-knee-gap

Se insertan automáticamente barras de corchea en ángulo cuando se
detecta un desnivel muy grande entre las cabezas de las notas. 
Este comportamiento se puede ajustar a través del objeto @code{auto-knee-gap}.


@refbugs

Las barras que cruzan pentagramas y reciben un ángulo automático no se
pueden usar conjuntamente con los pentagramas ocultos.  Consulte @ref{Hiding staves}.

@c Is this still true with skyline spacing stuff? -J.Mandereau
Las barras de corchea no evitan las colisiones con los símbolos que
rodean las notas, como los textos y las alteraciones.


@node Grace notes
@subsection Grace notes

@funindex \grace
@cindex ornamentos
@cindex mordentes
@cindex appoggiatura
@cindex acciaccatura

Los mordentes y notas de adorno son ornamentos escritos.  El más común es la
acciaccatura o mordente de una nota, que se debe tocar muy corta.  Se
denota mediante una corchea pequeña, ligada, con un corchete tachado o
atravesado por una barrita.  La appoggiatura es una nota de adorno que
toma una fracción fija de la nota principal, y se denota como una nota
pequeña, ligada, sin tachar.  Ambas se introducen con los comandos
@code{\acciaccatura} y @code{\appoggiatura}, como se muestra en el ejemplo siguiente

@lilypond[quote,ragged-right,relative=2,verbatim,fragment]
b4 \acciaccatura d8 c4 \appoggiatura e8 d4
\acciaccatura { g16[ f] } e4
@end lilypond

Ambas son formas especiales del comando @code{\grace}.  Al anteponer
esta palabra a una expresión musical se crea una nueva expresión, que
se imprime en un tipo más pequeño y no ocupa ningún tiempo lógico en el compás.

@lilypond[quote,ragged-right,relative=2,verbatim,fragment]
c4 \grace c16 c4
\grace { c16[ d16] } c2 c4
@end lilypond

@noindent
Al contrario que @code{\acciaccatura} y @code{\appoggiatura}, el comando
@code{\grace} no inicia una ligadura.

@cindex timing, internal

Internamente, la cuenta del tiempo para las notas de adorno se hace
utilizando un segundo contador, el contador @q{de adorno}.  Cada
instante en el tiempo comprende dos números racionales: uno denota el tiempo
lógico, y el otro denota el tiempo de adorno.  El ejemplo anterior se muestra a continuación con vectores de tiempo

@lilypond[quote,ragged-right]
<<
  \relative c''{
    c4 \grace c16 c4 \grace {
    c16[ d16] } c2 c4
  }
  \new Lyrics \lyricmode {
    \override LyricText #'font-family = #'typewriter

    \markup { (0,0) } 4
    \grace { \markup {
      ( \fraction 1 4 , \fraction -1 16 ) } 16 }
    \markup { (\fraction 1 4 , 0 ) } 4
    \grace {
      \markup { (\fraction 2 4 , \fraction "-1" 8 ) } 16
      \markup { (\fraction 2 4 , \fraction "-1" 16 ) } 16
    }
    \markup { ( \fraction 2 4 , 0 ) }
  }
>>
@end lilypond

La colocación de las notas de adorno se sincroniza entre los distintos
pentagramas.  En el siguiente ejemplo, hay dos semicorcheas de adorno
por cada corchea de adorno

@lilypond[quote,ragged-right,relative=2,verbatim,fragment]
<< \new Staff { e4 \grace { c16[ d e f] } e4 }
   \new Staff { c4 \grace { g8[ b] } c4 } >>
@end lilypond

@funindex \afterGrace

Si quiere acabar una nota con un adorno, use el comando
@code{\afterGrace}.  Toma dos argumentos: la nota principal y las
notas de adorno que siguen a la nota principal.

@lilypond[ragged-right, verbatim,relative=2,fragment]
c1 \afterGrace d1 { c16[ d] } c4
@end lilypond

Esto pondrá las notas de adorno después de un @q{espacio} que dura 3/4
de la longitud de la nota principal.  La fracción 3/4 se puede cambiar
estableciendo @code{afterGraceFraction}, por ejemplo

@example
#(define afterGraceFraction (cons 7 8))
@end example

@noindent
pondrá la nota de adorno a 7/8 de la nota principal.

Se puede conseguir el mismo efecto de forma manual haciendo

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
\new Voice {
  << { d1^\trill_( }
     { s2 \grace { c16[ d] } } >>
  c4)
}
@end lilypond

@noindent
Ajustando la duración de la nota de desplazamiento (aquí es una
blanca), se ajusta el espacio entre la nota principal y la de adorno.

Una expresión musical @code{\grace} introduce ajustes de tipografía especiales,
por ejemplo para producir un tipo más pequeño y para fijar las
direcciones.  Por ello, cuando se introducen trucos para la
presentación, deben ir dentro de la expresión de adorno, por ejemplo:

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
\new Voice {
  \acciaccatura {
    \stemDown
    f16->
    \stemNeutral
  }
  g4
}
@end lilypond

@noindent
Las sobreescrituras (overrides) también se deben deshacer dentro de la expresión de adorno.

La disposición de las expresiones de adorno se pueden cambiar a lo largo
de la música usando la función @code{add-grace-property}.  El
siguiente ejemplo suprime la definición de la dirección de la
@code{Stem} (plica) para este adorno, y así las plicas no siempre apuntan hacia arriba.

@example
\new Staff @{
  #(add-grace-property 'Voice 'Stem 'direction '())
  @dots{}
@}
@end example

@noindent
Otra opción es modificar las variables @code{startGraceMusic},
@code{stopGraceMusic}, @code{startAcciaccaturaMusic},
@code{stopAcciaccaturaMusic}, @code{startAppoggiaturaMusic} y
@code{stopAppoggiaturaMusic}.  Hay más información en el archivo
@file{ly/@/grace@/-init@/.ly}.

@noindent
La barrita que cruza el corchete de las acciaccaturas se puede obtener
en otras situaciones mediante @code{\override Stem  #'stroke-style = #"grace"}.


@commonprop

Se puede forzar que las notas de adorno utilicen espaciado flotante,

@lilypond[relative=2,ragged-right]
<<
  \override Score.SpacingSpanner #'strict-grace-spacing = ##t
  \new Staff {
     c'4
     \afterGrace
     c'4
     { c'16[ c'8 c'16] }
     c'4
  }  
  \new Staff {
     c'16[ c'16 c'16 c'16]
     c'16[ c'16 c'16 c'16]
     c'4
  }
>>
@end lilypond


@seealso

Referencia del programa: @internalsref{GraceMusic}.


@refbugs

Una partitura que comienza con una expresión @code{\grace} requiere una declaración explícita
@code{\new Voice} pues en caso contrario la nota principal y la de adorno
acabarán en pentagramas distintos.

La sincronización de las notas de adorno también puede acarrear sorpresas.  La notación de pentagramas,
como armaduras, líneas divisorias, etc., se sincronizan también.  Ponga cuidado
cuando mezcle pentagramas con adornos y sin adornos, por ejemplo

@lilypond[quote,ragged-right,relative=2,verbatim,fragment]
<< \new Staff { e4 \bar "|:" \grace c16 d4 }
   \new Staff { c4 \bar "|:" d4 } >>
@end lilypond

@noindent
Esto se puede remediar insertando desplazamientos de adorno de las
duraciones correspondientes en los otros pentagramas.  Para el ejemplo anterior

@lilypond[quote,ragged-right,relative=2,verbatim,fragment]
<< \new Staff { e4 \bar "|:" \grace c16 d4 }
   \new Staff { c4 \bar "|:" \grace s16 d4 } >>
@end lilypond

Las secciones de adorno sólo se deben usar dentro de expresiones de
música secuenciales.  No están contemplados el anidado ni la
yuxtaposición de secciones de adorno, y podría producir caídas u otros errores.



@node Expressive marks
@section Expressive marks

Las marcas de expresión ayudan al músico a sacar de la música algo más que
simples notas y ritmos.

@menu
* Articulations::               
* Fingering instructions::      
* Dynamics::                    
* Breath marks::                
* Trills::                      
* Glissando::                   
* Arpeggio::                    
* Falls and doits::             
@end menu


@node Articulations
@subsection Articulations

@cindex Articulaciones
@cindex guiones
@cindex ornamentos

Un amplio abanico de símbolos pueden aparecer encima o debajo de las notas
para indicar distintas características de la ejecución.  Se adjuntan a una
nota escribiendo un guión y el carácter que significa la articulación.
Se muestran a continuación:

@lilypondfile[quote,ragged-right]{script-abbreviations.ly}

Los significados de estas abreviaturas se pueden modificar.  Consulte
@file{ly/@/script@/-init@/.ly} para ver ejemplos.

La indicación se coloca automáticamente, pero la dirección (arriba o abajo)
se puede también forzar.  Como otros fragmentos de código de LilyPond,
@code{_} los situará por debajo del pentagrama, y @code{^} los colocará por encima.

@lilypond[quote,ragged-right,fragment,verbatim]
c''4^^ c''4_^
@end lilypond

Se pueden añadir otros símbolos usando la sintaxis
@var{nota}@code{\}@var{nombre}.  Una vez más, se puede forzar
que aparezcan por encima o por debajo usando @code{^} y @code{_},
por ejemplo

@lilypond[quote,ragged-right,verbatim,fragment,relative=2]
c\fermata c^\fermata c_\fermata
@end lilypond

@cindex acento
@cindex marcato
@cindex staccatissimo
@cindex espressivo
@cindex fermata
@cindex calderón
@cindex apagado
@cindex staccato
@cindex portato
@cindex tenuto
@cindex arco arriba
@cindex arco abajo
@cindex pedal, indicaciones de
@cindex órgano, indicaciones de pedal de
@cindex grupeto circular
@cindex open
@cindex flageolet
@cindex grupeto circular invertido
@cindex trino
@cindex semitrino
@cindex semitrino descendente
@cindex prallprall
@cindex prallmordent
@cindex prall, up
@cindex prall, down
@cindex thumb marking
@cindex segno
@cindex coda
@cindex varcoda

He aquí un cuadro que muestra todas las articulaciones disponibles:

@lilypondfile[ragged-right,quote]{script-chart.ly}


@commonprop

El orden vertical de las articulaciones se controla con la propiedad
@code{script-priority}.  Cuanto más bajo es esta número,
más cerca de la nota se colocará.
En este ejemplo el @internalsref{TextScript} (el símbolo de sostenido) tiene primero la
prioridad más baja, así que se coloca en la parte más baja en el primer ejemplo.
En el segundo, el semitrino (el @internalsref{Script}) tiene la prioridad más baja, por tanto
se coloca en la parte interior.  Cuando dos objetos tienen la misma prioridad, el orden en que
se escriben decide cuál de ellos va primero.

@lilypond[verbatim,relative=3,ragged-right,fragment,quote]
\once \override TextScript #'script-priority = #-100
a4^\prall^\markup { \sharp }

\once \override Script #'script-priority = #-100
a4^\prall^\markup { \sharp }
@end lilypond


@seealso

Referencia del programa: @internalsref{Script}.


@refbugs

Estos signos aparecen en la salida impresa pero no tienen ningún efecto sobre la
representación de MIDI de la música.


@node Fingering instructions
@subsection Fingering instructions

@cindex digitación
@cindex cambio de dedo

Las instrucciones de digitación se pueden introducir usando
@example
@var{nota}-@var{dígito}
@end example
Para los cambios de dedo, utilice marcas de texto.

@lilypond[quote,verbatim,ragged-right,fragment,relative=1]
c4-1 c-2 c-3 c-4
c^\markup { \finger "2 - 3" }
@end lilypond

Puede usar la articulación de pulgar para indicar que una nota se debe tocar con el pulgar
(p.ej. en música de cello)
@lilypond[quote,verbatim,ragged-right,fragment,relative=2]
<a_\thumb a'-3>8 <b_\thumb b'-3>
@end lilypond

Las digitaciones para los acordes también se pueden añadir a las notas individuales del acorde
escribiéndolas después de las alturas
@lilypond[quote,verbatim,ragged-right,fragment,relative=2]
< c-1 e-2 g-3 b-5 >4
@end lilypond


@commonprop

Puede ejercer un mayor control sobre la digitación de los acordes
estableciendo @code{fingeringOrientations}

@lilypond[quote,verbatim,ragged-right,fragment,relative=1]
\set fingeringOrientations = #'(left down)
<c-1 es-2 g-4 bes-5 > 4
\set fingeringOrientations = #'(up right down)
<c-1 es-2 g-4 bes-5 > 4
@end lilypond

Usando esta funcionalidad, también es posible poner instrucciones de digitación muy cerca de las cabezas 
de nota en música monofónica,

@lilypond[verbatim,ragged-right,quote,fragment]
\set fingeringOrientations = #'(right)
<es'-2>4
@end lilypond


@seealso

Referencia del programa: @internalsref{Fingering}.

Ejemplos: @lsr{expressive,fingering-chords.ly}


@node Dynamics
@subsection Dynamics

@cindex Dynamics
@funindex \pppp
@funindex \ppp
@funindex \pp
@funindex \p
@funindex \mp
@funindex \mf
@funindex \f
@funindex \ff
@funindex \fff
@funindex \ffff
@funindex \fp
@funindex \sf
@funindex \sff
@funindex \sp
@funindex \spp
@funindex \sfz
@funindex \rfz

Las marcas dinámicas de matiz absoluto se especifican usando un comando después de una nota:
@code{c4\ff}.  Las marcas dinámicas disponibles son @code{\ppppp},
@code{\pppp}, @code{\ppp},
@code{\pp}, @code{\p}, @code{\mp}, @code{\mf}, @code{\f}, @code{\ff},
@code{\fff}, @code{\ffff}, @code{\fp}, @code{\sf}, @code{\sff},
@code{\sp}, @code{\spp}, @code{\sfz} y @code{\rfz}.

@lilypond[quote,verbatim,ragged-right,fragment,relative=2]
c\ppp c\pp c \p c\mp c\mf c\f c\ff c\fff
c2\fp c\sf c\sff c\sp c\spp c\sfz c\rfz
@end lilypond

@funindex \<
@funindex \>
@funindex \!

Un regulador de crescendo se comienza con @code{\<} y se termina con
@code{\!} o con un matiz absoluto.  Un regulador decrescendo comienza con
@code{\>} y se termina también con @code{\!} o con un matiz dinámico
absoluto.  Se pueden usar @code{\cr} y @code{\decr} en lugar de
@code{\<} y @code{\>}.  A causa de que estas marcas se unen a notas, se deben
usar notas espaciadoras si se necesitan varias marcas durante una nota.

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
c\< c\! d\> e\!
<< f1 { s4 s4\< s4\! \> s4\! } >>
@end lilypond

@noindent
Un regulador comienza normalmente en el borde izquierdo de la nota inicial
y acaba en el borde derecho de la nota final.  Si la nota
final cae sobre el principio de un compás,  el regulador finaliza en la línea divisoria
inmediatamente anterior.  Esto se puede modificar estableciendo la propiedad
@code{hairpinToBarline},

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
\set hairpinToBarline = ##f
c4\< c2. c4\!
@end lilypond

En algunas situaciones, la marca de articulación @code{\espressivo} puede ser
apropiada para indicar un crescendo y decrescendo sobre una nota,

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
c2 b4 a g1\espressivo
@end lilypond

Esto puede dar lugar a reguladores muy cortos.  Utilice @code{minimum-length}
dentro de @internalsref{Voice}.@internalsref{Hairpin} para alargarlos, por
ejemplo

@example
\override Voice.Hairpin #'minimum-length = #5
@end example

@cindex al niente
@cindex niente, al

Los reguladores se pueden imprimir con la punta en círculo (notación
al niente) estableciendo la propiedad @code{circled-tip},

@lilypond[quote,ragged-right,fragment,relative=2,verbatim]
\override Hairpin #'circled-tip = ##t
c2\< c\!
c4\> c\< c2\!
@end lilypond


@cindex crescendo
@cindex decrescendo
@cindex diminuendo

También puede usar texto que diga @emph{cresc.} en vez de reguladores

@lilypond[quote,ragged-right,fragment,relative=2,verbatim]
\setTextCresc
c\< d e f\!
\setHairpinCresc
e\> d c b\!
\setTextDecresc
c\> d e f\!
\setTextDim
e\> d c b\!
@end lilypond

Asimismo puede aportar sus propios textos
@lilypond[quote,ragged-right,fragment,relative=1,verbatim]
\set crescendoText = \markup { \italic "cresc. poco" }
\set crescendoSpanner = #'dashed-line
a'2\< a a a\!\mf
@end lilypond

Para crear nuevas indicaciones dinámicas o texto que se deba alinear
con los matices, consulte @ref{New dynamic marks}.

El posicionamiento vertical de las expresiones dinámicas se gestiona a
través de @internalsref{DynamicLineSpanner}.


@commonprop

Las expresiones dinámicas que suceden en, comienzan sobre, o acaban
en, la misma nota se alinearán verticalmente.  Si quiere asegurar que
las expresiones dinámicas se alinean cuando no suceden sobre la misma
nota, puede aumentar el valor de la propiedad @code{staff-padding}.

@example
\override DynamicLineSpanner #'staff-padding = #4
@end example

También puede utilizar esta propiedad si las expresiones dinámicas
colisionan con otros elementos de la notación.

Los crescendi y decrescendi que acaban sobre la misma nota de una
línea nueva no se imprimen.  Para cambiar este comportamiento, utilice

@example
\override Score.Hairpin #'after-line-breaking = ##t
@end example

Los cambios dinámicos de tipo texto (como @emph{cresc.} y @emph{dim.})
se imprimen con una línea de puntos que muestra su alcance.  Para
evitar que se imprima esta línea, use

@example
\override DynamicTextSpanner #'dash-period = #-1.0
@end example


@refcommands

@funindex \dynamicUp
@code{\dynamicUp},
@funindex \dynamicDown
@code{\dynamicDown},
@funindex \dynamicNeutral
@code{\dynamicNeutral}.


@seealso

Referencia del programa: @internalsref{DynamicText}, @internalsref{Hairpin}.
El posicionamiento vertical de estos símbolos se maneja por medio de
@internalsref{DynamicLineSpanner}.


@node Breath marks
@subsection Breath marks

Las marcas de respiración se introducen usando @code{\breathe}

@lilypond[quote,ragged-right,fragment,relative=1,verbatim]
c'4 \breathe d4
@end lilypond


@commonprop

El glifo de la marca de respiración se puede ajustar por medio de la sobreescritura de la propiedad
@code{text} del objeto de presentación @code{BreathingSign} con cualquier texto de marcado.
Por ejemplo,
@lilypond[quote,ragged-right,fragment,verbatim,relative=1]
c'4
\override BreathingSign #'text
  = #(make-musicglyph-markup "scripts.rvarcomma")
\breathe
d4
@end lilypond

@seealso

Referencia del programa: @internalsref{BreathingSign}.

Ejemplos: @lsr{expressive,breathing-sign.ly}


@node Trills
@subsection Trills

Los trinos cortos se imprimen como una articulación normal; consulte @ref{Articulations}.

Los trinos largos mantenidos se hacen con @code{\startTrillSpan} y
@code{\stopTrillSpan},

@lilypond[verbatim,ragged-right,relative=2,quote,fragment]
\new Voice {
  << { c1 \startTrillSpan }
     { s2. \grace { d16[\stopTrillSpan e] } } >>
  c4 }
@end lilypond

@cindex Trinos con altura

Los trinos que se tienen que ejecutar sobre notas especificadas
explícitamente se pueden tipografiar con el comando @code{pitchedTrill},

@lilypond[ragged-right,verbatim,fragment,relative=1,quote]
\pitchedTrill c4\startTrillSpan fis
f\stopTrillSpan
@end lilypond

@noindent
El primer argumento es la nota principal.  La altura de la segunda se
imprime como una cabeza de nota sin plica entre paréntesis.


@refcommands

@code{\startTrillSpan},
@funindex \startTrillSpan
@code{\stopTrillSpan}.
@funindex \stopTrillSpan


@seealso

Referencia del programa: @internalsref{TrillSpanner}.


@node Glissando
@subsection Glissando

@cindex Glissando
@funindex \glissando

Un glissando es un cambio gradual en la altura.  Se denota por medio
de una línea o una línea ondulada entre dos notas.  Se llama
adjuntando @code{\glissando} a una nota

@lilypond[quote,ragged-right,fragment,relative=2,verbatim]
c2\glissando c'
\override Glissando #'style = #'zigzag
c2\glissando c,
@end lilypond


@commonprop

@lilypond[quote,ragged-right,verbatim]
I = \once \override NoteColumn #'ignore-collision = ##t

\relative <<
  { \oneVoice \stemDown f2 \glissando \stemNeutral a } \\
  { \oneVoice \I c2 \glissando \I d, }
>>
@end lilypond



@seealso

Referencia del programa: @internalsref{Glissando}.

Archivos de ejemplo:
@lsr{expressive,glissando.ly}, @lsr{expressive,line-styles.ly}


@refbugs

La impresión de texto sobre la línea (como @emph{gliss.}) no está contemplada.


@node Arpeggio
@subsection Arpeggio

@cindex Arpeggio
@cindex acorde quebrado
@funindex \arpeggio

Se puede especificar un signo de arpegio (conocido también como acorde quebrado) sobre un
acorde adjuntando un @code{\arpeggio} a un acorde

@lilypond[quote,ragged-right,fragment,relative=1,verbatim]
<c e g c>\arpeggio
@end lilypond

Un corchete recto a la izquierda indica que el intérprete no tiene que
arpegiar el acorde

@lilypond[quote,ragged-right,fragment,relative=1,verbatim]
\arpeggioBracket
<c' e g c>\arpeggio
@end lilypond

La dirección del arpegio se denota a veces mediante la adición de una
punta de flecha a la línea ondulada

@lilypond[quote,ragged-right,fragment,relative=1,verbatim]
\new Voice {
  \arpeggioUp
  <c e g c>\arpeggio
  \arpeggioDown
  <c e g c>\arpeggio
}
@end lilypond


@commonprop

Cuando un arpegio cruza uno o varios pentagramas, puede adjuntar un
arpegio a los acordes en los dos pentagramas y establecer
@internalsref{PianoStaff}.@code{connectArpeggios}

@lilypond[quote,ragged-right,fragment,relative=1,verbatim]
\new PianoStaff <<
  \set PianoStaff.connectArpeggios = ##t
  \new Staff { <c' e g c>\arpeggio }
  \new Staff { \clef bass <c,, e g>\arpeggio }
>>
@end lilypond

@c TODO: cross-voice arpeggio example?
@c such an example is already in LSR -J.Mandereau

@refcommands

@code{\arpeggio},
@funindex \arpeggioUp
@code{\arpeggioUp},
@funindex \arpeggioDown
@code{\arpeggioDown},
@funindex \arpeggioNeutral
@code{\arpeggioNeutral},
@funindex \arpeggioBracket
@code{\arpeggioBracket}.


@seealso

Manual de notación: @ref{Ties}, para escribir arpegios explícitamente.

Referencia del programa: @internalsref{Arpeggio}.


@refbugs

No es posible mezclar arpegios conectados y no conectados en un
@internalsref{PianoStaff} en el mismo instante de tiempo.


@node Falls and doits
@subsection Falls and doits

Se pueden expresar caídas y subidas de tono (falls y doits) añadidas a
las notas mediante el comando @code{\bendAfter},

@lilypond[fragment,ragged-right,relative=2]
\override Score.SpacingSpanner #'shortest-duration-space = #3.0
c4-\bendAfter #+5
c4-\bendAfter #-3
@end lilypond


@node Repeats
@section Repeats

La repetición es un concepto fundamental en música, y existen varios
tipos de notación para las repeticiones.

@menu
* Repeat types::                
* Repeat syntax::               
* Repeats and MIDI::            
* Manual repeat commands::      
* Tremolo repeats::             
* Tremolo subdivisions::        
* Measure repeats::             
@end menu


@node Repeat types
@subsection Repeat types

@cindex repeticiones

Están contemplados los siguientes tipos de repetición

@table @code
@item desplegada
Las música repetida está completamente escrita (e interpretada).  Es
útil cuando se introduce música repetitiva.  Éste es el único tipo de
repetición que se incluye en la salida MIDI.

@item volta (primera y segunda vez)
Las repeticiones no están desarrolladas, pero se imprimen finales
alternativos (volte) de izquierda a derecha con corchetes.  Ésta es la
notación estándar para las repeticiones con alternativas.  Por omisión
no se reproducen en la salida MIDI.


@item trémolo
Hacen barras de trémolo.  Por omisión no se reproducen en la salida MIDI.

@item porcentaje
Hacen repeticiones de compases o parte de ellos.  Tienen un aspecto
semejante a un signo de porcentaje.  Por omisión no se reproducen en
la salida MIDI.  Las repeticiones de porcentaje se deben declarar dentro de un contexto @code{Voice}.

@end table


@node Repeat syntax
@subsection Repeat syntax

@cindex volta
@cindex prima volta
@cindex seconda volta
@funindex \repeat

LilyPond tiene una construcción sintáctica para especificar distintos
tipos de repetición.  La sintaxis es

@example
\repeat @var{variante} @var{número_de_repeticiones} @var{cuerpo_de_la_repetición}
@end example

Si tiene finales alternativos, puede añadir
@funindex \alternative
@example
\alternative @{
  @var{alternativa1}
  @var{alternativa2}
  @var{alternativa3}
  @dots{}
@}
@end example

@noindent
donde cada @var{alternativa} es una expresión musical.  Si no da un
número de alternativas suficiente para todas las repeticiones, se
supondrá que la primera alternativa se interpreta más de una vez.

Las repeticiones estándar se usan de esta forma:

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
c1
\repeat volta 2 { c4 d e f }
\repeat volta 2 { f e d c }
@end lilypond

Con finales alternativos

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
c1
\repeat volta 2 {c4 d e f}
\alternative { {d2 d} {f f,} }
@end lilypond

Se pueden crear repeticiones con anacrusa.

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
\new Staff {
  \partial 4 e |
  \repeat volta 4 { c2 d2 | e2 f2 | }
  \alternative { { g4 g g e } { a a a a | b2. } }
}
@end lilypond

@noindent
o bien

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
\new Staff {
  \partial 4 
  \repeat volta 4 { e | c2 d2 | e2 f2 | }
  \alternative { { \partial 4*3 g4 g g } { a a a a | b2. } }
}
@end lilypond



@funindex \repeatTie

Se pueden añadir ligaduras de unión al segundo final,

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
c1
\repeat volta 2 {c4 d e f ~ }
\alternative { {f2 d} {f\repeatTie f,} }
@end lilypond

Es posible acortar los corchetes de primera y segunda vez
estableciendo @code{voltaSpannerDuration}.  En el ejemplo siguiente, el
corchete sólo dura un compás, lo que supone una duración de 3/4.

@lilypond[verbatim,ragged-right,quote]
\relative c''{
  \time 3/4
  c c c
  \set Score.voltaSpannerDuration = #(ly:make-moment 3 4)
  \repeat volta 5 { d d d }
  \alternative { { e e e f f f }
  { g g g } }
}
@end lilypond

Si quiere comenzar una repetición al principio de una línea y tiene una
doble barra al final de la línea anterior, utilice
@example
@dots{} \bar "||:" \break 
\repeat volta 2 @{ @dots{} 
@end example
consulte @ref{Bar lines} para ver más información.

@seealso

Referencia del programa: @internalsref{VoltaBracket},
@internalsref{RepeatedMusic},
@internalsref{VoltaRepeatedMusic} y
@internalsref{UnfoldedRepeatedMusic}.

Ejemplos:

Normalmente los corchetes para la repetición sólo se imprimen sobre el
pentagrama superior.  Esto se puede ajustar moviendo @code{Volta_engraver} al contexto
Staff donde quiera que aparezcan los corchetes;
consulte @ref{Modifying context plug-ins} y

@lsr{repeats,volta@/-multi@/-staff@/.ly}.


@refbugs

@cindex repetición ambigua

Una repetición anidada como

@example
\repeat @dots{}
\repeat @dots{}
\alternative
@end example

@noindent
es ambigua porque no está claro a qué @code{\repeat} pertenece la
@code{\alternative}.  Esta ambigüedad se resuelve haciendo que la
@code{\alternative} pertenezca siempre a la @code{\repeat} más
interna.  Para más claridad, se recomienda usar llaves en tales situaciones.

La información del contador de tiempo no se recuerda al comienzo de una alternativa,
por ello después de una repetición la información de la cuenta de tiempo se debe reajustar
manualmente; por ejemplo, estableciendo el valor de @code{Score.measurePosition} o
introduciendo @code{\partial}.  De forma similar, las ligaduras de expresión o de unión tampoco se repiten.

Los corchetes de primera y segunda vez no se alinean verticalmente.


@node Repeats and MIDI
@subsection Repeats and MIDI

@cindex expansión de repeticiones
@funindex \unfoldRepeats

Con un poco de trucaje, todos los tipos de repeticiones pueden estar
presentes en la salida MIDI.  Se consigue por medio de la aplicación
de la función musical @code{\unfoldRepeats}.  Esta función transforma
todas las repeticiones en repeticiones desarrolladas o desplegadas.

@lilypond[quote,verbatim,fragment,line-width=8.0\cm]
\unfoldRepeats {
  \repeat tremolo 8 {c'32 e' }
  \repeat percent 2 { c''8 d'' }
  \repeat volta 2 {c'4 d' e' f'}
  \alternative {
    { g' a' a' g' }
    {f' e' d' c' }
  }
}
\bar "|."
@end lilypond

Cuando se elabora un archivo de partitura que utiliza @code{\unfoldRepeats} para el MIDI,
es necesario hacer dos bloques @code{\score}: uno para el MIDI (con las repeticiones desplegadas)
y otro para la notación (con primera y segunda vez, trémolo y repeticiones de porcentaje).
Por ejemplo,

@example
\score @{
  @var{..música..}
  \layout @{ .. @}
@}
\score @{
  \unfoldRepeats @var{..música..}
  \midi @{ .. @}
@}
@end example


@node Manual repeat commands
@subsection Manual repeat commands

@funindex repeatCommands

Se puede usar la propiedad @code{repeatCommands} para controlar la
disposición de las repeticiones.  Su valor es una lista de Scheme de comandos de repetición.

@table @asis
@item @code{start-repeat}
Imprimir una barra de compás @code{|:}

@item @code{end-repeat}
Imprimir una barra de compás @code{:|}

@item @code{(volta @var{texto})}
Imprimir un corchete de volta que diga @var{texto}: El texto se puede
especificar como una cadena de texto o como un texto de marcado,
consulte @ref{Text markup}.  No olvide cambiar la fuente tipográfica,
porque el tipo por defecto para los números no contiene caracteres alfabéticos;

@item @code{(volta #f)}
Detener un corchete de volta mantenido.
@end table

@lilypond[quote,ragged-right,verbatim,fragment,relative=2]
c4
  \set Score.repeatCommands = #'((volta "93") end-repeat)
c4 c4
  \set Score.repeatCommands = #'((volta #f))
c4 c4
@end lilypond


@seealso

Referencia del programa: @internalsref{VoltaBracket},
@internalsref{RepeatedMusic},
@internalsref{VoltaRepeatedMusic} y
@internalsref{UnfoldedRepeatedMusic}.


@node Tremolo repeats
@subsection Tremolo repeats

@cindex barras de trémolo

Para colocar marcas de trémolo entre las notas, use @code{\repeat} con el
estilo tremolo
@lilypond[quote,verbatim,ragged-right]
\new Voice \relative c' {
  \repeat tremolo 8 { c16 d16 }
  \repeat tremolo 4 { c16 d16 }
  \repeat tremolo 2 { c16 d16 }
}
@end lilypond

Las marcas de trémolo también se pueden poner sobre una nota única.  En este caso, la
nota no debe estar encerrada entre llaves.
@lilypond[quote,verbatim,ragged-right]
\repeat tremolo 4 c'16
@end lilypond

Se obtiene una salida similar usando la subdivisión del trémolo, que se describe en
@ref{Tremolo subdivisions}.


@seealso

En el presente manual: @ref{Tremolo subdivisions}, @ref{Repeats}.

Referencia del programa: @internalsref{Beam}, @internalsref{StemTremolo}.


@node Tremolo subdivisions
@subsection Tremolo subdivisions

@cindex marcas de trémolo
@funindex tremoloFlags

Las marcas de trémolo se pueden imprimir sobre una nota única escribiendo
@q{@code{:}[@var{número}]} después de la nota.  El número indica la
duración de la subdivisión, y debe ser al menos 8.  Un valor de
@var{longitud} de 8 produce una línea tachando la plica de la nota.  Si se
omite la longitud,
se utiliza el último valor (almacenado en @code{tremoloFlags})

@lilypond[quote,ragged-right,verbatim,fragment]
c'2:8 c':32 | c': c': |
@end lilypond


@refbugs

Los trémolos escritos de esta forma no se trasladan a la salida MIDI.


@seealso

En el presente manual: @ref{Tremolo repeats}.

En otros lugares: @internalsref{StemTremolo}.


@node Measure repeats
@subsection Measure repeats

@cindex porcentaje, repeticiones de
@cindex compás, repeticiones de

En el estilo @code{percent} (porcentaje), se puede hacer que se repita un patrón de notas.  Se
imprime una sola vez, y luego el patrón se sustituye con un símbolo especial.
Los patrones de uno y dos compases se sustituyen por símbolos parecidos a un porcentaje,
y los patrones que dividen a la duración de un compás se sustituyen por barras inclinadas.
Las repeticiones de porcentaje se deben declarar dentro de un contexto @code{Voice}.

@lilypond[quote,verbatim,ragged-right]
\new Voice \relative c' {
  \repeat percent 4 { c4 }
  \repeat percent 2 { c2 es2 f4 fis4 g4 c4 }
}
@end lilypond

Las repeticiones de compás de más de 2 compases llevan un contador, si
se activa la propiedad @code{countPercentRepeats},

@lilypond[relative=2,fragment,quote,verbatim,ragged-right]
\new Voice {
\set countPercentRepeats = ##t
  \repeat percent 4 { c1 }
}
@end lilypond



También se pueden imprimir porcentajes aislados.  Esto se hace
mediante la colocación de un silencio multicompás con una función de impresión distinta,

@lilypond[fragment,verbatim,quote]
\override MultiMeasureRest #'stencil
  = #ly:multi-measure-rest::percent
R1
@end lilypond




@seealso

Referencia del programa: @internalsref{RepeatSlash},
@internalsref{PercentRepeat}, @internalsref{DoublePercentRepeat},
@internalsref{DoublePercentRepeatCounter},
@internalsref{PercentRepeatCounter},
@internalsref{PercentRepeatedMusic}.



