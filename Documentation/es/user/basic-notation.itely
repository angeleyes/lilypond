@c -*- coding: utf-8; mode: texinfo; -*-
@c This file is part of lilypond.tely
@ignore
    Translation of GIT committish: 4d9a81ea05bea52229dd9045b9eceecd64dbe61d

    When revising a translation, copy the HEAD committish of the
    version that you are working on.  See TRANSLATION for details.
@end ignore


@c A menu is needed before every deeper *section nesting of @node's; run
@c     M-x texinfo-all-menus-update
@c to automatically fill in these menus before saving changes

@node Basic notation
@chapter Basic notation

Este capítulo explica cómo usar las funcionalidades de notación básica.

@menu
* Pitches::                     
* Rhythms::                     
* Polyphony::                   
* Staff notation::              
* Connecting notes::            
* Expressive marks::            
* Repeats::                     
@end menu



@node Pitches
@section Pitches

Esta sección trata de cómo especificar la altura de las notas.

@menu
* Normal pitches::              
* Accidentals::                 
* Cautionary accidentals::      
* Micro tones::                 
* Note names in other languages::  
* Relative octaves::            
* Octave check::                
* Transpose::                   
* Rests::                       
* Skips::                       
@end menu


@node Rhythms
@section Rhythms

Esta sección trata los ritmos, duraciones y compases.

@menu
* Durations::                   
* Augmentation dots::           
* Tuplets::                     
* Scaling durations::           
* Bar check::                   
* Barnumber check::             
* Automatic note splitting::    
@end menu


@node Polyphony
@section Polyphony

La polifonía en música hace referencia a tener más de una voz en una
pieza cualquiera de música.  En LilyPond la polifonía hace referencia
a tener más de una voz en el mismo pentagrama.

@menu
* Chords::                      
* Stems::                       
* Basic polyphony::             
* Explicitly instantiating voices::  
* Collision Resolution::        
@end menu


@node Chords
@subsection Chords

@cindex Acordes

Un acorde se forma encerrando un conjunto de notas entre @code{<} y
@code{>}.  Un acorde puede ir seguido de una duración o un conjunto de
articulaciones, como si fueran simples notas.

@lilypond[verbatim,ragged-right,fragment,quote,relative=1]
<c e g>4 <c>8
@end lilypond

Para ver más información sobre los acordes, consulte @ref{Chord names}.


@c  I don't like having this here, but I can't think of
@c  anywhere else to put it.  :(   -gp
@node Stems
@subsection Stems

Cuando se encuentra con una nota, se crea un objeto
@internalsref{Stem} (plica) automáticamente.  Para las redondas y los
silencios, también se crean pero se hacen invisibles.

@refcommands

@funindex \stemUp
@code{\stemUp},
@funindex \stemDown
@code{\stemDown},
@funindex \stemNeutral
@code{\stemNeutral}.


@commonprop

Para modificar la dirección de las plicas en medio de un pentagrama, utilice

@lilypond[quote,ragged-right,fragment,relative=2,verbatim]
a4 b c b
\override Stem #'neutral-direction = #up
a4 b c b
\override Stem #'neutral-direction = #down
a4 b c b
@end lilypond


@node Basic polyphony
@subsection Basic polyphony

@cindex polyphony

La manera más fácil de escribir fragmentos con más de una voz sobre el mismo pentagrama
es introducir cada voz como una secuencia (con @code{@{...@}}), y combinarlas
simultáneamente, separando las voces con @code{\\}

@funindex \\

@lilypond[quote,verbatim,fragment]
\new Staff \relative c' {
  c16 d e f
  <<
    { g4 f e | d2 e2 } \\
    { r8 e4 d c8 ~ | c b16 a b8 g ~ g2 } \\
    { s2. | s4 b4 c2 }
  >>
}
@end lilypond

El separador hace que se produzca un nuevo contexto de @internalsref{Voice}@footnote{Las voces polifónicas
se conocen a veces como @q{capas} en otros programas de edición de partituras.}.
@cindex capas
Llevan los nombres @code{"1"}, @code{"2"}, etc.  En cada
uno de estos contextos, la dirección vertical de las ligaduras, plicas, etc., se establece
de la manera que corresponda.

Todas estas voces están separadas de la voz que contiene las notas
justo por fuera de la construcción @code{<< \\ >>}.  Se debe tener
esto en cuenta cuando haga algún cambio en una voz.  También
significa que las ligaduras de unión y de expresión no pueden salir de (ni
entrar en) una construcción @code{<< \\ >>}.  En cambio las voces
paralelas que están en construcciones @code{<< \\ >>} separadas dentro
del mismo pentagrama, son la misma voz.  Presentamos a continuación el
mismo ejemplo, con cabezas y colores distintos para cada voz.  Dese cuenta de
que el cambio en el estilo de cabezas de nota en la voz principal no
afecta a las que están dentro de la construcción @code{<< \\ >>}.
Asimismo, el cambio a la segunda voz en la primera construcción
@code{<< \\ >>} es efectiva en la segunda @code{<< \\ >>}, y la voz se liga de una construcción a otra.

@cindex cabezas de nota, estilos de

@lilypond[quote,verbatim,fragment]
\new Staff \relative c' {
  \override NoteHead #'style = #'cross
  \override NoteHead #'color = #red
  c16 d e f
  <<
    { g4 f e } \\
    { \override NoteHead #'style = #'triangle
      \override NoteHead #'color = #blue
    r8 e4 d c8 ~ }
  >> |
  <<
    { d2 e2 } \\
    { c8 b16 a b8 g ~ g2 } \\
    { \override NoteHead #'style = #'slash 
      \override NoteHead #'color = #green
      s4 b4 c2 }
  >>
}
@end lilypond

La polifonía no cambia la relación entre las notas que están dentro de
un bloque @code{\relative @{ @}}.  Cada una de las notas se calcula
relativa a la nota inmediatamente anterior.

@example
\relative @{ notaA << notaB \\ notaC >> notaD @}
@end example

@code{notaC} es relativa a @code{notaB}, no a @code{notaA};
@code{notaD} es relativa a @code{notaC}, no a @code{notaB} ni a
@code{notaA}.


@node Explicitly instantiating voices
@subsection Explicitly instantiating voices

Los contextos de @internalsref{Voice} también se pueden instanciar manualmente
dentro de un bloque @code{<< >>} para crear música polifónica, usando
@code{\voiceOne}, hasta @code{\voiceFour} para asignar las direcciones de las plicas
y un desplazamiento horizontal para cada parte.

Concretamente:
@example
<< \superior \\ \inferior >>
@end example

@noindent
equivale a

@example
<<
  \new Voice = "1" @{ \voiceOne \superior @}
  \new Voice = "2" @{ \voiceTwo \inferior @}
>>
@end example

Los comandos @code{\voiceXXX} establecen la dirección de las plicas, ligaduras de expresión y de unión,
articulaciones, anotaciones de texto, puntillos y digitaciones.
@code{\voiceOne} y @code{\voiceThree} hacen
a los mencionados objetos apuntar hacia arriba, mientras que @code{\voiceTwo} y @code{\voiceFour}
los hacen apuntar hacia abajo.
El comando @code{\oneVoice} hace volver a los ajustes normales.

Una expresión que aparece directamente dentro de un @code{<< >>} pertenece a
la voz principal.  Es útil cuando aparecen voces adicionales al tiempo que está cantando la voz
principal.  A continuación podemos ver una representación mejor del ejemplo del apartado anterior.
Las cabezas de color y en forma de cruz demuestran que
la melodía principal ahora está en un contexto de una voz única.

@lilypond[quote,ragged-right,verbatim]
\new Staff \relative c' {
  \override NoteHead #'style = #'cross
  \override NoteHead #'color = #red
  c16 d e f
  \voiceOne
  <<
    { g4 f e | d2 e2 }
    \new Voice="1" { \voiceTwo
      r8 e4 d c8 ~ | c8 b16 a b8 g ~ g2
      \oneVoice
    }
    \new Voice { \voiceThree
      s2. | s4 b4 c2
      \oneVoice
    }
  >>
  \oneVoice
}
@end lilypond

La definición correcta de las voces permite que la melodía se pueda marcar con ligaduras de expresión.
@lilypond[quote,ragged-right,verbatim]
\new Staff \relative c' {
  c16^( d e f
  \voiceOne
  <<
    { g4 f e | d2 e2) }
    \context Voice="1" { \voiceTwo
      r8 e4 d c8 ~ | c8 b16 a b8 g ~ g2
      \oneVoice
    }
    \new Voice { \voiceThree
      s2. s4 b4 c2
      \oneVoice
    }
  >>
  \oneVoice
}
@end lilypond

Al evitar el separador @code{\\} posibilitamos la escritura de
construcciones polifónicas anidadas, lo que en algún caso podría constituir
una forma más natural de tipografiar la música.

@lilypond[quote,ragged-right,verbatim]
\new Staff \relative c' {
  c16^( d e f
  \voiceOne
  <<
    { g4 f e | d2 e2) }
    \context Voice="1" { \voiceTwo
      r8 e4 d c8 ~ |
      <<
        {c8 b16 a b8 g ~ g2}
        \new Voice { \voiceThree
          s4 b4 c2
          \oneVoice
        }
      >>
    \oneVoice
    }
  >>
  \oneVoice
}
@end lilypond

En ciertos casos de música polifónica compleja podría ser necesario
utilizar voces adicionales para evitar colisiones entre las notas.
Las voces adicionales se añaden definiendo un identificador como se muestra a continuación:

@lilypond[quote,verbatim,ragged-right,relative=2]
voiceFive = #(context-spec-music (make-voice-props-set 4) 'Voice)

\relative c''' <<
  { \voiceOne g4 ~  \stemDown g32[ f( es d c b a b64 )g] } \\
  { \voiceThree  b4} \\
  { \voiceFive d,} \\
  { \voiceTwo g,}
>>
@end lilypond


@node Collision Resolution
@subsection Collision Resolution

Normalmente las cabezas de nota con un número de puntillos diferente
no se mezclan en una sola, pero cuando se le da un valor verdadero a
la propiedad @code{merge-differently-dotted} en el objeto @internalsref{NoteCollision}, se juntan en una sola:

@lilypond[quote,verbatim,fragment,ragged-right,relative=2]
\new Voice << {
  g8 g8
  \override Staff.NoteCollision
    #'merge-differently-dotted = ##t
  g8 g8
} \\ { g8.[ f16] g8.[ f16] } >>
@end lilypond

De forma similar puede mezclar cabezas de blanca con corcheas,
ajustando @code{merge-differently-headed}:

@lilypond[quote,ragged-right,fragment,relative=2,verbatim]
\new Voice << {
  c8 c4.
  \override Staff.NoteCollision
    #'merge-differently-headed = ##t
c8 c4. } \\ { c2 c2 } >>
@end lilypond

@noindent
@code{merge-differently-headed} y @code{merge-differently-dotted}
se aplican solamente a direcciones de plica opuestas (es decir, a las voces 1 y 2).

LilyPond también desplaza verticalmente los silencios que están en el lado contrario de una plica,
por ejemplo

@lilypond[quote,ragged-right,fragment,verbatim]
\new Voice << c''4 \\ r4 >>
@end lilypond

Si tres o más notas coinciden verticalmente en la misma columna,
@code{merge-differently-headed} no puede completar satisfactoriamente
la mezcla de las dos notas que deberían mezclarse.
Para hacer posible que la mezcla funcione, aplique un @code{\shift} (desplazamiento) a la nota que no
debe mezclarse.  En el primer compás del ejemplo siguiente,
@code{merge-differently-headed} no funciona (la cabeza de la blanca está rellena)
En el segundo compás, se aplica @code{\shiftOn} para mover horizontalmente el
@code{g} (Sol) superior, y @code{merge-differently-headed}
funciona correctamente.

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
\override Staff.NoteCollision #'merge-differently-headed = ##t
<<
  { d=''2 g2 } \\
  { \oneVoice d=''8 c8 r4 e,8 c'8 r4 } \\
  { \voiceFour e,,2 e'2}
>>
<<
  { d'=''2 \shiftOn g2 } \\ 
  { \oneVoice d=''8 c8 r4 e,8 c'8 r4 } \\
  { \voiceFour e,,2 e'2}
>>
@end lilypond


@refcommands

@funindex \oneVoice
@code{\oneVoice},
@funindex \voiceOne
@code{\voiceOne},
@funindex \voiceTwo
@code{\voiceTwo},
@funindex \voiceThree
@code{\voiceThree},
@funindex \voiceFour
@code{\voiceFour}.

@funindex \shiftOn
@code{\shiftOn},
@funindex \shiftOnn
@code{\shiftOnn},
@funindex \shiftOnnn
@code{\shiftOnnn},
@funindex \shiftOff
@code{\shiftOff}: estos comandos especifican el grado en que
se deben desplazar los acordes de la voz en curso.
Las voces exteriores (normalmente: la voz uno y la voz dos)
tienen @code{\shiftOff} (desplazamiento desactivado), mientras que las voces interiores (tres y cuatro)
tienen @code{\shiftOn} (desplazamiento activado).  @code{\shiftOnn} y @code{\shiftOnnn} definen niveles de desplazamiento
más grandes.

Cuando LilyPond no puede con todo, se pueden usar la propiedad
@code{force-hshift} (forzar desplazamiento) del objeto @internalsref{NoteColumn}
y los silencios con altura para sobreescribir las decisiones de tipografía.

@lilypond[quote,verbatim,ragged-right]
\relative <<
{
  <d g>
  <d g>
} \\ {
  <b f'>
  \once \override NoteColumn #'force-hshift = #1.7
  <b f'>
} >>
@end lilypond


@seealso

Referencia del programa: los objetos responsables de resolver las colisiones son
@internalsref{NoteCollision} y @internalsref{RestCollision}.


@refbugs

Cuando se emplea @code{merge-differently-headed} con una corchea (o una nota más corta)
con la plica hacia arriba, y una blanca con la plica hacia abajo,
la corchea no tiene el desplazamiento correcto.

No están contemplados los racimos (clusters) donde la misma nota se presenta
con diferentes alteraciones accidentales dentro del mismo acorde.  En
este caso se recomienda usar la transcripción enarmónica, o usar la
notación especial de racimos (ver @ref{Clusters}).



@node Staff notation
@section Staff notation

@cindex Notación de los pentagramas

Esta sección describe la notación musical que se produce en el nivel del pentagrama,
como las armaduras de tonalidad, claves e indicaciones de compás.

@menu
* Clef::                        
* Key signature::               
* Time signature::              
* Partial measures::            
* Bar lines::                   
* Unmetered music::             
* System start delimiters::     
* Staff symbol::                
* Writing music in parallel::   
@end menu


@node System start delimiters
@subsection System start delimiters

@cindex comienzo del sistema
@cindex Pentagramas, varios
@cindex corchete vertical
@cindex llave vertical
@cindex pentagramas de piano
@cindex pentagramas, grupo de
@cindex pauta de coro

Muchas partituras constan de más de un pentagrama.  Estos pentagramas se pueden
unir de cuatro formas distintas:

@itemize @bullet
@item El grupo comienza con una llave a la izquierda y las líneas de compás
están conectadas.  Esto se hace con el contexto @internalsref{GrandStaff}.

@lilypond[verbatim,ragged-right,quote]
\new GrandStaff
\relative <<
  \new Staff { c1 c }
  \new Staff { c c }
>>
@end lilypond

@item El grupo comienza con un corchete recto y las líneas de compás están conectadas.
Esto se hace con el contexto
@internalsref{StaffGroup}

@lilypond[verbatim,ragged-right,quote]
\new StaffGroup
\relative <<
  \new Staff { c1 c }
  \new Staff { c c }
>>
@end lilypond

@item El grupo comienza con un corchete recto pero las líneas de compás no están conectadas.
Esto se hace con el contexto @internalsref{ChoirStaff}.

@lilypond[verbatim,ragged-right,quote]
\new ChoirStaff
\relative <<
  \new Staff { c1 c }
  \new Staff { c c }
>>
@end lilypond

@item El grupo comienza con una línea vertical.  Las líneas de compás
no están conectadas.  Ésta es la opción por defecto para la partitura.

@lilypond[verbatim,ragged-right,quote]
\relative <<
  \new Staff { c1 c }
  \new Staff { c c }
>>
@end lilypond
@end itemize


@seealso

Las barras de compás al principio de cada sistema son
@internalsref{SystemStartBar}, @internalsref{SystemStartBrace} y
@internalsref{SystemStartBracket}.  En cada contexto solamente se
crea uno de estos tipos, y ese tipo está determinado por la propiedad
@code{systemStartDelimiter}.


@commonprop

Los delimitadores del comienzo del sistema se pueden anidar muchas veces:

@lilypond[quote,ragged-right,verbatim]
\new StaffGroup
\relative <<
  \set StaffGroup.systemStartDelimiterHierarchy
    = #'(SystemStartSquare (SystemStartBracket a (SystemStartSquare b)) d)
  \new Staff { c1 }
  \new Staff { c1 }
  \new Staff { c1 }
  \new Staff { c1 }
  \new Staff { c1 }
>>
@end lilypond


@node Staff symbol
@subsection Staff symbol

@cindex ajuste del símbolo del pentagrama

Las notas, signos dinámicos, etc. están agrupados con un conjunto de líneas horizontales
que reciben el nombre de pentagrama o pauta (@q{staff}, en plural @q{staves}).  En
LilyPond, estas líneas se dibujan utilizando un objeto de presentación separado
que se llama el @code{staff symbol} (el símbolo del pentagrama).

El símbolo del pentagrama se puede ajustar en el número, grosor
y separación de las líneas, usando las propiedades.  Esto se demuestra en los archivos de ejemplo
@lsr{staff,changing-the-number-of-lines-in-a-staff.ly} y
@lsr{staff,changing-the-staff-size.ly}.

Además, los pentagramas se pueden iniciar e interrumpir libremente.  Esto se
hace con @code{\startStaff} y @code{\stopStaff}.

@lilypond[verbatim,relative=2,fragment]
b4 b
\override Staff.StaffSymbol #'line-count = 2
\stopStaff \startStaff
b b
\revert Staff.StaffSymbol #'line-count
\stopStaff \startStaff
b b
@end lilypond

En combinación con los pentagramas ocultos o franceses,
esto se puede usar para componer tipográficamente secciones de ossia.  He aquí un ejemplo:

@cindex ossia

@lilypondfile{ossia.ly}

@cindex pentagrama, establecer el número de líneas del
@cindex pentagrama, establecer el grosor de las líneas del
@cindex grosor de las líneas del pentagrama, establecer
@cindex número de líneas del pentagrama, establecer

@seealso

Referencia del programa: @internalsref{StaffSymbol}.

Ejemplos: @lsrdir{staff}


@node Writing music in parallel
@subsection Writing music in parallel

@cindex Escribir música en paralelo
@cindex Música intercalada

La música para varias partes se puede intercalar

@lilypond[quote,fragment,verbatim]
\parallelMusic #'(voiceA voiceB) {
  r8     g'16[ c''] e''[ g' c'' e''] r8     g'16[ c''] e''[ g' c'' e''] |
  c'2                                c'2                                |
  r8     a'16[ d''] f''[ a' d'' f''] r8     a'16[ d''] f''[ a' d'' f''] |
  c'2                                c'2                                |
}
\new StaffGroup <<
  \new Staff \new Voice \voiceA
  \new Staff \new Voice \voiceB
>>
@end lilypond

Esto funciona bastante bien para música de piano

@lilypond[quote,verbatim]
music = {
  \key c \major
  \time 4/4
  \parallelMusic #'(voiceA voiceB voiceC voiceD) {
    % Bar 1
    r8  g'16[ c''] e''[ g' c'' e''] r8  g'16[ c''] e''[ g' c''
e''] |
    c'2                                 c'2 |
    r8  a16[ d'] f'[ a d' f']       r8  a16[ d'] f'[ a d' f'] |
    c2                                  c2 |

    % Bar 2
    a'8 b'      c'' d''    e'' f''    g'' a'' |
    d'4         d'         d'         d' |
    c16 d e f   d e f g    e f g a    f g a b |
    a,4         a,4        a,4        a,4 |

    % Bar 3 ...
  }
}

\score {
  \new PianoStaff <<
    \music
    \new Staff <<
      \voiceA \\
      \voiceB
    >>
    \new Staff {
      \clef bass
      <<
        \voiceC \\
        \voiceD
      >>
    }
  >>
}
@end lilypond


@node Connecting notes
@section Connecting notes

Esta sección trata de la notación que afecta a grupos de notas.

@menu
* Ties::                        
* Slurs::                       
* Phrasing slurs::              
* Laissez vibrer ties::         
* Automatic beams::             
* Manual beams::                
* Grace notes::                 
@end menu


@node Ties
@subsection Ties

@cindex ligadura de unión
@funindex ~

Una ligadura de unión conecta dos notas adyacentes de la misma altura.  La ligadura
en efecto extiende la longitud de una nota.  No deben confundirse las ligaduras de unión con
las ligaduras de expresión, que indican articulación, ni con las ligaduras de fraseo, que indican
el fraseo musical.  Se introduce una ligadura de unión usando el símbolo de la tilde curva @samp{~}

@lilypond[quote,ragged-right,fragment,verbatim]
e' ~ e' <c' e' g'> ~ <c' e' g'>
@end lilypond

Cuando se aplica una ligadura de unión a un acorde, se conectan todas las cabezas de las notas cuyas alturas coinciden.
Si no coincide ningún par de cabezas, no se crea ninguna ligadura.  Los acordes
se pueden ligar parcialmente colocando la ligadura dentro del acorde,

@lilypond[quote,ragged-right,fragment,verbatim,relative=1]
<c~ e g~ b> <c e g b>
@end lilypond

Una ligadura es simplemente una forma de extender la duración de una nota, parecida al
puntillo.  El ejemplo siguiente muestra dos formas de escribir
exactamente el mismo concepto:

@lilypond[quote,fragment,ragged-right]
\time 3/4 c'2. c'2 ~ c'4
@end lilypond

@noindent
Se usan ligaduras de expresión bien cuando la nota atraviesa la barra
de compás o bien cuando no se pueden usar puntillos para denotar el
ritmo.  Cuando se usan ligaduras, las notas de mayor duración se deben alinear con las subdivisiones del compás, como

@lilypond[fragment,quote,ragged-right]
\relative {
  r8 c8 ~ c2 r4 | r8^"not" c2 ~ c8 r4
}
@end lilypond

Si necesita unir muchas notas a través de las líneas divisorias, puede
resultar más fácil utilizar la división automática de notas (vea
@ref{Automatic note splitting}).  Este mecanismo divide las notas
largas de forma automática y las liga a través de las barras de compás.

@funindex \repeatTie

Cuando la segunda vez de una repetición comienza con una nota ligada,
es necesario repetir la ligadura.  Esto se puede conseguir mediante @code{\repeatTie},

@lilypond[fragment,quote,ragged-right,relative=2]
r <c e g>\repeatTie
@end lilypond

@cindex ligaduras de repetición
@cindex corchetes de repetición de primera y segunda vez y ligaduras

@commonprop

A veces se usan ligaduras para escribir arpegios.  En este caso, dos notas ligadas no
necesitan ser consecutivas.  Esto se puede conseguir estableciendo la propiedad @code{tieWaitForNote}
(ligadura - esperar nota) al valor verdadero. La misma funcionalidad puede resultar útil,
por ejemplo, para ligar un trémolo a un acorde.  Por ejemplo,

@lilypond[fragment,verbatim,relative=1,ragged-right,quote]
\set tieWaitForNote = ##t
\grace { c16[~ e~ g]~ } <c, e g>2
\repeat tremolo 8 { c32~ c'~ } <c c,>1
e8~ c~ a~ f~ <e' c a f>2
@end lilypond

Las ligaduras de pueden grabar manualmente modificando la propiedad
@code{tie-configuration}.  El primer número indica la distancia desde
el centro del pentagrama en espacios de pentagrama, y el segundo
número indica la dirección (1 = hacia arriba, -1 = hacia abajo).

@lilypond[fragment,verbatim,relative=1,ragged-right,quote]
<c e g>2~ <c e g> |
\override TieColumn #'tie-configuration =
  #'((0.0 . 1) (-2.0 . 1) (-4.0 . 1))
<c e g>~ <c e g> |
@end lilypond


@refcommands


@funindex \tieUp
@code{\tieUp},
@funindex \tieDown
@code{\tieDown},
@funindex \tieNeutral
@code{\tieNeutral},
@funindex \tieDotted
@code{\tieDotted},
@funindex \tieDashed
@code{\tieDashed},
@funindex \tieSolid
@code{\tieSolid}.


@seealso

En el presente manual: @ref{Automatic note splitting}.

Referencia del programa: @internalsref{Tie}.


@refbugs

Un cambio de pentagrama cuando hay una ligadura activa no producirá una ligadura inclinada.

Los cambios de clave o de octava durante una ligadura de unión no
están bien definidos realmente.  En estos casos puede ser preferible una ligadura de expresión.


@node Slurs
@subsection Slurs

@cindex Ligaduras de expresión

Una ligadura de expresión indica que las notas se deben tocar unidas o
@emph{legato}.  Se escriben utilizando paréntesis

@lilypond[quote,ragged-right,relative=2,fragment,verbatim]
f( g a) a8 b( a4 g2 f4)
<c e>2( <b d>2)
@end lilypond

La dirección de una ligadura de expresión se puede especificar con
@code{\slur@emph{DIRECCIÓN}}, donde @code{@emph{DIRECCIÓN}} es o bien
@code{Up} (arriba), @code{Down} (abajo), o @code{Neutral}
(seleccionada automáticamente).

Sin embargo, hay una forma abreviada muy conveniente para forzar las
direcciones de las ligaduras de expresión.  Escribiendo @code{_} o
@code{^} antes de los paréntesis de apertura, también se establece la dirección.  Por ejemplo,

@lilypond[relative=2,ragged-right,quote,verbatim,fragment]
c4_( c) c^( c)
@end lilypond

Se puede imprimir una sola ligadura cada vez.  Si necesita imprimir
una ligadura larga por encima de varias ligaduras más cortas, consulte @ref{Phrasing slurs}.


@commonprop

Algunos compositores escriben dos ligaduras cuando quieren acordes
legato.  Esto se consigue en LilyPond mediante el establecimiento de @code{doubleSlurs},

@lilypond[verbatim,ragged-right,relative,fragment,quote]
\set doubleSlurs = ##t
<c e>4 ( <d f> <c e> <d f> )
@end lilypond


@refcommands

@funindex \slurUp
@code{\slurUp},
@funindex \slurDown
@code{\slurDown},
@funindex \slurNeutral
@code{\slurNeutral},
@funindex \slurDashed
@code{\slurDashed},
@funindex \slurDotted
@code{\slurDotted},
@funindex \slurSolid
@code{\slurSolid}.

@seealso

Referencia del programa: @internalsref{Slur}.


@node Phrasing slurs
@subsection Phrasing slurs

@cindex ligaduras de fraseo
@cindex marcas de fraseo

Una ligadura de fraseo (o marca de fraseo) conecta las notas y se
utiliza para indicar una frase musical.  Se escribe usando @code{\(} y
@code{\)} respectivamente

@lilypond[quote,ragged-right,fragment,verbatim,relative=1]
\time 6/4 c'\( d( e) f( e) d\)
@end lilypond

Tipográficamente, la ligadura de fraseo se comporta casi exactamente
igual que una ligadura de expresión normal.  Sin embargo, se tratan
como objetos diferentes.  Una @code{\slurUp} no tendrá ningún efecto sobre una ligadura de fraseo; utilice en su lugar
@code{\phrasingSlurUp}, @code{\phrasingSlurDown}, y
@code{\phrasingSlurNeutral}.

No se pueden tener varias ligaduras de fraseo simultáneas.


@refcommands

@funindex \phrasingSlurUp
@code{\phrasingSlurUp},
@funindex \phrasingSlurDown
@code{\phrasingSlurDown},
@funindex \phrasingSlurNeutral
@code{\phrasingSlurNeutral}.


@seealso

Referencia del programa: @internalsref{PhrasingSlur}.


@node Laissez vibrer ties
@subsection Laissez vibrer ties
@cindex Laissez vibrer
@cindex Ligaduras laissez vibrer

Las ligaduras L.v. (laissez vibrer, dejar vibrar) indican que las
notas no se deben apagar al final.  Se usan en la notación para piano,
arpa y otros instrumentos de cuerda y percusión.  Se pueden introducir escribiendo @code{\laissezVibrer},

@lilypond[fragment,ragged-right,verbatim,relative=1]
<c f g>\laissezVibrer
@end lilypond

@seealso

Referencia del programa:
@internalsref{LaissezVibrerTie}
@internalsref{LaissezVibrerTieColumn}

Archivos de ejemplo:
@lsr{connecting,laissez-vibrer-ties.ly}


@node Expressive marks
@section Expressive marks

Las marcas de expresión ayudan al músico a sacar de la música algo más que
simples notas y ritmos.

@menu
* Articulations::               
* Fingering instructions::      
* Dynamics::                    
* Breath marks::                
* Trills::                      
* Glissando::                   
* Arpeggio::                    
* Falls and doits::             
@end menu


@node Articulations
@subsection Articulations

@cindex Articulaciones
@cindex guiones
@cindex ornamentos

Un amplio abanico de símbolos pueden aparecer encima o debajo de las notas
para indicar distintas características de la ejecución.  Se adjuntan a una
nota escribiendo un guión y el carácter que significa la articulación.
Se muestran a continuación:

@lilypondfile[quote,ragged-right]{script-abbreviations.ly}

Los significados de estas abreviaturas se pueden modificar.  Consulte
@file{ly/@/script@/-init@/.ly} para ver ejemplos.

La indicación se coloca automáticamente, pero la dirección (arriba o abajo)
se puede también forzar.  Como otros fragmentos de código de LilyPond,
@code{_} los situará por debajo del pentagrama, y @code{^} los colocará por encima.

@lilypond[quote,ragged-right,fragment,verbatim]
c''4^^ c''4_^
@end lilypond

Se pueden añadir otros símbolos usando la sintaxis
@var{nota}@code{\}@var{nombre}.  Una vez más, se puede forzar
que aparezcan por encima o por debajo usando @code{^} y @code{_},
por ejemplo

@lilypond[quote,ragged-right,verbatim,fragment,relative=2]
c\fermata c^\fermata c_\fermata
@end lilypond

@cindex acento
@cindex marcato
@cindex staccatissimo
@cindex espressivo
@cindex fermata
@cindex calderón
@cindex apagado
@cindex staccato
@cindex portato
@cindex tenuto
@cindex arco arriba
@cindex arco abajo
@cindex pedal, indicaciones de
@cindex órgano, indicaciones de pedal de
@cindex grupeto circular
@cindex open
@cindex flageolet
@cindex grupeto circular invertido
@cindex trino
@cindex semitrino
@cindex semitrino descendente
@cindex prallprall
@cindex prallmordent
@cindex prall, up
@cindex prall, down
@cindex thumb marking
@cindex segno
@cindex coda
@cindex varcoda

He aquí un cuadro que muestra todas las articulaciones disponibles:

@lilypondfile[ragged-right,quote]{script-chart.ly}


@commonprop

El orden vertical de las articulaciones se controla con la propiedad
@code{script-priority}.  Cuanto más bajo es esta número,
más cerca de la nota se colocará.
En este ejemplo el @internalsref{TextScript} (el símbolo de sostenido) tiene primero la
prioridad más baja, así que se coloca en la parte más baja en el primer ejemplo.
En el segundo, el semitrino (el @internalsref{Script}) tiene la prioridad más baja, por tanto
se coloca en la parte interior.  Cuando dos objetos tienen la misma prioridad, el orden en que
se escriben decide cuál de ellos va primero.

@lilypond[verbatim,relative=3,ragged-right,fragment,quote]
\once \override TextScript #'script-priority = #-100
a4^\prall^\markup { \sharp }

\once \override Script #'script-priority = #-100
a4^\prall^\markup { \sharp }
@end lilypond


@seealso

Referencia del programa: @internalsref{Script}.


@refbugs

Estos signos aparecen en la salida impresa pero no tienen ningún efecto sobre la
representación de MIDI de la música.


@node Fingering instructions
@subsection Fingering instructions

@cindex digitación
@cindex cambio de dedo

Las instrucciones de digitación se pueden introducir usando
@example
@var{nota}-@var{dígito}
@end example
Para los cambios de dedo, utilice marcas de texto.

@lilypond[quote,verbatim,ragged-right,fragment,relative=1]
c4-1 c-2 c-3 c-4
c^\markup { \finger "2 - 3" }
@end lilypond

Puede usar la articulación de pulgar para indicar que una nota se debe tocar con el pulgar
(p.ej. en música de cello)
@lilypond[quote,verbatim,ragged-right,fragment,relative=2]
<a_\thumb a'-3>8 <b_\thumb b'-3>
@end lilypond

Las digitaciones para los acordes también se pueden añadir a las notas individuales del acorde
escribiéndolas después de las alturas
@lilypond[quote,verbatim,ragged-right,fragment,relative=2]
< c-1 e-2 g-3 b-5 >4
@end lilypond


@commonprop

Puede ejercer un mayor control sobre la digitación de los acordes
estableciendo @code{fingeringOrientations}

@lilypond[quote,verbatim,ragged-right,fragment,relative=1]
\set fingeringOrientations = #'(left down)
<c-1 es-2 g-4 bes-5 > 4
\set fingeringOrientations = #'(up right down)
<c-1 es-2 g-4 bes-5 > 4
@end lilypond

Usando esta funcionalidad, también es posible poner instrucciones de digitación muy cerca de las cabezas 
de nota en música monofónica,

@lilypond[verbatim,ragged-right,quote,fragment]
\set fingeringOrientations = #'(right)
<es'-2>4
@end lilypond


@seealso

Referencia del programa: @internalsref{Fingering}.

Ejemplos: @lsr{expressive,fingering-chords.ly}


@node Dynamics
@subsection Dynamics

@cindex Dynamics
@funindex \pppp
@funindex \ppp
@funindex \pp
@funindex \p
@funindex \mp
@funindex \mf
@funindex \f
@funindex \ff
@funindex \fff
@funindex \ffff
@funindex \fp
@funindex \sf
@funindex \sff
@funindex \sp
@funindex \spp
@funindex \sfz
@funindex \rfz

Las marcas dinámicas de matiz absoluto se especifican usando un comando después de una nota:
@code{c4\ff}.  Las marcas dinámicas disponibles son @code{\ppppp},
@code{\pppp}, @code{\ppp},
@code{\pp}, @code{\p}, @code{\mp}, @code{\mf}, @code{\f}, @code{\ff},
@code{\fff}, @code{\ffff}, @code{\fp}, @code{\sf}, @code{\sff},
@code{\sp}, @code{\spp}, @code{\sfz} y @code{\rfz}.

@lilypond[quote,verbatim,ragged-right,fragment,relative=2]
c\ppp c\pp c \p c\mp c\mf c\f c\ff c\fff
c2\fp c\sf c\sff c\sp c\spp c\sfz c\rfz
@end lilypond

@funindex \<
@funindex \>
@funindex \!

Un regulador de crescendo se comienza con @code{\<} y se termina con
@code{\!} o con un matiz absoluto.  Un regulador decrescendo comienza con
@code{\>} y se termina también con @code{\!} o con un matiz dinámico
absoluto.  Se pueden usar @code{\cr} y @code{\decr} en lugar de
@code{\<} y @code{\>}.  A causa de que estas marcas se unen a notas, se deben
usar notas espaciadoras si se necesitan varias marcas durante una nota.

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
c\< c\! d\> e\!
<< f1 { s4 s4\< s4\! \> s4\! } >>
@end lilypond

@noindent
Un regulador comienza normalmente en el borde izquierdo de la nota inicial
y acaba en el borde derecho de la nota final.  Si la nota
final cae sobre el principio de un compás,  el regulador finaliza en la línea divisoria
inmediatamente anterior.  Esto se puede modificar estableciendo la propiedad
@code{hairpinToBarline},

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
\set hairpinToBarline = ##f
c4\< c2. c4\!
@end lilypond

En algunas situaciones, la marca de articulación @code{\espressivo} puede ser
apropiada para indicar un crescendo y decrescendo sobre una nota,

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
c2 b4 a g1\espressivo
@end lilypond

Esto puede dar lugar a reguladores muy cortos.  Utilice @code{minimum-length}
dentro de @internalsref{Voice}.@internalsref{Hairpin} para alargarlos, por
ejemplo

@example
\override Voice.Hairpin #'minimum-length = #5
@end example

@cindex al niente
@cindex niente, al

Los reguladores se pueden imprimir con la punta en círculo (notación
al niente) estableciendo la propiedad @code{circled-tip},

@lilypond[quote,ragged-right,fragment,relative=2,verbatim]
\override Hairpin #'circled-tip = ##t
c2\< c\!
c4\> c\< c2\!
@end lilypond


@cindex crescendo
@cindex decrescendo
@cindex diminuendo

También puede usar texto que diga @emph{cresc.} en vez de reguladores

@lilypond[quote,ragged-right,fragment,relative=2,verbatim]
\setTextCresc
c\< d e f\!
\setHairpinCresc
e\> d c b\!
\setTextDecresc
c\> d e f\!
\setTextDim
e\> d c b\!
@end lilypond

Asimismo puede aportar sus propios textos
@lilypond[quote,ragged-right,fragment,relative=1,verbatim]
\set crescendoText = \markup { \italic "cresc. poco" }
\set crescendoSpanner = #'dashed-line
a'2\< a a a\!\mf
@end lilypond

Para crear nuevas indicaciones dinámicas o texto que se deba alinear
con los matices, consulte @ref{New dynamic marks}.

El posicionamiento vertical de las expresiones dinámicas se gestiona a
través de @internalsref{DynamicLineSpanner}.


@commonprop

Las expresiones dinámicas que suceden en, comienzan sobre, o acaban
en, la misma nota se alinearán verticalmente.  Si quiere asegurar que
las expresiones dinámicas se alinean cuando no suceden sobre la misma
nota, puede aumentar el valor de la propiedad @code{staff-padding}.

@example
\override DynamicLineSpanner #'staff-padding = #4
@end example

También puede utilizar esta propiedad si las expresiones dinámicas
colisionan con otros elementos de la notación.

Los crescendi y decrescendi que acaban sobre la misma nota de una
línea nueva no se imprimen.  Para cambiar este comportamiento, utilice

@example
\override Score.Hairpin #'after-line-breaking = ##t
@end example

Los cambios dinámicos de tipo texto (como @emph{cresc.} y @emph{dim.})
se imprimen con una línea de puntos que muestra su alcance.  Para
evitar que se imprima esta línea, use

@example
\override DynamicTextSpanner #'dash-period = #-1.0
@end example


@refcommands

@funindex \dynamicUp
@code{\dynamicUp},
@funindex \dynamicDown
@code{\dynamicDown},
@funindex \dynamicNeutral
@code{\dynamicNeutral}.


@seealso

Referencia del programa: @internalsref{DynamicText}, @internalsref{Hairpin}.
El posicionamiento vertical de estos símbolos se maneja por medio de
@internalsref{DynamicLineSpanner}.


@node Breath marks
@subsection Breath marks

Las marcas de respiración se introducen usando @code{\breathe}

@lilypond[quote,ragged-right,fragment,relative=1,verbatim]
c'4 \breathe d4
@end lilypond


@commonprop

El glifo de la marca de respiración se puede ajustar por medio de la sobreescritura de la propiedad
@code{text} del objeto de presentación @code{BreathingSign} con cualquier texto de marcado.
Por ejemplo,
@lilypond[quote,ragged-right,fragment,verbatim,relative=1]
c'4
\override BreathingSign #'text
  = #(make-musicglyph-markup "scripts.rvarcomma")
\breathe
d4
@end lilypond

@seealso

Referencia del programa: @internalsref{BreathingSign}.

Ejemplos: @lsr{expressive,breathing-sign.ly}


@node Trills
@subsection Trills

Los trinos cortos se imprimen como una articulación normal; consulte @ref{Articulations}.

Los trinos largos mantenidos se hacen con @code{\startTrillSpan} y
@code{\stopTrillSpan},

@lilypond[verbatim,ragged-right,relative=2,quote,fragment]
\new Voice {
  << { c1 \startTrillSpan }
     { s2. \grace { d16[\stopTrillSpan e] } } >>
  c4 }
@end lilypond

@cindex Trinos con altura

Los trinos que se tienen que ejecutar sobre notas especificadas
explícitamente se pueden tipografiar con el comando @code{pitchedTrill},

@lilypond[ragged-right,verbatim,fragment,relative=1,quote]
\pitchedTrill c4\startTrillSpan fis
f\stopTrillSpan
@end lilypond

@noindent
El primer argumento es la nota principal.  La altura de la segunda se
imprime como una cabeza de nota sin plica entre paréntesis.


@refcommands

@code{\startTrillSpan},
@funindex \startTrillSpan
@code{\stopTrillSpan}.
@funindex \stopTrillSpan


@seealso

Referencia del programa: @internalsref{TrillSpanner}.


@node Glissando
@subsection Glissando

@cindex Glissando
@funindex \glissando

Un glissando es un cambio gradual en la altura.  Se denota por medio
de una línea o una línea ondulada entre dos notas.  Se llama
adjuntando @code{\glissando} a una nota

@lilypond[quote,ragged-right,fragment,relative=2,verbatim]
c2\glissando c'
\override Glissando #'style = #'zigzag
c2\glissando c,
@end lilypond


@commonprop

@lilypond[quote,ragged-right,verbatim]
I = \once \override NoteColumn #'ignore-collision = ##t

\relative <<
  { \oneVoice \stemDown f2 \glissando \stemNeutral a } \\
  { \oneVoice \I c2 \glissando \I d, }
>>
@end lilypond



@seealso

Referencia del programa: @internalsref{Glissando}.

Archivos de ejemplo:
@lsr{expressive,glissando.ly}, @lsr{expressive,line-styles.ly}


@refbugs

La impresión de texto sobre la línea (como @emph{gliss.}) no está contemplada.


@node Arpeggio
@subsection Arpeggio

@cindex Arpeggio
@cindex acorde quebrado
@funindex \arpeggio

Se puede especificar un signo de arpegio (conocido también como acorde quebrado) sobre un
acorde adjuntando un @code{\arpeggio} a un acorde

@lilypond[quote,ragged-right,fragment,relative=1,verbatim]
<c e g c>\arpeggio
@end lilypond

Un corchete recto a la izquierda indica que el intérprete no tiene que
arpegiar el acorde

@lilypond[quote,ragged-right,fragment,relative=1,verbatim]
\arpeggioBracket
<c' e g c>\arpeggio
@end lilypond

La dirección del arpegio se denota a veces mediante la adición de una
punta de flecha a la línea ondulada

@lilypond[quote,ragged-right,fragment,relative=1,verbatim]
\new Voice {
  \arpeggioUp
  <c e g c>\arpeggio
  \arpeggioDown
  <c e g c>\arpeggio
}
@end lilypond


@commonprop

Cuando un arpegio cruza uno o varios pentagramas, puede adjuntar un
arpegio a los acordes en los dos pentagramas y establecer
@internalsref{PianoStaff}.@code{connectArpeggios}

@lilypond[quote,ragged-right,fragment,relative=1,verbatim]
\new PianoStaff <<
  \set PianoStaff.connectArpeggios = ##t
  \new Staff { <c' e g c>\arpeggio }
  \new Staff { \clef bass <c,, e g>\arpeggio }
>>
@end lilypond

@c TODO: cross-voice arpeggio example?
@c such an example is already in LSR -J.Mandereau

@refcommands

@code{\arpeggio},
@funindex \arpeggioUp
@code{\arpeggioUp},
@funindex \arpeggioDown
@code{\arpeggioDown},
@funindex \arpeggioNeutral
@code{\arpeggioNeutral},
@funindex \arpeggioBracket
@code{\arpeggioBracket}.


@seealso

Manual de notación: @ref{Ties}, para escribir arpegios explícitamente.

Referencia del programa: @internalsref{Arpeggio}.


@refbugs

No es posible mezclar arpegios conectados y no conectados en un
@internalsref{PianoStaff} en el mismo instante de tiempo.


@node Falls and doits
@subsection Falls and doits

Se pueden expresar caídas y subidas de tono (falls y doits) añadidas a
las notas mediante el comando @code{\bendAfter},

@lilypond[fragment,ragged-right,relative=2]
\override Score.SpacingSpanner #'shortest-duration-space = #3.0
c4-\bendAfter #+5
c4-\bendAfter #-3
@end lilypond


@node Repeats
@section Repeats

La repetición es un concepto fundamental en música, y existen varios
tipos de notación para las repeticiones.

@menu
* Repeat types::                
* Repeat syntax::               
* Repeats and MIDI::            
* Manual repeat commands::      
* Tremolo repeats::             
* Tremolo subdivisions::        
* Measure repeats::             
@end menu


@node Repeat types
@subsection Repeat types

@cindex repeticiones

Están contemplados los siguientes tipos de repetición

@table @code
@item desplegada
Las música repetida está completamente escrita (e interpretada).  Es
útil cuando se introduce música repetitiva.  Éste es el único tipo de
repetición que se incluye en la salida MIDI.

@item volta (primera y segunda vez)
Las repeticiones no están desarrolladas, pero se imprimen finales
alternativos (volte) de izquierda a derecha con corchetes.  Ésta es la
notación estándar para las repeticiones con alternativas.  Por omisión
no se reproducen en la salida MIDI.


@item trémolo
Hacen barras de trémolo.  Por omisión no se reproducen en la salida MIDI.

@item porcentaje
Hacen repeticiones de compases o parte de ellos.  Tienen un aspecto
semejante a un signo de porcentaje.  Por omisión no se reproducen en
la salida MIDI.  Las repeticiones de porcentaje se deben declarar dentro de un contexto @code{Voice}.

@end table


@node Repeat syntax
@subsection Repeat syntax

@cindex volta
@cindex prima volta
@cindex seconda volta
@funindex \repeat

LilyPond tiene una construcción sintáctica para especificar distintos
tipos de repetición.  La sintaxis es

@example
\repeat @var{variante} @var{número_de_repeticiones} @var{cuerpo_de_la_repetición}
@end example

Si tiene finales alternativos, puede añadir
@funindex \alternative
@example
\alternative @{
  @var{alternativa1}
  @var{alternativa2}
  @var{alternativa3}
  @dots{}
@}
@end example

@noindent
donde cada @var{alternativa} es una expresión musical.  Si no da un
número de alternativas suficiente para todas las repeticiones, se
supondrá que la primera alternativa se interpreta más de una vez.

Las repeticiones estándar se usan de esta forma:

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
c1
\repeat volta 2 { c4 d e f }
\repeat volta 2 { f e d c }
@end lilypond

Con finales alternativos

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
c1
\repeat volta 2 {c4 d e f}
\alternative { {d2 d} {f f,} }
@end lilypond

Se pueden crear repeticiones con anacrusa.

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
\new Staff {
  \partial 4 e |
  \repeat volta 4 { c2 d2 | e2 f2 | }
  \alternative { { g4 g g e } { a a a a | b2. } }
}
@end lilypond

@noindent
o bien

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
\new Staff {
  \partial 4 
  \repeat volta 4 { e | c2 d2 | e2 f2 | }
  \alternative { { \partial 4*3 g4 g g } { a a a a | b2. } }
}
@end lilypond



@funindex \repeatTie

Se pueden añadir ligaduras de unión al segundo final,

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
c1
\repeat volta 2 {c4 d e f ~ }
\alternative { {f2 d} {f\repeatTie f,} }
@end lilypond

Es posible acortar los corchetes de primera y segunda vez
estableciendo @code{voltaSpannerDuration}.  En el ejemplo siguiente, el
corchete sólo dura un compás, lo que supone una duración de 3/4.

@lilypond[verbatim,ragged-right,quote]
\relative c''{
  \time 3/4
  c c c
  \set Score.voltaSpannerDuration = #(ly:make-moment 3 4)
  \repeat volta 5 { d d d }
  \alternative { { e e e f f f }
  { g g g } }
}
@end lilypond

Si quiere comenzar una repetición al principio de una línea y tiene una
doble barra al final de la línea anterior, utilice
@example
@dots{} \bar "||:" \break 
\repeat volta 2 @{ @dots{} 
@end example
consulte @ref{Bar lines} para ver más información.

@seealso

Referencia del programa: @internalsref{VoltaBracket},
@internalsref{RepeatedMusic},
@internalsref{VoltaRepeatedMusic} y
@internalsref{UnfoldedRepeatedMusic}.

Ejemplos:

Normalmente los corchetes para la repetición sólo se imprimen sobre el
pentagrama superior.  Esto se puede ajustar moviendo @code{Volta_engraver} al contexto
Staff donde quiera que aparezcan los corchetes;
consulte @ref{Modifying context plug-ins} y

@lsr{repeats,volta@/-multi@/-staff@/.ly}.


@refbugs

@cindex repetición ambigua

Una repetición anidada como

@example
\repeat @dots{}
\repeat @dots{}
\alternative
@end example

@noindent
es ambigua porque no está claro a qué @code{\repeat} pertenece la
@code{\alternative}.  Esta ambigüedad se resuelve haciendo que la
@code{\alternative} pertenezca siempre a la @code{\repeat} más
interna.  Para más claridad, se recomienda usar llaves en tales situaciones.

La información del contador de tiempo no se recuerda al comienzo de una alternativa,
por ello después de una repetición la información de la cuenta de tiempo se debe reajustar
manualmente; por ejemplo, estableciendo el valor de @code{Score.measurePosition} o
introduciendo @code{\partial}.  De forma similar, las ligaduras de expresión o de unión tampoco se repiten.

Los corchetes de primera y segunda vez no se alinean verticalmente.


@node Repeats and MIDI
@subsection Repeats and MIDI

@cindex expansión de repeticiones
@funindex \unfoldRepeats

Con un poco de trucaje, todos los tipos de repeticiones pueden estar
presentes en la salida MIDI.  Se consigue por medio de la aplicación
de la función musical @code{\unfoldRepeats}.  Esta función transforma
todas las repeticiones en repeticiones desarrolladas o desplegadas.

@lilypond[quote,verbatim,fragment,line-width=8.0\cm]
\unfoldRepeats {
  \repeat tremolo 8 {c'32 e' }
  \repeat percent 2 { c''8 d'' }
  \repeat volta 2 {c'4 d' e' f'}
  \alternative {
    { g' a' a' g' }
    {f' e' d' c' }
  }
}
\bar "|."
@end lilypond

Cuando se elabora un archivo de partitura que utiliza @code{\unfoldRepeats} para el MIDI,
es necesario hacer dos bloques @code{\score}: uno para el MIDI (con las repeticiones desplegadas)
y otro para la notación (con primera y segunda vez, trémolo y repeticiones de porcentaje).
Por ejemplo,

@example
\score @{
  @var{..música..}
  \layout @{ .. @}
@}
\score @{
  \unfoldRepeats @var{..música..}
  \midi @{ .. @}
@}
@end example


@node Manual repeat commands
@subsection Manual repeat commands

@funindex repeatCommands

Se puede usar la propiedad @code{repeatCommands} para controlar la
disposición de las repeticiones.  Su valor es una lista de Scheme de comandos de repetición.

@table @asis
@item @code{start-repeat}
Imprimir una barra de compás @code{|:}

@item @code{end-repeat}
Imprimir una barra de compás @code{:|}

@item @code{(volta @var{texto})}
Imprimir un corchete de volta que diga @var{texto}: El texto se puede
especificar como una cadena de texto o como un texto de marcado,
consulte @ref{Text markup}.  No olvide cambiar la fuente tipográfica,
porque el tipo por defecto para los números no contiene caracteres alfabéticos;

@item @code{(volta #f)}
Detener un corchete de volta mantenido.
@end table

@lilypond[quote,ragged-right,verbatim,fragment,relative=2]
c4
  \set Score.repeatCommands = #'((volta "93") end-repeat)
c4 c4
  \set Score.repeatCommands = #'((volta #f))
c4 c4
@end lilypond


@seealso

Referencia del programa: @internalsref{VoltaBracket},
@internalsref{RepeatedMusic},
@internalsref{VoltaRepeatedMusic} y
@internalsref{UnfoldedRepeatedMusic}.


@node Tremolo repeats
@subsection Tremolo repeats

@cindex barras de trémolo

Para colocar marcas de trémolo entre las notas, use @code{\repeat} con el
estilo tremolo
@lilypond[quote,verbatim,ragged-right]
\new Voice \relative c' {
  \repeat tremolo 8 { c16 d16 }
  \repeat tremolo 4 { c16 d16 }
  \repeat tremolo 2 { c16 d16 }
}
@end lilypond

Las marcas de trémolo también se pueden poner sobre una nota única.  En este caso, la
nota no debe estar encerrada entre llaves.
@lilypond[quote,verbatim,ragged-right]
\repeat tremolo 4 c'16
@end lilypond

Se obtiene una salida similar usando la subdivisión del trémolo, que se describe en
@ref{Tremolo subdivisions}.


@seealso

En el presente manual: @ref{Tremolo subdivisions}, @ref{Repeats}.

Referencia del programa: @internalsref{Beam}, @internalsref{StemTremolo}.


@node Tremolo subdivisions
@subsection Tremolo subdivisions

@cindex marcas de trémolo
@funindex tremoloFlags

Las marcas de trémolo se pueden imprimir sobre una nota única escribiendo
@q{@code{:}[@var{número}]} después de la nota.  El número indica la
duración de la subdivisión, y debe ser al menos 8.  Un valor de
@var{longitud} de 8 produce una línea tachando la plica de la nota.  Si se
omite la longitud,
se utiliza el último valor (almacenado en @code{tremoloFlags})

@lilypond[quote,ragged-right,verbatim,fragment]
c'2:8 c':32 | c': c': |
@end lilypond


@refbugs

Los trémolos escritos de esta forma no se trasladan a la salida MIDI.


@seealso

En el presente manual: @ref{Tremolo repeats}.

En otros lugares: @internalsref{StemTremolo}.


@node Measure repeats
@subsection Measure repeats

@cindex porcentaje, repeticiones de
@cindex compás, repeticiones de

En el estilo @code{percent} (porcentaje), se puede hacer que se repita un patrón de notas.  Se
imprime una sola vez, y luego el patrón se sustituye con un símbolo especial.
Los patrones de uno y dos compases se sustituyen por símbolos parecidos a un porcentaje,
y los patrones que dividen a la duración de un compás se sustituyen por barras inclinadas.
Las repeticiones de porcentaje se deben declarar dentro de un contexto @code{Voice}.

@lilypond[quote,verbatim,ragged-right]
\new Voice \relative c' {
  \repeat percent 4 { c4 }
  \repeat percent 2 { c2 es2 f4 fis4 g4 c4 }
}
@end lilypond

Las repeticiones de compás de más de 2 compases llevan un contador, si
se activa la propiedad @code{countPercentRepeats},

@lilypond[relative=2,fragment,quote,verbatim,ragged-right]
\new Voice {
\set countPercentRepeats = ##t
  \repeat percent 4 { c1 }
}
@end lilypond



También se pueden imprimir porcentajes aislados.  Esto se hace
mediante la colocación de un silencio multicompás con una función de impresión distinta,

@lilypond[fragment,verbatim,quote]
\override MultiMeasureRest #'stencil
  = #ly:multi-measure-rest::percent
R1
@end lilypond




@seealso

Referencia del programa: @internalsref{RepeatSlash},
@internalsref{PercentRepeat}, @internalsref{DoublePercentRepeat},
@internalsref{DoublePercentRepeatCounter},
@internalsref{PercentRepeatCounter},
@internalsref{PercentRepeatedMusic}.



