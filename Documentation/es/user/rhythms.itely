@c -*- coding: utf-8; mode: texinfo; -*-
@ignore
    Translation of GIT committish: 459d5b872a370b53f61e747784fb56cf23f56e4b

    When revising a translation, copy the HEAD committish of the
    version that you are working on.  See TRANSLATION for details.
@end ignore

@node Rhythms
@section Rhythms

This section discusses rhythms, durations, and bars.

@menu
* Writing rhythms::             
* Writing rests::               
* Displaying rhythms::          
* Beams::                       
* Bars::                        
* Special rhythmic concerns::   
@end menu


@node Writing rhythms
@subsection Writing rhythms

@menu
* Durations::                   
* Augmentation dots::           
* Tuplets::                     
* Scaling durations::           
@end menu

@node Durations
@unnumberedsubsubsec Durations

@cindex duración
@funindex \longa
@funindex \breve
@funindex \maxima

En los modos de Nota, Acorde y Letra, las duraciones se designan
mediante números y puntos: las duraciones se introducen como sus
valores recíprocos respecto de la redonda.  Por ejemplo, una negra
se escribe usando un @code{4} (puesto que es 1/4 de redonda), mientras
que una blanca se escribe con un @code{2} (por ser 1/2 de redonda).  Para
notas mayores de la redonda se deben usar los comandos @code{\longa} y @code{\breve}

@example
c'\breve
c'1 c'2 c'4 c'8 c'16 c'32 c'64 c'64
r\longa r\breve
r1 r2 r4 r8 r16 r32 r64 r64
@end example

@lilypond[quote]
\score {
\relative c'' {
    a\breve*1/2 \autoBeamOff
    a1 a2 a4 a8 a16 a32 a64 a64
   \bar "empty"
   \break
    r\longa*1/4 r\breve *1/2
    r1 r2 r4 r8 r16 r32 r64 r64
  }
  \layout {
    ragged-right = ##t
    indent=0\mm
    \context {
      \Score
        \remove "Bar_number_engraver"
    }
    \context {
      \Staff
        \remove "Clef_engraver"
        \override StaffSymbol #'transparent = ##t
        \override TimeSignature #'transparent = ##t
        \override BarLine #'transparent = ##t
        \consists "Pitch_squash_engraver"
    }
  }
}
@end lilypond

Si la duración se omite, su valor será el de la duración de la nota
anterior.  Por omisión, el valor de la primera nota es el de una negra.

@lilypond[quote,ragged-right,verbatim,fragment]
{ a a a2 a a4 a a1 a }
@end lilypond


@node Augmentation dots
@unnumberedsubsubsec Augmentation dots

@funindex .

Para obtener duraciones de notas con puntillo, simplemente escriba un
punto (@samp{.}) después del número.  Las notas con doble puntillo se consiguen de manera similar.

@lilypond[quote,ragged-right,fragment,verbatim]
a'4 b' c''4. b'8 a'4. b'4.. c''8.
@end lilypond

@predefined

Normalmente los puntillos se desplazan hacia arriba para evitar las
líneas del pentagrama, excepto en situaciones de polifonía.  Se pueden
utilizar los siguientes comandos para forzar manualmente una dirección en particular

@funindex \dotsUp
@code{\dotsUp},
@funindex \dotsDown
@code{\dotsDown},
@funindex \dotsNeutral
@code{\dotsNeutral}.

@seealso

Referencia del programa: @internalsref{Dots} y @internalsref{DotColumn}.


@node Tuplets
@unnumberedsubsubsec Tuplets

@cindex grupos especiales
@cindex tresillos
@funindex \times

Los grupos especiales se obtienen a partir de una expresión musical
multiplicando todas las duraciones por una fracción:

@example
\times @var{fracción} @var{expresión_musical}
@end example

@noindent
La duración de la @var{expresión _musical} se multiplicará por la
fracción.  El denominador de la fracción se imprimirá sobre las notas,
opcionalmente con un corchete.  El grupo especial más común es el
tresillo, en el que 3 notas tienen el valor de 2, por tanto las notas
duran 2/3 de su valor escrito

@lilypond[quote,ragged-right,fragment,verbatim]
g'4 \times 2/3 {c'4 c' c'} d'4 d'4
@end lilypond

Los grupos pueden anidarse unos dentro de otros, por ejemplo

@lilypond[fragment,ragged-right,verbatim,relative=2]
\override TupletNumber #'text = #tuplet-number::calc-fraction-text
\times 4/6 {
  a4 a
  \times 3/5 { a a a a a }
}
@end lilypond

@predefined

@funindex \tupletUp
@code{\tupletUp},
@funindex \tupletDown
@code{\tupletDown},
@funindex \tupletNeutral
@code{\tupletNeutral}.


@commonprop

@funindex tupletNumberFormatFunction
@cindex formateo de los grupos especiales

La propiedad @code{tupletSpannerDuration} (duración del selector de
grupo) especifica la duración de cada corchete.  Con esto puede hacer
muchos grupos escribiendo @code{\times} una sola vez, ahorrándose
mucho trabajo de teclado.  En el siguiente ejemplo se muestran dos
tresillos, aunque @code{\times} sólo se ha utilizado una vez

@lilypond[quote,fragment,relative=2,ragged-right,verbatim]
\set tupletSpannerDuration = #(ly:make-moment 1 4)
\times 2/3 { c8 c c c c c }
@end lilypond

@noindent
Para ver más información sobre @code{make-moment}, consulte
@ref{Time administration}.

El formato del número se determina por medio de la propiedad @code{text} en
@code{TupletNumber}.  Por defecto se imprime sólo el denominador, pero si
su valor se establece a la función @code{tuplet-number::calc-fraction-text},
se imprimirá como @var{numerador}:@var{denominador}

Para que no se impriman los números de los grupos, emplee

@lilypond[quote,fragment,relative=2,ragged-right,verbatim]
\times 2/3 { c8 c c } \times 2/3 { c8 c c }
\override TupletNumber #'transparent = ##t
\times 2/3 { c8 c c } \times 2/3 { c8 c c }
@end lilypond

Utilice la función @code{\tweak} para sobreescribir los grupos anidados que comienzan en el mismo
instante musical.  En este ejemplo, @code{\tweak} especifica un texto de fracción
para el
@code{TupletNumber} exterior y un texto de denominador para el @code{TupletNumber}
del primero de los tres grupos interiores.

@lilypond[quote,ragged-right,verbatim]
\new Staff {
  \tweak #'text #tuplet-number::calc-fraction-text
  \times 4/3 {
     \tweak #'text #tuplet-number::calc-denominator-text
     \times 2/3 { c'8[ c'8 c'8] }
     \times 2/3 { c'8[ c'8 c'8] }
     \times 2/3 { c'8[ c'8 c'8] }
  }
}
@end lilypond

Aquí @code{\tweak} y @code{\override} trabajan conjuntamente para especificar la dirección
del @code{TupletBracket} (el corchete del grupo).  El primer @code{\tweak} coloca
el @code{TupletBracket} del grupo 
exterior por encima del pentagrama.  El segundo @code{\tweak} coloca el
@code{TupletBracket} del primero de los tres grupos interiores por debajo del
pentagrama.  Tenga en cuenta que este par de funciones @code{\tweak} afecta solamente
al grupo exterior y al primero de los tres grupos interiores porque sólo
esos dos grupos comienzan en el mismo instante musical.  Utilizamos @code{\override}
de la manera usual para colocar los corchetes @code{TupletBrackets} del
segundo y tercer grupos interiores por debajo del pentagrama.

@lilypond[quote,ragged-right,verbatim]
\new Staff {
  \tweak #'text #tuplet-number::calc-fraction-text
  \tweak #'direction #up
  \times 4/3 {
     \tweak #'direction #down
     \times 2/3 { c'8[ c'8 c'8] }
     \override TupletBracket #'direction = #down
     \times 2/3 { c'8[ c'8 c'8] }
     \times 2/3 { c'8[ c'8 c'8] }
  }
}
@end lilypond

Se puede hacer que los corchetes de grupo abarquen tanto como su duración completa indique o que lleguen hasta justo antes de la nota siguiente

@lilypond[ragged-right]
\new RhythmicStaff {
  \set tupletFullLength = ##t
  \time 4/4
  \times 4/5 {
    c4 c1
  }
  \set tupletFullLengthNote = ##t
  \time 2/4
  \times 2/3 {
    c4 c c 
  }
  \time 3/4
  c4 
}
@end lilypond


@seealso

Referencia del programa: @internalsref{TupletBracket},
@internalsref{TupletNumber} y @internalsref{TimeScaledMusic}.



@node Scaling durations
@unnumberedsubsubsec Scaling durations

Es posible alterar la duración de las figuras en un factor @var{N/M}
añadiendo @samp{*@var{N/M}} (o @samp{*@var{N}} si @var{M=1}).  Esto no
afectará a la apariencia de las notas o silencios que se producen.  Se
pueden combinar en la forma @samp{*M*N}.

En el siguiente ejemplo las tres primeras notas duran exactamente dos
partes, pero no se imprime ningún corchete de tresillo.

@lilypond[quote,ragged-right,fragment,relative=2,verbatim]
\time 2/4
a4*2/3 gis4*2/3 a4*2/3
a4 a4 a4*2
b16*4 c4
@end lilypond


@seealso

En este manual: @ref{Tuplets}.


@node Writing rests
@subsection Writing rests

@menu
* Rests::                       
* Skips::                       
* Multi measure rests::         
@end menu

@node Rests
@unnumberedsubsubsec Rests
@cindex Silencios

@funindex \rest
@funindex r

Los silencios se introducen como notas con el nombre @code{r}

@lilypond[fragment,quote,ragged-right,verbatim]
r1 r2 r4 r8
@end lilypond

Los silencios de un compás centrados en medio del compás,
se deben hacer con silencios multicompás.  Se pueden usar para 
un solo compás así como para muchos compases, y se tratan en
@ref{Multi measure rests}.

Para especificar explícitamente la posición vertical de un silencio, escriba una nota
seguida de @code{\rest}.  Se colocará un silencio en la posición en que debería
aparecer la nota:

@lilypond[fragment,quote,ragged-right,verbatim]
a'4\rest d'4\rest
@end lilypond

@noindent
Esto hace mucho más sencillo el formateo de
la música polifónica,
porque el formateador automático de colisiones de silencios se olvidará de ellos.

@seealso

Referencia del programa: @internalsref{Rest}.


@node Skips
@unnumberedsubsubsec Skips

@cindex Desplazamiento
@cindex Silencio invisible
@cindex Nota de espaciado
@funindex \skip
@funindex s

Un silencio invisible -- también conocido como @q{skip} (desplazamiento) --
se puede introducir como una nota con el nombre @samp{s} o con @code{\skip @var{duración}}

@lilypond[fragment,quote,ragged-right,verbatim,relative=2]
a4 a4 s4 a4 \skip 1 a4
@end lilypond

La sintaxis de @code{s} sólo está disponible en el modo de notas y en el modo de acordes.
En otras situaciones, por ejemplo, cuando se introduce la letra, debe
usar el comando @code{\skip}

@lilypond[quote,ragged-right,verbatim]
<<
  \relative { a'2 a2 }
  \new Lyrics \lyricmode { \skip 2 bla2 }
>>
@end lilypond

El comando skip es un mero contenedor musical vacío.  No produce
ninguna salida, ni siguiera una salida transparente.

El comando de desplazamiento @code{s} crea una @internalsref{Staff} y una
@internalsref{Voice} cuando es necesario, de forma similar a los comandos de nota y de silencio.
Por ejemplo, el fragmento siguiente produce un pentagrama vacío.

@lilypond[quote,ragged-right,verbatim]
{ s4 }
@end lilypond

El fragmento @code{@{ \skip 4 @} } produciría una página vacía.

@seealso

Referencia del programa: @internalsref{SkipMusic}.


@node Multi measure rests
@unnumberedsubsubsec Multi measure rests

@cindex multicompás, silencios
@cindex compás completo, silencios de
@cindex Silencios multicompás
@cindex Silencios de compás completo
@cindex redonda, silencios de, para un compás completo
@funindex R

Los silencios de un compás completo (o muchos compases) se escriben como @samp{R}.  Esto está
indicado específicamente para silencios de compás completo y para escribir particellas: el silencio
se puede expandir de forma que rellene una partitura con silencios, o se puede imprimir como un solo silencio multicompás.
Esta expansión se controla por medio de la propiedad
@code{Score.skipBars}.  Si está establecido al valor true, los compases vacíos no se
expandirán, y se añadirá automáticamente el número correspondiente

@lilypond[quote,ragged-right,fragment,verbatim]
\time 4/4 r1 | R1 | R1*2 \time 3/4 R2. \time 2/4 R2 \time 4/4
\set Score.skipBars = ##t R1*17 R1*4
@end lilypond

El número @code{1} de @code{R1} es similar a la notación de la duración que se usa para las
notas.  De aquí que para indicaciones de compás distintas al 4/4, tengamos que escribir
otras duraciones.  Esto se puede hacer con puntillos de prolongación o con fracciones

@lilypond[quote,ragged-right,fragment,verbatim]
\set Score.skipBars = ##t
\time 3/4
R2. | R2.*2
\time 13/8
R1*13/8
R1*13/8*12 |
\time 10/8 R4*5*4 |
@end lilypond

Una @code{R} que dura un solo compás se imprime como un silencio de redonda o breve,
centrado en el compás independientemente de la indicación de compás.

Si hay sólo algunos compases de silencio, LilyPond imprime @q{silencios eclesiásticos}
(un conjunto de pequeños rectángulos) en el pentagrama.  Para sustituirlos con silencios ordinarios,
utilice @code{MultiMeasureRest.expand-limit}.

@lilypond[quote,ragged-right,fragment,verbatim]
\set Score.skipBars = ##t
R1*2 | R1*5 | R1*9
\override MultiMeasureRest #'expand-limit = 1
R1*2 | R1*5 | R1*9
@end lilypond

@cindex texto sobre silencios multicompás
@cindex textual, inscripción, sobre silencios multicompás
@cindex calderón sobre silencios multicompás

Se pueden añadir textos a los silencios multicompás utilizando la sintaxis
@var{nota}-@code{marca} de @ref{Text markup}.
Hay una variable (@code{\fermataMarkup}) para añadir
calderones

@lilypond[quote,ragged-right,verbatim,fragment]
\set Score.skipBars = ##t
\time 3/4
R2.*10^\markup { \italic "ad lib." }
R2.^\fermataMarkup
@end lilypond

¡Advertencia!  Este texto se crea por parte de @code{MultiMeasureRestText}, no de
@code{TextScript}.

@lilypond[quote,ragged-right,verbatim,fragment]
\override TextScript #'padding = #5
R1^"low"
\override MultiMeasureRestText #'padding = #5
R1^"high"
@end lilypond

Si queremos poner texto a la izquierda de un silencio multicompás,
adjuntamos el texto a una nota de salto de longitud cero, esto es

@example
s1*0^"Allegro"
R1*4
@end example


@seealso

Referencia del programa: @internalsref{MultiMeasureRestMusicGroup},
@internalsref{MultiMeasureRest}.

El objeto de presentación @internalsref{MultiMeasureRestNumber} es para el número
por defecto, y @internalsref{MultiMeasureRestText} para los textos
definidos por el usuario.


@knownissues

No se pueden usar digitaciones (p.ej. @code{R1-4}) para poner números
encima de los silencios multicompás.  Y la altura de los silencios multicompás (o
silencios centrados en el pentagrama) no se puede modificar.

@cindex silencios condensados

No hay ninguna forma de condensar automáticamente muchos silencios en un solo
silencio multicompás.  Los silencios multicompás no toman parte en las comprobaciones de colisión de
silencios.

Tenga cuidado al escribir silencios multicompás seguidos por redondas.
El código siguiente introduce dos notas que tienen una duración de cuatro compases cada una
@example
R1*4 cis cis
@end example
Cuando @code{skipBars} esté establecido, el aspecto del resultado será correcto, pero la numeración
de los compases estará desactivada.


@node Displaying rhythms
@subsection Displaying rhythms

@menu
* Time signature::              
* Upbeats::                     
* Unmetered music::             
* Polymetric notation::         
* Automatic note splitting::    
@end menu

@node Time signature
@unnumberedsubsubsec Time signature

@cindex Indicación de compás
@cindex metro, medida
@funindex \time

La indicación de compás indica el metro de la pieza: su patrón regular de
partes fuertes y débiles.  Se denota por una fracción al comienzo del
pentagrama.

La indicación de compás se establece mediante el comando @code{\time}

@lilypond[quote,ragged-right,fragment,verbatim]
\time 2/4 c'2 \time 3/4 c'2.
@end lilypond

@commonprop

Se puede personalizar el símbolo que se imprime mediante la propiedad @code{style}.
Un valor de @code{#'()} produce un estilo de fracción para los compases de 4/4 y
de 2/2,

@lilypond[fragment,quote,ragged-right,verbatim]
\time 4/4 c'1
\time 2/2 c'1
\override Staff.TimeSignature #'style = #'()
\time 4/4 c'1
\time 2/2 c'1
@end lilypond

Existen otras muchas opciones para su presentación.  Para ver más ejemplos, consulte @ref{Ancient time
signatures}.

@code{\time} establece las propiedades @code{timeSignatureFraction},
@code{beatLength} y @code{measureLength} en el contexto @code{Timing},
cuyo nombre alternativo normalmente es @internalsref{Score}.  La
propiedad @code{measureLength} determina el lugar en que se deben insertar las barras de compás
y cómo se generan las barras de corchea automáticas.  La modificación del valor de
@code{timeSignatureFraction} también provoca que se imprima
el símbolo.

Están disponibles más opciones a través de la función de Scheme
@code{set-time-signature}.  En combinación con el grabador
@internalsref{Measure_grouping_engraver} (agrupación de compases), creará signos de
@internalsref{MeasureGrouping}.  Estos signos facilitan la lectura de música moderna
rítmicamente compleja.  En el siguiente ejemplo el compás de 9/8
se subdivide en 2, 2, 2 y 3.  Esto se pasa a
@code{set-time-signature} como un tercer argumento con el valor @code{(2 2 2 3)}

@lilypond[quote,ragged-right,verbatim]
\score {
  \relative c'' {
    #(set-time-signature 9 8 '(2 2 2 3))
    g8[ g] d[ d] g[ g] a8[( bes g]) |
    #(set-time-signature 5 8 '(3 2))
    a4. g4
  }
  \layout {
    \context {
      \Staff
      \consists "Measure_grouping_engraver"
    }
  }
}
@end lilypond


@seealso

Referencia del programa: @internalsref{TimeSignature} y
@internalsref{Timing_translator}.

Ejemplos: @lsr{contemporary,compound-time-signature.ly}.


@knownissues

EL barrado automático no utiliza la agrupación de compases especificada con
@code{set-time-signature}.


@node Upbeats
@unnumberedsubsubsec Upbeats

@cindex anacrusa
@cindex parte al alzar
@cindex compás parcial
@cindex parcial, compás
@cindex acortar compases
@funindex \partial

Los compases parciales como las anacrusas o partes al alzar se escriben usando la construcción

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
\partial 16*5 c16 cis d dis e | a2. c,4 | b2
@end lilypond

La sintaxis de este comando es la siguiente:

@example
\partial @var{duración}
@end example

donde @code{duración} es el valor rítmico que se se debe añadir antes
del siguiente compás.

Esto se traduce internamente a

@example
\set Timing.measurePosition = -@var{longitud de la duración}
@end example

La propiedad @code{measurePosition} contiene un número racional
que indica qué parte del compás ha transcurrido hasta el momento.
Observe que es un número negativo; @code{\partial 4} se traduce internamente
con el significado de @qq{queda un valor de negra en este compás}.


@knownissues

Este comando no tiene en cuenta las notas de adorno al comienzo
de la música.  Cuando una pieza comienza con notas de adorno en la anacrusa,
el @code{\partial} debe escribirse después de las notas de adorno

@lilypond[verbatim,quote,ragged-right,relative,fragment]
\grace f16
\partial 4
g4
a2 g2
@end lilypond

El uso de @code{\partial} está previsto solamente para el comienzo de una
pieza.  Si se emplea después del comienzo se obtendrán varias advertencias
desagradables.


@node Unmetered music
@unnumberedsubsubsec Unmetered music

@cindex cadencia
@funindex \cadenzaOn
@funindex \cadenzaOff

Las líneas divisorias y los números de compás se calculan automáticamente.
Para música sin compasear (por ejemplo cadencias), esto no es deseable.
Para desactivar las barras y los números de compás automáticos, utilice los comandos
@code{\cadenzaOn} y @code{\cadenzaOff}.

@lilypond[verbatim,quote,ragged-right,relative=2,fragment]
c4 d e d
\cadenzaOn
c4 c d8 d d f4 g4.
\cadenzaOff
\bar "|"
d4 e d c
@end lilypond


@knownissues

LilyPond insertará saltos de línea y de página solamente en las barras de compás.
A menos que la música sin compasear acabe antes del final de la línea del pentagrama,
tendrá que insertar barras
de compás invisibles

@example
\bar ""
@end example

@noindent
para indicar dónde se pueden producir los saltos.


@node Polymetric notation
@unnumberedsubsubsec Polymetric notation

UNTRANSLATED NODE: IGNORE ME


@node Automatic note splitting
@unnumberedsubsubsec Automatic note splitting

Las notas largas se pueden convertir automáticamente en notas ligadas.
Se hace mediante la sustitución del @internalsref{Note_heads_engraver}
por el @internalsref{Completion_heads_engraver}.  En los siguientes
ejemplos, las notas que atraviesan la barra de compás se dividen y se unen mediante una ligadura.

@lilypond[quote,fragment,verbatim,relative=1,line-width=12\cm]
\new Voice \with {
  \remove "Note_heads_engraver"
  \consists "Completion_heads_engraver"
} {
  c2. c8 d4 e f g a b c8 c2 b4 a g16 f4 e d c8. c2
}
@end lilypond

Este grabador divide todas las notas largas en la barra de compás e
inserta ligaduras.  Uno de sus usos es depurar partituras complejas:
si los compases no están completos, las ligaduras mostrarán
exactamente cuánto le falta a cada compás.

Si quiere permitir el salto de línea en las barras de compás en las
que @internalsref{Completion_heads_engraver} divide las notas, debe
eliminar también @internalsref{Forbid_line_break_engraver}.


@knownissues

No todas las duraciones (sobre todo las que contienen grupos
especiales) se pueden representar exactamente con notas normales y
puntillos, pero el grabador nunca insertará grupos especiales.

@code{Completion_heads_engraver} afecta sólo a las notas; no divide
silencios.


@seealso

Referencia del programa: @internalsref{Completion_heads_engraver}.


@node Beams
@subsection Beams

@menu
* Automatic beams::             
* Manual beams::                
* Feathered beams::             
@end menu

@node Automatic beams
@unnumberedsubsubsec Automatic beams

LilyPond inserta las barras de corchea automáticamente

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
\time 2/4 c8 c c c \time 6/8 c c c c8. c16 c8
@end lilypond

Cuando estas decisiones automáticas no son lo bastante buenas, se
pueden escribir los barrados de forma explícita.  También es posible
definir patrones de barrado que difieran de los ajustes por defecto.
Para ver más detalles, consulte @ref{Setting automatic beam behavior}.

Las notas individuales se pueden marcar con @code{\noBeam} para evitar
que lleven una barra

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
\time 2/4 c8 c\noBeam c c
@end lilypond


@seealso

Referencia del programa: @internalsref{Beam}.


@node Manual beams
@unnumberedsubsubsec Manual beams

@cindex barras manuales
@funindex ]
@funindex [

En ciertos casos puede ser preciso sobreescribir el algoritmo de
barrado automático.  Por ejemplo, el barrador automático no escribe
barras por encima de los silencios o las líneas divisorias.  Tales
barras se especifican manualmente marcando los puntos de comienzo y final con @code{[} y @code{]}

@lilypond[quote,ragged-right,fragment,relative=1,verbatim]
{
  r4 r8[ g' a r8] r8 g[ | a] r8
}
@end lilypond


@commonprop

@funindex stemLeftBeamCount
@funindex stemRightBeamCount


LilyPond es capaz de determinar automáticamente los patrones de barrado dentro de una barra,
pero a veces este comportamiento automático puede producir resultados extraños;
por ello, se pueden usar las propiedades @code{stemLeftBeamCount} y @code{stemRightBeamCount}
para sobreescribir los valores por defecto.  Si
se establece con un valor una cualquiera de estas propiedades, dicho valor se utilizará una sola vez, y después
se borrará.

@lilypond[quote,ragged-right,fragment,relative=1,verbatim]
{
   f8[ r16
      f g a]
   f8[ r16
   \set stemLeftBeamCount = #1
      f g a]
}
@end lilypond

Se puede establecer la propiedad @code{subdivideBeams} para subdividir
todas las barras de semicorchea y de valores inferiores en las
posiciones de las fracciones o partes, tal y como está definido por parte de la propiedad @code{beatLength}.

@lilypond[fragment,quote,relative=2,verbatim]
c16[ c c c c c c c]
\set subdivideBeams = ##t
c16[ c c c c c c c]
\set Score.beatLength = #(ly:make-moment 1 8)
c16[ c c c c c c c]
@end lilypond
@funindex subdivideBeams

@noindent
Para ver más información sobre @code{make-moment}, consulte
@ref{Time administration}.

Los saltos de línea normalmente están prohibidos cuando las barras
cruzan las líneas divisorias.  Este comportamiento se puede modificar estableciendo @code{breakable}.

@funindex breakable

@cindex barras de corchea y saltos de línea
@cindex barras en ángulo
@cindex ángulo, barras en
@cindex auto-knee-gap

Se insertan automáticamente barras de corchea en ángulo cuando se
detecta un desnivel muy grande entre las cabezas de las notas. 
Este comportamiento se puede ajustar a través del objeto @code{auto-knee-gap}.


@knownissues

Las barras que cruzan pentagramas y reciben un ángulo automático no se
pueden usar conjuntamente con los pentagramas ocultos.  Consulte @ref{Hiding staves}.

@c Is this still true with skyline spacing stuff? -J.Mandereau
Las barras de corchea no evitan las colisiones con los símbolos que
rodean las notas, como los textos y las alteraciones.


@node Feathered beams
@unnumberedsubsubsec Feathered beams

UNTRANSLATED NODE: IGNORE ME

@node Bars
@subsection Bars


@menu
* Bar check::                   
* Bar lines::                   
* Bar numbers::                 
* Barnumber check::             
* Rehearsal marks::             
@end menu

@node Bar check
@unnumberedsubsubsec Bar check

@cindex Compás, comprobación de
@funindex barCheckSynchronize
@funindex |

Las comprobaciones de compás ayudan a detectar errores en las duraciones.  Una comprobación de compás se
escribe usando el símbolo de la barra vertical, @samp{|}.  Cuando se encuentra durante 
la interpretación, debe caer en el límite entre dos compases.  Si no es así,
se muestra una advertencia.  En el siguiente ejemplo, la segunda comprobación
de compás avisará de un error
@example
\time 3/4 c2 e4 | g2 |
@end example

Las comprobaciones de compás también se pueden usar en la letra de las canciones, por ejemplo

@example
\lyricmode @{
  \time 2/4
  Bri -- lla | Bri -- lla 
@}
@end example

Las comprobaciones de compás fallidas tienen su origen en la
introducción incorrecta de las duraciones.  Las duraciones incorrectas
a menudo desbaratan la partitura completamente, sobre todo si la
música es polifónica, por ello el mejor sitio para empezar a corregir
la entrada es hacer un barrido en busca de comprobaciones de compás
fallidas y duraciones incorrectas.

@funindex |
@funindex pipeSymbol

También es posible redefinir el significado de @code{|}.  Se hace
asignando una expresión musical a @code{pipeSymbol},

@lilypond[quote,ragged-right,verbatim]
pipeSymbol = \bar "||"

{ c'2 c' | c'2 c' }
@end lilypond


@node Bar lines
@unnumberedsubsubsec Bar lines

@cindex Barras de compás
@funindex \bar
@cindex líneas divisorias
@cindex repetición, barras de

Las líneas divisorias delimitan a los compases pero también se pueden usar
para indicar las repeticiones.  Normalmente se insertan de manera automática.
Los saltos de línea solamente pueden producirse sobre las barras de compás.

Se pueden forzar tipos especiales de línea divisoria con 
el comando @code{\bar}

@lilypond[quote,ragged-right,relative=2,fragment,verbatim]
c4 \bar "|:" c4
@end lilypond

Se encuentran disponibles los siguientes tipos de barra:

@c @lilypondfile[ragged-right,quote]{bar-lines.ly}

Además se puede especificar @code{"||:"}, que equivale a
@code{"|:"} excepto en los saltos de línea, en que produce una doble barra
al final de la línea y una repetición izquierda (de comienzo) al principio de
la línea siguiente.

Para permitir un salto de línea donde no hay ninguna línea divisoria visible,
utilice

@example
\bar ""
@end example

@noindent
De esta manera se insertará una barra invisible de compás y se hará posible
el salto de línea en este punto (sin incrementar el contador de los números de compás).

En las partituras con muchos pentagramas, un comando @code{\bar} en uno de ellos se aplica
automáticamente a todos los demás.  Las líneas resultantes se conectan entre los distintos pentagramas
de un @code{StaffGroup}, @code{PianoStaff} o @code{GrandStaff}.

@lilypond[quote,ragged-right,fragment,verbatim]
<<
  \new StaffGroup <<
    \new Staff {
      e'4 d'
      \bar "||"
      f' e'
    }
    \new Staff { \clef bass c4 g e g }
  >>
  \new Staff { \clef bass c2 c2 }
>>
@end lilypond


@commonprop

@funindex whichBar
@funindex repeatCommands
@funindex defaultBarType

El comando @code{\bar }@var{tipo_de_barra} es una forma corta de hacer
@code{\set Timing.whichBar = }@var{tipo_de_barra}.  Cuando @code{whichBar}
se establece con el valor de una cadena, se crea una línea divisoria de ese tipo.

Una línea divisoria se crea cuando se establece la propiedad @code{whichBar}.
Al comienzo del compás su valor se toma de
@code{Timing.defaultBarType}.  Los contenidos de los @code{repeatCommands} se
utilizan para sobreescribir a las barras de compás por omisión.

Le recomendamos que utilice siempre @code{\repeat} para hacer repeticiones.
Consulte @ref{Repeats}.


@seealso

En este manual: @ref{Repeats}, @ref{System start delimiters}.

Referencia del programa: @internalsref{BarLine} (creada al nivel de
@internalsref{Staff} (pentagrama)), @internalsref{SpanBar} (a través de los pentagramas).


@node Bar numbers
@unnumberedsubsubsec Bar numbers

@cindex Compás, números de
@cindex números de compás
@funindex currentBarNumber

Por defecto, los números de compás se imprimen al principio de la línea.  El
número propiamente dicho se almacena en la propiedad @code{currentBarNumber}, que normalmente
se actualiza automáticamente para cada compás.

@lilypond[verbatim,ragged-right,quote,fragment,relative]
\repeat unfold 4 {c4 c c c} \break
\set Score.currentBarNumber = #50
\repeat unfold 4 {c4 c c c}
@end lilypond

Los números de compás sólo se pueden imprimir en las líneas divisorias; para imprimir un número de
compás al principio de la pieza, se debe añadir una línea divisoria
vacía

@lilypond[verbatim,ragged-right,quote,fragment,relative]
\set Score.currentBarNumber = #50
\bar ""
\repeat unfold 4 {c4 c c c} \break
\repeat unfold 4 {c4 c c c}
@end lilypond

Los números de compás se pueden tipografiar a intervalos regulares en vez de al principio de cada
línea.  Esto queda ilustrado en el ejemplo siguiente,
cuyo código fuente se encuentra disponible como
@lsr{staff,making-bar-numbers-appear-at-regular-intervals.ly}.

@c @lilypondfile[ragged-right,quote]{bar-number-regular-interval.ly}

Los números de compás se pueden suprimir completamente quitando el grabador de números de compás
de la partitura.

@lilypond[verbatim,ragged-right,quote]
\layout {
  \context {
    \Score
    \remove "Bar_number_engraver"
  }
}
\relative c''{
c4 c c c \break
c4 c c c
}
@end lilypond


@seealso

Referencia del programa: @internalsref{BarNumber}.

Ejemplos: @lsrdir{staff}


@knownissues

Los números de compás pueden colisionar con el corchete @internalsref{StaffGroup}, si hay uno
en la parte de arriba.  Para solucionarlo, se puede usar la propiedad de relleno
@code{padding} de @internalsref{BarNumber} para
colocar el número correctamente.


@node Barnumber check
@unnumberedsubsubsec Barnumber check

Al copiar piezas musicales grandes puede servir de ayuda comprobar que
el número de compás de LilyPond corresponde al original desde el que está copiando.
Esto se puede comprobar con @code{\barNumberCheck}, por ejemplo

@verbatim
\barNumberCheck #123
@end verbatim

@noindent
imprimirá una advertencia si el @code{currentBarNumber} (número del
compás actual) no es 123 cuando se está procesando.


@node Rehearsal marks
@unnumberedsubsubsec Rehearsal marks

@cindex Ensayo, letras de
@funindex \mark

Para imprimir una letra de ensayo, utilice la orden @code{\mark}

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
c1 \mark \default
c1 \mark \default
c1 \mark #8
c1 \mark \default
c1 \mark \default
@end lilypond

@noindent
La letra@tie{}@q{I} se salta de acuerdo con las tradiciones de grabado.
Si quiere incluir la letra @q{I}, use

@example
\set Score.markFormatter = #format-mark-alphabet
@end example

La letra de ensayo se incrementa automáticamente si usa @code{\mark
\default}, pero también puede utilizar un número entero como argumento para establecer la indicación manualmente.
El valor que se utilizará se almacena dentro de la propiedad
@code{rehearsalMark}.

El estilo se define por medio de la propiedad @code{markFormatter}.  Es una función
que toma como argumentos la marca en curso (un número entero) y el contexto actual.
Debe devolver un objeto de marcado.  En el ejemplo
siguiente, se establece @code{markFormatter} con el valor de un procedimiento enlatado.  Después de
algunos compases, se establece con el valor de una función que produce un número encerrado en una caja.

@lilypond[fragment,quote,ragged-right,verbatim,relative=2]
\set Score.markFormatter = #format-mark-numbers
c1 \mark \default
c1 \mark \default
\set Score.markFormatter = #format-mark-box-numbers
c1 \mark \default
c1 \mark \default
c1
@end lilypond

El archivo @file{scm/@/translation@/-functions@/.scm} contiene las definiciones de
@code{format-mark-numbers} (el formato por omisión),
@code{format-mark-box-numbers},
@code{format-mark-letters} y @code{format-mark-box-letters}.
Se pueden usar éstos como inspiración para otras funciones de formateo.

Podemos utilizar @code{format-mark-barnumbers}, @code{format-mark-box-barnumbers}
y @code{format-mark-circle-barnumbers} para obtener números de compás en lugar de
números o letras secuenciales.

Otros estilos de marca de ensayo se pueden especificar de forma manual

@example
\mark "A1"
@end example

@noindent
@code{Score.markFormatter} no afecta a las marcas que se especifican de esta forma.
Sin embargo, es posible aplicar un elemento @code{\markup} a la cadena.

@example
\mark \markup@{ \box A1 @}
@end example

@cindex segno
@cindex coda
@cindex D.S al Fine

Los glifos musicales (como el segno) se pueden imprimir dentro de un elemento
@code{\mark}

@lilypond[fragment,quote,ragged-right,verbatim,relative]
c1 \mark \markup { \musicglyph #"scripts.segno" }
c1 \mark \markup { \musicglyph #"scripts.coda" }
c1 \mark \markup { \musicglyph #"scripts.ufermata" }
c1
@end lilypond

@noindent
Consulte @ref{The Feta font} para ver una lista de los símbolos que se pueden imprimir
con @code{\musicglyph}.

Para ver formas comunes de trucar la colocación de las marcas de ensayo, consulte @ref{Text marks}.

@seealso

En este manual: @ref{Text marks}.

Referencia del programa: @internalsref{RehearsalMark}.

Archivos de inicio: @file{scm/@/translation@/-functions@/.scm} contiene la definición
de @code{format-mark-numbers} y de
@code{format-mark-letters}.  Se pueden usar como inspiración para escribir otras
funciones de formateo.

Ejemplos: @lsr{parts,rehearsal-mark-numbers.ly}


@node Special rhythmic concerns
@subsection Special rhythmic concerns


@menu
* Grace notes::                 
* Aligning to cadenzas::        
* Time administration::         
* Proportional notation (introduction)::  
@end menu

@node Grace notes
@unnumberedsubsubsec Grace notes

@funindex \grace
@cindex ornamentos
@cindex mordentes
@cindex appoggiatura
@cindex acciaccatura

Los mordentes y notas de adorno son ornamentos escritos.  El más común es la
acciaccatura o mordente de una nota, que se debe tocar muy corta.  Se
denota mediante una corchea pequeña, ligada, con un corchete tachado o
atravesado por una barrita.  La appoggiatura es una nota de adorno que
toma una fracción fija de la nota principal, y se denota como una nota
pequeña, ligada, sin tachar.  Ambas se introducen con los comandos
@code{\acciaccatura} y @code{\appoggiatura}, como se muestra en el ejemplo siguiente

@lilypond[quote,ragged-right,relative=2,verbatim,fragment]
b4 \acciaccatura d8 c4 \appoggiatura e8 d4
\acciaccatura { g16[ f] } e4
@end lilypond

Ambas son formas especiales del comando @code{\grace}.  Al anteponer
esta palabra a una expresión musical se crea una nueva expresión, que
se imprime en un tipo más pequeño y no ocupa ningún tiempo lógico en el compás.

@lilypond[quote,ragged-right,relative=2,verbatim,fragment]
c4 \grace c16 c4
\grace { c16[ d16] } c2 c4
@end lilypond

@noindent
Al contrario que @code{\acciaccatura} y @code{\appoggiatura}, el comando
@code{\grace} no inicia una ligadura.

@cindex timing, internal

Internamente, la cuenta del tiempo para las notas de adorno se hace
utilizando un segundo contador, el contador @q{de adorno}.  Cada
instante en el tiempo comprende dos números racionales: uno denota el tiempo
lógico, y el otro denota el tiempo de adorno.  El ejemplo anterior se muestra a continuación con vectores de tiempo

@lilypond[quote,ragged-right]
<<
  \relative c''{
    c4 \grace c16 c4 \grace {
    c16[ d16] } c2 c4
  }
  \new Lyrics \lyricmode {
    \override LyricText #'font-family = #'typewriter

    \markup { (0,0) } 4
    \grace { \markup {
      ( \fraction 1 4 , \fraction -1 16 ) } 16 }
    \markup { (\fraction 1 4 , 0 ) } 4
    \grace {
      \markup { (\fraction 2 4 , \fraction "-1" 8 ) } 16
      \markup { (\fraction 2 4 , \fraction "-1" 16 ) } 16
    }
    \markup { ( \fraction 2 4 , 0 ) }
  }
>>
@end lilypond

La colocación de las notas de adorno se sincroniza entre los distintos
pentagramas.  En el siguiente ejemplo, hay dos semicorcheas de adorno
por cada corchea de adorno

@lilypond[quote,ragged-right,relative=2,verbatim,fragment]
<< \new Staff { e4 \grace { c16[ d e f] } e4 }
   \new Staff { c4 \grace { g8[ b] } c4 } >>
@end lilypond

@funindex \afterGrace

Si quiere acabar una nota con un adorno, use el comando
@code{\afterGrace}.  Toma dos argumentos: la nota principal y las
notas de adorno que siguen a la nota principal.

@lilypond[ragged-right, verbatim,relative=2,fragment]
c1 \afterGrace d1 { c16[ d] } c4
@end lilypond

Esto pondrá las notas de adorno después de un @q{espacio} que dura 3/4
de la longitud de la nota principal.  La fracción 3/4 se puede cambiar
estableciendo @code{afterGraceFraction}, por ejemplo

@example
#(define afterGraceFraction (cons 7 8))
@end example

@noindent
pondrá la nota de adorno a 7/8 de la nota principal.

Se puede conseguir el mismo efecto de forma manual haciendo

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
\new Voice {
  << { d1^\trill_( }
     { s2 \grace { c16[ d] } } >>
  c4)
}
@end lilypond

@noindent
Ajustando la duración de la nota de desplazamiento (aquí es una
blanca), se ajusta el espacio entre la nota principal y la de adorno.

Una expresión musical @code{\grace} introduce ajustes de tipografía especiales,
por ejemplo para producir un tipo más pequeño y para fijar las
direcciones.  Por ello, cuando se introducen trucos para la
presentación, deben ir dentro de la expresión de adorno, por ejemplo:

@lilypond[quote,ragged-right,fragment,verbatim,relative=2]
\new Voice {
  \acciaccatura {
    \stemDown
    f16->
    \stemNeutral
  }
  g4
}
@end lilypond

@noindent
Las sobreescrituras (overrides) también se deben deshacer dentro de la expresión de adorno.

La disposición de las expresiones de adorno se pueden cambiar a lo largo
de la música usando la función @code{add-grace-property}.  El
siguiente ejemplo suprime la definición de la dirección de la
@code{Stem} (plica) para este adorno, y así las plicas no siempre apuntan hacia arriba.

@example
\new Staff @{
  #(add-grace-property 'Voice 'Stem 'direction '())
  @dots{}
@}
@end example

@noindent
Otra opción es modificar las variables @code{startGraceMusic},
@code{stopGraceMusic}, @code{startAcciaccaturaMusic},
@code{stopAcciaccaturaMusic}, @code{startAppoggiaturaMusic} y
@code{stopAppoggiaturaMusic}.  Hay más información en el archivo
@file{ly/@/grace@/-init@/.ly}.

@noindent
La barrita que cruza el corchete de las acciaccaturas se puede obtener
en otras situaciones mediante @code{\override Stem  #'stroke-style = #"grace"}.


@commonprop

Se puede forzar que las notas de adorno utilicen espaciado flotante,

@lilypond[relative=2,ragged-right]
<<
  \override Score.SpacingSpanner #'strict-grace-spacing = ##t
  \new Staff {
     c'4
     \afterGrace
     c'4
     { c'16[ c'8 c'16] }
     c'4
  }  
  \new Staff {
     c'16[ c'16 c'16 c'16]
     c'16[ c'16 c'16 c'16]
     c'4
  }
>>
@end lilypond


@seealso

Referencia del programa: @internalsref{GraceMusic}.


@knownissues

Una partitura que comienza con una expresión @code{\grace} requiere una declaración explícita
@code{\new Voice} pues en caso contrario la nota principal y la de adorno
acabarán en pentagramas distintos.

La sincronización de las notas de adorno también puede acarrear sorpresas.  La notación de pentagramas,
como armaduras, líneas divisorias, etc., se sincronizan también.  Ponga cuidado
cuando mezcle pentagramas con adornos y sin adornos, por ejemplo

@lilypond[quote,ragged-right,relative=2,verbatim,fragment]
<< \new Staff { e4 \bar "|:" \grace c16 d4 }
   \new Staff { c4 \bar "|:" d4 } >>
@end lilypond

@noindent
Esto se puede remediar insertando desplazamientos de adorno de las
duraciones correspondientes en los otros pentagramas.  Para el ejemplo anterior

@lilypond[quote,ragged-right,relative=2,verbatim,fragment]
<< \new Staff { e4 \bar "|:" \grace c16 d4 }
   \new Staff { c4 \bar "|:" \grace s16 d4 } >>
@end lilypond

Las secciones de adorno sólo se deben usar dentro de expresiones de
música secuenciales.  No están contemplados el anidado ni la
yuxtaposición de secciones de adorno, y podría producir caídas u otros errores.



@node Aligning to cadenzas
@unnumberedsubsubsec Aligning to cadenzas

En un contexto orquestal, las cadenzas presentan un problema especial:
al construir una partitura que tiene una cadenza, todos los demás instrumentos
deben saltar tantas notas como la longitud de la cadenza,
pues en caso contrario empezarán demasiado pronto o tarde.

Una solución a este problema son las funciones @code{mmrest-of-length}
y @code{skip-of-length}.  Estas funciones de Scheme toman un fragmento de música
como argumento y generan un @code{\skip} o silencio multicompás, de la longitud exacta
del fragmento.  El uso de @code{mmrest-of-length} se muestra
en el ejemplo siguiente.

@lilypond[verbatim,ragged-right,quote]
cadenza = \relative c' {
  c4 d8 << { e f g } \\ { d4. } >>
  g4 f2 g4 g
}

\new GrandStaff <<
  \new Staff { \cadenza c'4 }
  \new Staff {
    #(ly:export (mmrest-of-length cadenza))
    c'4
  }
>>
@end lilypond


@node Time administration
@unnumberedsubsubsec Time administration

UNTRANSLATED NODE: IGNORE ME


@node Proportional notation (introduction)
@unnumberedsubsubsec Proportional notation (introduction)

UNTRANSLATED NODE: IGNORE ME

