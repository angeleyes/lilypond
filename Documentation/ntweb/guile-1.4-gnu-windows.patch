diff -urN ../guile-1.4/ChangeLog ./ChangeLog
--- ../guile-1.4/ChangeLog	Fri Jun  2 15:17:01 2000
+++ ./ChangeLog	Mon Jun  5 15:18:32 2000
@@ -1,3 +1,12 @@
+2000-06-05    <janneke@gnu.org>
+ 
+	* guile-config/cross-guile-config.in: Simple shell script to
+ 	take over guile-config's functionality for cross-compilation.
+ 	It will be installed as ${target}-guile-config.
+ 
+ 	* guile-config/Makefile.am: Provide for cross-guile-config.in
+ 	and its targets.
+ 
 2000-06-21  Mikael Djurfeldt  <mdj@thalamus.nada.kth.se>
 
 	* Guile 1.4 released.
diff -urN ../guile-1.4/configure.in ./configure.in
--- ../guile-1.4/configure.in	Fri Jun  2 08:44:27 2000
+++ ./configure.in	Mon Jun  5 15:13:58 2000
@@ -21,6 +21,7 @@
 dnl  Boston, MA 02111-1307, USA.
 
 AC_INIT(Makefile.in)
+AC_CANONICAL_SYSTEM
 . $srcdir/GUILE-VERSION
 AM_INIT_AUTOMAKE($PACKAGE, $VERSION, no-define)
 AM_MAINTAINER_MODE
diff -urN ../guile-1.4/guile-config/Makefile.am ./guile-config/Makefile.am
--- ../guile-1.4/guile-config/Makefile.am	Wed Jan 12 22:42:41 2000
+++ ./guile-config/Makefile.am	Mon Jun  5 15:17:37 2000
@@ -20,9 +20,9 @@
 ##   to the Free Software Foundation, Inc., 59 Temple Place, Suite
 ##   330, Boston, MA 02111-1307 USA
 
-bin_SCRIPTS=guile-config
-CLEANFILES=guile-config
-EXTRA_DIST=guile-config.in guile.m4
+bin_SCRIPTS=guile-config @target@-guile-config
+CLEANFILES=guile-config @target@-guile-config
+EXTRA_DIST=guile-config.in guile.m4 cross-guile-config.in
 
 ## FIXME: in the future there will be direct automake support for
 ## doing this.  When that happens, switch over.
@@ -39,6 +39,21 @@
 	    -e s:@-GUILE_VERSION-@:${GUILE_VERSION}:
 	chmod +x guile-config.tmp
 	mv guile-config.tmp guile-config
+
+LDFLAGS=@LDFLAGS@
+CFLAGS=@CFLAGS@
+CPPFLAGS=@CPPFLAGS@
+ 
+@target@-guile-config: cross-guile-config.in
+	rm -f $<.tmp
+	sed < ${srcdir}/$< > $<.tmp \
+	    -e s:@-SHELL-@:${SHELL}: \
+	    -e s:@-GUILE_VERSION-@:${GUILE_VERSION}:\
+	    -e s:@-PREFIX-@:${prefix}: \
+	    -e "s:@-CPPFLAGS-@:${CPPFLAGS}:" \
+	    -e "s:@-LDFLAGS-@:${LDFLAGS}:"
+	chmod +x $<.tmp
+	mv $<.tmp $@
 
 ## Get rid of any copies of the configuration script under the old
 ## name, so people don't end up running ancient copies of it.
diff -urN ../guile-1.4/guile-config/cross-guile-config.in ./guile-config/cross-guile-config.in
--- ../guile-1.4/guile-config/cross-guile-config.in	Thu Jan  1 01:00:00 1970
+++ ./guile-config/cross-guile-config.in	Mon Jun  5 15:13:58 2000
@@ -0,0 +1,16 @@
+#!@-SHELL-@
+# target-guile-config.in
+case $1 in
+	--version)
+		echo "@-GUILE_VERSION-@"
+		exit 0
+		;;
+	compile)
+		echo "@-CPPFLAGS-@ -I @-PREFIX-@/include/guile"
+		exit 0
+		;;
+	link)
+		echo "-L @-PREFIX-@/lib -lguile @-LDFLAGS-@"
+		exit 0
+		;;
+esac
