% -*-latex-*-

% this document should be run through the mudela-book script after lilypond
% has been installed.  The rules have been precooked into the
% Documentation/Rules.make file; do 
%
%   make out/introduction.dvi
%
% or
%
%   mudela-book --outdir=out/ --outname=introduction.mudtex introduction.doc
%   latex '\nonstopmode \input out/introduction.mudtex'


\documentclass{article}
\usepackage{a4wide}
\title{Introduction to GNU LilyPond}
\author{Jan Nieuwenhuizen}
\date{March 2, 1998}

% ugh: trick to get examples not generate par
% these are for 16pt
\def\mudelapaperlinewidth{-28.452756}%
\def\mudelapaperindent{28.452756}%
\def\mudelapaperrulethickness{0.400000}%
\def\mudelapaperbarsize{16.000000}%
\def\mudelapaperinterline{4.000000}%
\def\mudelapapernotewidth{5.930000}%
\def\mudelapaperwholewidth{8.640000}%
\def\mudelapaperunitspace{22.000000}%
\def\mudelapaperbasicspace{4.000000}%
\def\mudelapapergeometric{0.000000}%
\def\mudelapaperarithmetic_basicspace{2.000000}%
\def\mudelapaperarithmetic_multiplier{4.800000}%
\def\mudelapaperinterbeam{3.140000}%
\def\mudelapapergourlay_energybound{100000.000000}%
\def\mudelapapergourlay_maxmeasures{14.000000}%

% ful of pars, needs the above
\input lilyponddefs
% generates par
\musixsixteendefs
\def\musixsixteendefs{}
% generates par
\turnOnPostScript%
\def\turnOnPostScript{}
% 

\begin{document}
\maketitle

\def\interexample{\hskip15mm$\Longrightarrow$\hskip15mm}
\def\preexample{}
\def\postexample{\par\medskip}

% ugh, howto?
% \def\frag{\vbox to 2\mudelapaperbarsize pt{\vss}
% \def\interexample{\vss}\hskip15mm$\Longrightarrow$\hskip15mm}
% \def\preexample{\vbox to 2\mudelabarsize pt{\vss}
% \def\postexample{\vss}\par\medskip}

\def\file#1{{\texttt{#1}}}
\setcounter{secnumdepth}{-1}

\emph{\Large ***Under construction***}

\section{Introduction}
This document should provide a gentle introduction to 
LilyPond's input language, Mudela.
For completeness and nifty features see 
\verb+input/*.ly+
and
\verb+lily/parser.y, lily/lexer.l+.


\section{Notes: pitches and durations}

\begin[fragment,verbatim]{mudela}
c
\end{mudela}

\begin[fragment,verbatim]{mudela}
c d e f g a b
\end{mudela}

Durations are entered as reciproce values
\begin[fragment,verbatim]{mudela}
a1 | a2 a | a4 a a a
\end{mudela}
and default to the last previously used duration.

Now we can write a little tune
\begin[fragment,verbatim]{mudela}
c d e c | c d e c | e f g2 | e4 f g2
\end{mudela}
note the explicit duration change for 
the quarter e in the last measure.

Same for notes with flags
\begin[fragment,verbatim]{mudela}
a8 a16 a32 a64 a128
\end{mudela}

\begin[fragment,verbatim]{mudela}
c c' c''
\end{mudela}

\begin[fragment,verbatim]{mudela}
a 'a ''a
\end{mudela}

\section{Slurs and Ties}

A tie connects two adjacent noteheads

\begin[fragment,verbatim]{mudela}
c' ~ c
\end{mudela}

Whereas a slur rather connects `chords', 
and tries to avoid crossing stems.

\begin[fragment,verbatim]{mudela}
c'( )c
\end{mudela}

A (legato) slur can span several notes
\begin[fragment,verbatim]{mudela}
c'( d e )c
\end{mudela}

\section{Beams and plets}

\begin[fragment,verbatim]{mudela}
[a8 a] [a16 a a a]
\end{mudela}

% [2/3 a8 a a]1/1
\begin[fragment,verbatim]{mudela}
[/3 a8 a a]/1
\end{mudela}

\begin[fragment,verbatim]{mudela}
\[/3 a4 a8\]
\end{mudela}

\section{Commands}

\begin[fragment,verbatim]{mudela}
\clef "bass"; 'c
\end{mudela}

\begin[fragment,verbatim]{mudela}
\meter 3/4; c g g |
\end{mudela}

\begin[fragment,verbatim]{mudela}
\key fis cis;
'g 'a 'b cis d e fis g'
\end{mudela}

\section{Example}

A Mudela file needs some red tape

\begin[verbatim]{mudela}
\score{
	\melodic{
		\octave c';
		c d e c
	}
}
\end{mudela}

\section{Lyrics}

% this nesting syntax sucks
\begin[verbatim]{mudela}
\score{
	< 
		\melodic \type Staff = bla < \melodic{\octave c'; c d e c} >
% huh?
%		\lyric \type Lyrics = bli < \lyric{Fre- re Ja- que} >
        >
}
\end{mudela}

\section{Variables}

\end{document}

