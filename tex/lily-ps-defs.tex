%
% WARNING: don't leave blank lines in the PS-code; they are
% transformed into \par 
%

%
% header info (macros/defs, etc) should go into a \special{! ... }, 
% note the ! sign.  See dvips.info for details.
%

% Use of 
% /foo { operatorname } bind def
%
% ``compiles'' operatorname binding in the body of foo, making
% the code faster, and more reliable (less flexible)

{%
   \def\par{ }%         %Ugh.  Don't try this at home, kids!
   % neat file-include trick by Piet van Oostrum <piet@cs.uu.nl>
   \newread\defin 
   \newtoks\toksfiledefi\newtoks\toksfiledefii 
   \def\ifnot#1{#1\else\expandafter\expandafter\fi\iffalse\iftrue\fi} 
   \def\filedef#1#2{%#1=command name, #2=file name 
           \openin\defin=#2\relax\def#1{} 
           \ifeof\defin
                   \message{***************** CAN NOT OPEN #2 ********************}
                   \end
           \fi 
           \loop\ifnot{\ifeof\defin}\read\defin to\tempfiledef
           \toksfiledefi=\expandafter{#1}% 
           \toksfiledefii=\expandafter{\tempfiledef}% 
   %        \expandafter\special\expandafter{!\the\toksfiledefi\the\toksfiledefii}\repeat%
          \global\edef#1{\the\toksfiledefi\the\toksfiledefii}\repeat%
   }
   %
   % This seems a little backwards, but we don't want to include the PS
   % stuff too early
   %
   \filedef\includelilyps{lily.ps}%
   \expandafter\special{! \includelilyps }
}

