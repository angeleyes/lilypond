#!/bin/sh
# autowild
# for those of you that have no wild-automake

# ugh
verbose=true
if test x$1 = x-v; then
	verbose=echo
fi

#ugh
# PERL=@PERL@
PERL=/usr/bin/perl

WILD_MAKEFILES=$(find . -name \*.wild)
for i in $WILD_MAKEFILES; do
	dir=$(dirname $i)
	wild=$(basename $i)
	make=$(basename $i .wild)
	$verbose "autowild: creating $dir/$make"
	TOPDIR=`pwd`
	(cd $dir
	rm -f $make
	echo "# Automatically generated from $i by $0" > $make
	echo "# Do not edit" >> $make
	cat $wild | $PERL $TOPDIR/bin/wild-perl >> $make
	)
done
	
