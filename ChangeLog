2002-12-15  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* mf/feta-nummer-code.mf: some kerning pairs.

2002-12-14  Rune Zedeler  <rz@localhost.localdomain>

	* scm/output-lib.scm (set-bar-number-visibility): Context-function
	Added.

	* Documentation/user/refman.itely (Bar numbers):
	set-bar-number-visibility added, modulo-bar-number removed again
	(sorry).

2002-12-14  Heikki Junes <hjunes@cc.hut.fi>

	* scm/output-lib.scm (modulo-bar-number-visible): add function.

	* Documentation/user/refman.itely: add modulo-bar-number-visible.

	* Documentation/user/music-glossary.tely: translate into Finnish.

2002-12-10  Heikki Junes <hjunes@cc.hut.fi>

	* lilypond-mode.el: add shortcut for 2midi

	* lilypond-font-lock.el: fontify lyrics

2002-12-10  Rune Zedeler  <rz@daimi.au.dk>

	* scm/drums.scm : use 1.7.x names.

	* input/regression/drums.ly : Don't use << chords >>

2002-12-10  Heikki Junes <hjunes@cc.hut.fi>

	* lilypond-mode.el: tidy, add TODO

	* make/lilypond.mandrake.spec.in: install-info quietly.

2002-12-09  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* input/test/markup.ly: use new syntax.

2002-12-08  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* ly/params-init.ly (interscoreline): add word-space

	* input/test/metronome.ly (eighthNote): idem.

	* input/test/script-priority.ly: use new markup

	* lily/parser.yy (markup): allow HEAD markup0 markup1 

	* lily/molecule-scheme.cc (ly:molecule-translate): new function.

	* lily/parser.yy (gen_text_def): bugfix.
	(full_markup): allow markup identifier.

2002-12-09  Heikki Junes <hjunes@cc.hut.fi>

	* lilypond-mode.el (LilyPond-kill-job): Kill all Lilypond compiling
	jobs at the same time. Add horizontal lines to Command menu.
	Allow one compiling job -- propose killing others before a new one.

	* lilypond.words: add markup, teeny, etc.

2002-12-08  Heikki Junes <hjunes@cc.hut.fi>

	* lilypond-mode.el: Use LilyPond-command-alist for Midi and MidiAll.
	Allow only one type of midi process; launching Midi either stops
	midis or plays the current midi and launching MidiAll stops midis
	and starts timidity with "-ia", i.e., XAW-interface. Bind C-c C-return 
	to MidiAll. Choose "timidity-[1-9].ly" etc. files to MidiAll.

2002-12-07  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/text-engraver.cc (process_acknowledged_grobs): use new
	markup  for new markup texts.

	* lily/mark-engraver.cc (process_music): idem
	
	* lily/instrument-name-engraver.cc (create_text): idem

	* scm/new-markup.scm (magnify-markup): new function.

	* scm/molecule.scm (stack-lines): bugfix.

	* lily/font-interface.cc (get_font): take font-magnification from
	alist chain.

2002-12-06  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/molecule-scheme.cc: move scheme functions to separate file.

	* lily/font-metric.cc  (ly_get_glyph): new function. 
	
	* scm/new-markup.scm (column-markup): use baseline-skip for columns.
	(italic-markup, dynamic-markup): new functions
	(font-markup): new function

	* lily/molecule.cc (ly_molecule_combined_at_edge): optional
	padding and minimum

2002-12-07  Rune Zedeler  <rz@daimi.au.dk>

	* lily/accidental-engraver.cc:
	Bugfix: Also print forced accidentals when autoAccidentals = \turnOff

2002-12-06  Heikki Junes <hjunes@cc.hut.fi>

	* lilypond.vim:
	* lilypond-font-lock.el: Put \longa as duration. Accept only 
	[a-zA-Z] for user defined identifiers. Separate note cases 
	with and without a duration (allow cis\longaX).

	* lilypond.words: Add words from Info.

2002-12-06  Mats Bengtsson  <mats.bengtsson@s3.kth.se>

	* stepmake/stepmake/c++-rules.make: Compile fix (bison 1.28)

2002-12-05  Heikki Junes <hjunes@cc.hut.fi>

	* lilypond-mode.el: Propose reverting buffer before a command if
	it was edited with an another editor.

2002-12-05  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/molecule.cc (ly_translate_molecule): new function

	* python/GNUmakefile (INSTALLATION_DIR1): install Python module
	into libdir

	* autogen.sh (srcdir): copy aclocal.m4 if newer. 

	* stepmake/aclocal.m4: STEPMAKE_LIBDIR.

2002-12-04  Heikki Junes <hjunes@cc.hut.fi>

	* lilypond.words: take \words from Info-index.

2002-12-04  Jan Nieuwenhuizen  <janneke@gnu.org>

	* scm/sodipodi.scm: Add instruction for generating pfa fonts.

2002-12-02  Heikki Junes <hjunes@cc.hut.fi>

	* make/lilypond.mandrake.spec.in: use %make and %makeinstall.

2002-12-01  Heikki Junes <hjunes@cc.hut.fi>

	* make/lilypond.mandrake.spec.in: set menu-items to lilypond-info 
	and lilypond-documentation.

2002-12-02  Jan Nieuwenhuizen  <janneke@gnu.org>

	* lily/parser.yy: Compile fix (bison 1.75).

2002-12-01  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* VERSION: 1.7.9 released

	* scm/music-functions.scm (shift-one-duration-log): refactor.
	Use music-map.

	* input/regression/chord-tremolo.ly (texidoc): add dot test.

	* NEWS: update.

	* lily/font-interface.cc (get-font): take alist chain i.s.o. alist
	argument
	
	* scm/music-functions.scm (display-music): new function
	(music-map): change arg order.

	* input/regression/new-markup-syntax.scm: new file

	* lily/parser.yy (markup): add \markup { .. } syntax.

	* scm/new-markup.scm (override-markup): new function
	(lookup-markup): new function
	(music-markup): new function
	(lookup-markup-command): use markup-signature to store argument
	format for parser.

	* lily/lexer.ll: preliminary \markup syntax. 

2002-11-30  Heikki Junes <hjunes@cc.hut.fi>

	* make/lilypond.mandrake.spec.in: remove extra %changelog entries,
	add pre/post-dependencies and menus with icons from source.

	* Documentation/pictures/lilypond-48x48.xpm:
	* Documentation/pictures/lilypond-32x32.xpm:
	* Documentation/pictures/lilypond-16x16.xpm: new files, background
	transparent.

	* stepmake/stepmake/generic-targets.make:
	* stepmake/stepmake/toplevel-targets.make: Add make rpm-mandrake.

2002-11-29  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* input/regression/music-map.ly (texidoc): new file.

	* scm/music-functions.scm (music-map): new function

2002-11-28  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/ligature-engraver.cc (create_ligature_spanner): fix fixes.

2002-11-28  Heikki Junes <hjunes@cc.hut.fi>

	* input/test/to-xml.ly:
	* lily/ligature-engraver.cc: Fixes documentation.

	* lilypond.mandrake.spec.in:
	* lilypond.redhat.spec.in: Add lilypond.words.

	* Documentation/user/refman.itely: Mention Info inside emacs.
	
	* lilypond.suse.spec.in:
	* lilypond.redhat.spec.in: 
	* lilypond.mandrake.spec.in: Set root-owner for doc (tobbe@nyvalls.se). 

2002-11-27  Jan Nieuwenhuizen  <janneke@gnu.org>

	* scripts/ly2dvi.py (run_dvips): Use ly.read_pipe () instead of
	os.popen.read ().

2002-11-27  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* scripts/ly2dvi.py (include_path): print warning if failing anything.

	* python/lilylib.py (error): add space

2002-11-25  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* GNUmakefile.in (EXTRA_DIST_FILES): add lilypond.words for
	distribution.

2002-11-24  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/paper-outputter.cc (Paper_outputter): close port when
	finishing score.

2002-11-26  Jan Nieuwenhuizen  <janneke@gnu.org>

	* scm/sodipodi.scm: Fixes.

2002-11-26  Heikki Junes <hjunes@cc.hut.fi>

	* lilypond-mode.el: Look shortcuts in menu from keymap, if possible.

	* buildscripts/make-font-dir.py: Fix. 

2002-11-25  Heikki Junes <hjunes@cc.hut.fi>

	* lilypond-mode.el: Add support for Info inside Emacs.

2002-11-24  Jan Nieuwenhuizen  <janneke@gnu.org>

	* buildscripts/make-font-dir.py: 
	* mf/GNUmakefile: Make sodipodi font map.

	* scm/sodipodi.scm: Add more output functions.

	* mf/feta-nummer.mf: 
	* mf/feta-beugel.mf: Add font_coding_scheme.

	* lily/paper-outputter.cc (output_header): Fix creator string.

2002-11-23  Heikki Junes <hjunes@cc.hut.fi>

	* lilypond-mode.el (LilyPond-autocompletion): invoked with
	[S-iso-lefttab], fixes at bol and eol, descriptive variable names.

	* lilypond.words: add two (Everybody can add/remove words now!).

	* debian/rules:
	* make/lilypond.suse.spec.in:
	* make/lilypond.mandrake.spec.in:
	* make/lilypond.redhat.spec.in: Add lilypond.words for emacs-files.

	* Documentation/user/refman.itely: Mention autocompletion.

2002-11-23  Jan Nieuwenhuizen  <janneke@gnu.org>

	* scripts/ly2dvi.py: Add paper sizes.

	* lily/timing-engraver.cc: 
	* lily/time-signature.cc: 
	* lily/span-bar.cc: 
	* lily/grob-scheme.cc: Code formatting fixes.

	* scm/sodipodi.scm: 
	* scm/sketch.scm:
	* buildscripts/mf-to-table.py: 
	* buildscripts/make-font-dir.py: Font testing.

2002-11-23  Heikki Junes <hjunes@cc.hut.fi>

	* lilypond-mode.el (LilyPond-autocompletion): deletes end-of-word,
	inserts try-completion and shows all-completions.

	* lilypond.words: '\' -> '\\'

	* lilypond-mode.el: load libraries in the end, lilypond.words defines
	LilyPond-keywords, LilyPond-identifiers and LilyPond-reserved-words.
	
	* lilypond-font-lock.el: Use LilyPond-keywords, LilyPond-identifiers
	and LilyPond-reserved-words.
	
2002-11-22  Heikki Junes <hjunes@cc.hut.fi>

	* lilypond-mode.el (LilyPond-words-filename): find lilypond.words
	from load-path.
	
	* lilypond-mode.el (LilyPond-autocompletion): shows completions in
	the mini-buffer with Control-Shift-c.
	
2002-11-21  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/parser.yy (tempo_event): use tempo-unit for \tempo
	duration. This fixes \tempo taking time.

2002-11-21  Mats Bengtsson  <mats.bengtsson@s3.kth.se>

	* lily/volta-engraver.cc (process_acknowledged_grobs): 
	Allow for text markup in repeatCommands. 

2002-11-21  Heikki Junes <hjunes@cc.hut.fi>

	* lilypond-mode.el (LilyPond-insert-string): new function, use it
	in LilyPond-insert-tag-notes. LilyPond-insert-between, new function.
	Get rid of skeleton.el-dependency.

	* Documentation/topdocs/INSTALL.texi: tell how to get syntax-highlight.

2002-11-20  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/beam-engraver.cc (stop_translation_timestep): reset
	now_stop_ev_

	* lily/scm-option.cc: add parse-protect to ly:set-option

	* lily/lexer.ll: set errorlevel if GUILE fails during parse.

2002-11-19  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/include/ligature-bracket.hh: removed
	* lily/ligature-bracket.cc: removed

	* lilypond-mode.el (LilyPond-expand-alist): set LaTeX extension to
	.tex

	* lily/beam.cc (set_beaming): don't change beam count on rests.
	(brew_molecule): always set flag-width > 0.

2002-11-19  Heikki Junes <hjunes@cc.hut.fi>

	* lilypond-mode.el: LilyPond-imenu-generic-re: only alphabetic
	chars, remove instructions; instead, refer to lilypond-init.el and
	Documentation/topdocs/INSTALL.texi.

	* lilypond.words: add identifiers and reserved words.

	* Documentation/topdocs/INSTALL.texi: separate sections for installing
	files and adding a load-path.

	* lilypond-init.el: Instructions, extracted from 
	Documentation/topdocs/INSTALL.texi. 
	
2002-11-19  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* VERSION: 1.7.8 released 

	* lily/grob.cc (warning): better robustness fix.

2002-11-19 Juergen Reuter  <reuter@ipd.uka.de>

	* lily/cluster-engraver.cc: bugfix: use protected scm upon columns

	* lily/cluster-engraver.cc: stick better to variable naming
	conventions

	* lily/cluster-engraver.cc: bugfix: delay typesetting of cluster
	until stop_translation_timestep()

	* lily/cluster-engraver.cc, lily/cluster.cc: design fix: pass
	min/max coordinates to backend, but no musical info such as
	pitches

	* lily/cluster.cc: robustness fix: do not crash upon empty cluster

	* lily/grob.cc: robustness fix: warning(): do not crash if
	cause is not set

	* lily/ligature-bracket-engraver.cc, scm/grob-description.scm: use
	the much more elaborated tuplet brackets than the very naive and
	simple ligature bracket grob

2002-11-19  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* Documentation/user/refman.itely (Analysis brackets): add
	horizontal bracket doco.

	* ly/property-init.ly (setMmRestFermata): added.

	* Documentation/user/refman.itely (Multi measure rests): fermatas
	on mm rests.

	* input/regression/apply-context.ly (texidoc): new file

	* lily/parser.yy (Simple_music): \applycontext #FUNCTION allows
	code to be executed during interpretation. Possible applications:
	smart octavation, more advanced bar checks. 

	* lily/apply-context-iterator.cc: new file.

2002-11-18  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* input/test/new-markup.ly: new file.

	* lily/text-item.cc (text_to_molecule): new function

	* scm/new-markup.scm (lambda): new file

	* lily/function-documentation.cc (ly_add_function_documentation):
	add proc property as well

2002-11-17  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* Documentation/user/music-glossary.tely (Top): add custos.

2002-11-18  Heikki Junes <hjunes@cc.hut.fi>

	* Documentation/topdocs/INSTALL.texi: advise how to include source
	path to Emacs load-path and improve language.

2002-11-16  Jan Nieuwenhuizen  <janneke@gnu.org>

	* GNUmakefile.in: config.h message fix.

	* autogen.sh:
	* aclocal.m4: Regenerate.

	* configure.in: 
	* config.make.in: 
	* stepmake/config.make.in: 
	* stepmake/configure.in: 
	* stepmake/autogen.sh: 
	* stepmake/aclocal.m4: Update for autoconf 2.56.

2002-11-16  Heikki Junes <hjunes@cc.hut.fi>

	* Documentation/topdocs/INSTALL.texi: instructions for an user how
	to install Emacs-mode. Instructions how to use vim-mode.

2002-11-14  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* scm/music-types.scm (music-descriptions): no length for tempo event.

	* input/*.ly: add \version everywhere.
	
	* input/*.ly: update syntax to 1.7 + new-chords.

	* VERSION: 1.7.7 released.
	
	* Documentation/user/*.tely: new chord syntax.

	* input/regression/[bc]*.ly (texidoc): syntax updates.
	
2002-11-13  Heikki Junes <hjunes@cc.hut.fi>

	* lilypond.words: add vocabulary to be used in auto-completion

	* vimrc: autocompletion in Insert/Replace-mode with <Ctrn-N>

	* lilypond.vim: allow note name at EOF

2002-11-13  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* buildscripts/new-chords.py (edit): -e option: inline editing.

	* input/regression/a*.ly (texidoc): syntax updates.

	* Documentation/user/lilypond-book.itely (Integrating La@TeX{} and
	music): elucidations. 

2002-11-11 Juergen Reuter  <reuter@ipd.uka.de>

	* lily/include/lily-proto.hh, ly/engraver-init.ly,
	ly/spanners-init.ly, scm/grob-description.scm,
	scm/grob-property-description.scm, scm/music-types.scm,
	lily/cluster-engraver.cc, lily/cluster.cc,
	lily/include/cluster.hh, input/test/cluster.ly: cluster
	implementation

	* lily/include/lookup.hh, lily/lookup.cc, scm/pdf.scm
	ps/music-drawing-routines.ps, scm/ascii-script.scm, scm/ps.scm,
	scm/sketch.scm, scm/tex.scm: support for dots and polygons added

	* lily/lookup.cc: bugfix: fixed infinite loop in frame ()

	* mf/parmesan-heads.mf: bugfix: vaticana punctum set_char_box

	* scm/grob-description.scm: bugfix: by default, use default note
	head style when engraving ligatures

	* lily/note-heads-engraver.cc: bugfix: do not steal ligature events

	* lily/mensural-ligature-engraver.cc: bugfix: accept ligature
	events

	* lily/ligature-bracket-engraver.cc: bugfix: accept ligature events

	* input/test/ancient-font.ly: bugfix: style -> flag-style

	* lily/ligature-engraver.cc: indentation fix

	* lily/parser.yy: indentation fixes
	
2002-11-09  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* input/regression/measure-grouping.ly: more elaborate example.

	* lily/moment.cc: ly:add-moment, ly:mul-moment,
	ly:div-moment. New functions 

	* scm/music-functions.scm (set-time-signature): new function,
	allow inline time sig settings with measure grouping.

	* lily/parser.yy (command_element): move time sig construction
	into Scheme.

	* lily/side-position-interface.cc (out_of_staff): new function,
	like padding, but keep minimum distance from staff. Easier than
	linespanners (dynamics, pedals), but roughly the same effect.

2002-11-10 Heikki Junes  <hjunes@cc.hut.fi>

	* emacs-mode.el: Added spanish-note-replacements 
        (<carlos.betancourt@chello.be>).

	* vimrc: (Un)commenting with <(S-)F12>, tidy.

2002-11-08  Heikki Junes  <hjunes@cc.hut.fi>

	* lilypond.vim: Do not fontify cises, desis, etc.

	* vimrc: view dvi with <S-F6>

2002-11-08  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/lookup.cc (triangle): new function.

	* input/regression/measure-grouping.ly (texidoc): new file: show
	triangles and brackets for beat groups of 3 and 2.

	* lily/include/measure-grouping-spanner.hh (class
	Measure_grouping): new file.

	* lily/measure-grouping-spanner.cc (brew_molecule): new file

	* lily/measure-grouping-engraver.cc (class
	Measure_grouping_engraver): new file.

2002-11-06  Jan Nieuwenhuizen  <janneke@gnu.org>

	* Merge from stable:

	    cvs update -jlilypond_1_6_6 -jlilypond_1_6_6_1
	
	* ly/paper16-init.ly (paperSixteen): Bugfix: set fonts instead of
	stylesheet.

	* ly/paper19.ly: Include paper19-init.ly.

	* ly/paper19-init.ly: New file.

	* Documentation/user/tutorial.itely (First steps): Fix first
	example for font test.

	* input/tutorial/brahms-tweaked.ly: Fix by hand for font test.

	* ChangeLog: Add 1.7.6 release marker (see below).

	* stepmake/stepmake/python-module-vars.make (EXTRA_DIST_FILES):
	Add .py files.

2002-11-06  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* input/tutorial/sammartini.ly (bassvoices): to new syntax.

	* input/tutorial/*.ly: update to new syntax.

	* lily/parser.yy (Composite_music): new transpose syntax,
	\transpose FROM TO MUSIC. 

2002-11-04  Jan Nieuwenhuizen  <janneke@gnu.org>

	* scripts/lilypond-book.py: * scripts/ly2dvi.py: Fix: redirect
	latex progress/error output to stderr (by default this goes to
	stdout).  Show lilypond progress, even when not verbose.

	* python/lilylib.py (system): New optional parameter to control
	showing of progress.

	* scm/backend-documentation-lib.scm (check-dangling-properties):
	Fix error message.

	* lily/text-item.cc (ADD_INTERFACE): Remove align, magnify.  Add
	axis, extent.

	* scm/grob-property-description.scm (magnify): Remove.
	(extent, axis): Add.

2002-11-03  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* VERSION: Release 1.7.6.

	* scripts/convert-ly.py: more uniformization substitutions.

	* buildscripts/new-chords.py (sub_chords): new file.

2002-11-03  Jan Nieuwenhuizen  <janneke@gnu.org>

	* mf/GNUmakefile: Bugfix: Use actual fontname (.AFM FontName) for
	lilypond.map.  Include sauter fonts too.  Cleanups.

2002-11-02  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* Documentation/user/tutorial.itely (First steps): change to new
	chord/tie/slur/beam notation.

	* lily/parser.yy (event_that_take_dir): allow postfix notation for
	ties.

	* lily/new-tie-engraver.cc (process_acknowledged_grobs): new
	engraver. Process ties in postfix notation, i.e. c8-~ c

	* lilypond-mode.el (LilyPond-command-alist): run LaTeX by default.

	* input/regression/beam-postfix-notation.ly (texidoc): new file.

	* lily/parser.yy (event_that_take_dir): allows c8-[ for beams.

	* lily/beam-engraver.cc (try_music): accept new-beam-events

	* input/regression/chord-scripts.ly (texidoc): new file

	* lily/new-fingering-engraver.cc (acknowledge_grob):  also handle
	script-events.

	* scm/script.scm (default-script-alist): cleanup.

	* lily/script-engraver.cc (make_script_from_event): cleanup.

	* lily/lyric-combine-music-iterator.cc
	(Lyric_combine_music_iterator): remove superfluous events.
	(melisma_busy): new function. Fix broken melismas.

2002-10-31  Heikki Junes  <hjunes@cc.hut.fi>

	* vimrc: Add shortcuts for compiling, midi-playing and PS-viewing.
	Remove nonvalid settings. Use descriptive key names.
	Use <Return> to indicate the pressing of that key.

2002-10-30  Jan Nieuwenhuizen  <janneke@gnu.org>

	* scripts/lilypond-book.py (option_definitions): Typo.

	* scripts/ly2dvi.py: Updates.

	* python/lilylib.py (setup_environment, print_environment)
	(get_bbox, make_preview): Merge and remove from ly2dvi and
	lilypond-book.

	* scripts/lilypond-book.py: Use lilylib.  Cleanups.

	* .cvsignore: Remove some cruft.

	* make/lilypond-vars.make (PYTHONPATH): Add python's outdir to
	path.

	* scripts/ly2dvi.py: Use lilylib as module.  Fail gracefully if
	kpsexpand, kpsewhich, ps2pdf exit with error.  Cleanups and fixes
	throughout.

	* python/lilylib.py (quiet_system): Junk
	(system): Display error log upon failure.
	(read_pipe): New function.  Cleanups and fixes.

	* python/*.py: Rename from *.py.in.
	
	* make/substitute.make (ATVARIABLES): Add lilypond_datadir.

	* GNUmakefile.in (SUBDIRS): Move python before scripts.

2002-10-30  Jan Nieuwenhuizen  <janneke@gnu.org>

	* python/GNUmakefile: Bugfix: handle modules.

	* stepmake/stepmake/python-module-targets.make (default): Add
	compiled modules. 

	* stepmake/stepmake/python-module-rules.make: Add rule for byte
	compiling modules.

	* stepmake/stepmake/python-module-vars.make (OUT_PY_MODULES):
	Bugfix.  (OUT_PYC_MODULES): Add.

2002-10-30  Heikki Junes  <hjunes@cc.hut.fi>

	* make/lilypond.mandrake.spec.in: Repair info. Comment out menu.
	Use default paths. Refresh description.

2002-10-28  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* VERSION: 1.7.5 released

	* input/regression/finger-chords.ly (texidoc): new file.

	* lily/script-engraver.cc (process_music): remove scriptHorizontal
	support

	* lily/fingering-engraver.cc (process_music): remove kludgy
	scriptHorizontal stuff.

	* lily/script.cc: remove staff-support property.

	* lily/new-fingering-engraver.cc (add_fingering): new
	file. Fingering engraver for new style chords.

2002-10-27  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/parser.yy (bare_number): allow 4 \cm (without
	decimal dot). (should backport to 1.6?)

	* ly/declarations-init.ly: use Scheme for dimension defs.

	* lily/parser.yy (TODO): remove hard coded dimensions, add
	REAL NUMBER_IDENTIFIER production.

	* lily/rest-collision.cc (force_shift_callback): rewrite using
	-done property.

	* scm/grob-property-description.scm (rest-collision-done): add
	property.
	
	* lilypond.vim: add file (<hjunes@cc.hut.fi>)

2002-10-23  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* input/regression/multi-measure-rest-center.ly: new file.

	* lily/multi-measure-rest.cc (big_rest): multi measure rest was
	off horizontally by 0.05 ss. Fixed.

2002-10-22  Jan Nieuwenhuizen  <janneke@gnu.org>

	* scm/pdftex.scm: Rename ly-number to ly:number->string.

	* Documentation/topdocs/index.tely: Remove duplicate from merge.

2002-10-22  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/tie.cc (get_control_points): also avoid staff lines on the
	just outside the outer staff lines

2002-10-21  Jan Nieuwenhuizen  <janneke@gnu.org>

	* ly/params-init.ly: Just define style-alist, no need to
	define-public.

	* input/mutopia/W.A.Mozart/mozart-hrn3-defs.ly: Fix style override
	(thanks Han-Wen).

	* mf/GNUmakefile (FONT_FILES): Add feta-nummer.
	(FET_FILES): = FONT_FILES.

	* Merge from stable:

	    cvs update -jlilypond_1_6_5 -jlilypond_1_6_6

2002-10-21  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* VERSION: 1.7.4 released.  
	
	* scm/generate-documentation.scm (string-append): add macro
	definitions.

	* lily/text-item.cc (lookup_text): don't use virtual fonts for
	normal texts.

	* lily/multi-measure-rest-engraver.cc: make separate
	MultiMeasureRestNumber grob. Introduce restNumberThreshold.

	* lily/multi-measure-rest.cc: remove text handling. Remove
	number-threshold.

2002-10-20  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* scm/music-types.scm: doc patch by Graham Percival

2002-10-19  Jan Nieuwenhuizen  <janneke@gnu.org>

	* buildscripts/make-font-dir.py (sketch_p): Bugfix: only write
	encoding part.
	(Font_info.set_defaults): pixelsize now also defauts to '0'.
	(sketch_p): Sketch wants only first four elements of X11 font spec.

	* buildscripts/mf-to-table.py (parse_logfile): Bugfix. 

	* mf/feta-autometric.mf: Write foundry and family to log.

	* mf/GNUmakefile: Fixes for pfx builds.  Also write sketch
	font translation table.

	* buildscripts/mf-to-table.py: Better font info into afm.

	* buildscripts/make-font-dir.py: Use font info from afm.  Mftrace
	1.0.9 required.

	* configure.in: Whine for mftrace 1.0.9.

2002-10-19  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/parser.yy (chord_body): allow <<c e>>4 notation.

	* lily/main.cc (main_prog): don't try to load init.EXT when
	processing foo.EXT.

2002-10-15  Rune Zedeler  <rune@zedeler.dk>

	* scm/tex.scm (zigzig-line): added.

	* scm/ps.scm (zigzag-line): added.

	* ps/music-drawing-routines.ps (subvec): added.
	(draw_zigzag_line): added.
	
	* lily/line-spanner.cc: Add support for #'type = #'zigzag. reading
	grob properties zigzag-width and zigzag-length.

	* input/regression/glissando.ly: Add some zig-zagged glissandi.

2002-10-15  Jan Nieuwenhuizen  <janneke@gnu.org>

	* scm/sodipodi.scm: Some fixes.  Sketch also groks this bare-bones
	svg output, including font.

2002-10-14  Jan Nieuwenhuizen  <janneke@gnu.org>

	* scm/lily.scm: Register sodipodi output module.

	* scm/sodipodi.scm: New file.

	* lily/afm.cc (read_afm_file): Read TfmCheckSum from comment.

	* buildscripts/mf-to-table.py (base): Write TfmChecksum in
	comment, after header.
	(parse_logfile): Remove invalid key FontFamily.  Add mandatory key
	FullName.  Fix FontName key.

2002-10-14  Rune Zedeler  <rune@zedeler.dk>

	* lily/rest.cc (after_line_breaking): bugfix: dots after half
	and breve rests.
	
	* input/test/blank-notes.ly: bugfix

	* lily/rest.cc (after_line_breaking): bugfix: dots after whole
	rests. (Kim Shrier)

	* input/test/rest-dot-positions.ly: Added. (Kim Shrier)
	
2002-10-14  Jan Nieuwenhuizen  <janneke@gnu.org>

	* scm/tex.scm: 
	* scm/ps.scm: Cleanup and remove obsolete junk.

	* Documentation/user/internals.itely:
	* Documentation/user/refman.itely: Run texinfo-all-menus-update.

	* lily/parser.yy: Identify shift/reduce problems.

	* input/mutopia/W.A.Mozart/mozart-hrn3-defs.ly: Rename
	make-style-sheet.  Too specific for convert-ly?

2002-10-14  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* po/cs.po: added czech translation, courtesy Tomas Kopecek.

	* input/test/*.ly: various fixes.

	* lily/music.cc (name): bugfix

	* lily/piano-pedal-engraver.cc (try_music): fix pedals.

	* lily/input-file-results.cc (code): set-point-and-click! ->
	set-point-and-click
	
2002-10-13  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* Use uniform ly: prefix for exported scheme primitive functions.

	* scm/music-types.scm: junk compat glue

	* scripts/convert-ly.py: add rules for stuff below, junk
	compatibility glue for spanrequest.

	* lily/parser.yy (verbose_event): remove \spanrequest,
	\commandspanrequest, \script. 
	
	* lily/identifier-smob.cc (LY_DEFINE): change name to ly-export

	* lily/parser.yy: remove arpeggio keyword; use identifier. Idem
	for \penalty, \glissando.

	* VERSION: release 1.7.3
	
2002-10-13  Rune Zedeler  <rune@zedeler.dk>

	* lily/accidental-engraver.cc: Fix
	grace-in-the-beginning-of-measure bug caused by the resent
	partial-measure fix.

	* lily/stem.cc: reversed noteheads overlap half of the stem. (Full
	overlap looks too crowded)
	
2002-10-13  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/parser.yy (assignment): allow SCM expression as assignment.

	* lily/include/music-output-def.hh (class Music_output_def):
	* lily/music-output-def.cc: 
	* lily/paper-def.cc: 
	* scm/font.scm (markup-to-properties):
	* lily/parser.yy (music_output_def_body): 
	remove style_sheet_

2002-10-12  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* ly/grace-init.ly (startGraceMusic): shorten default grace stem
	length.

	* input/regression/spacing-to-grace.ly: new file.

	* input/regression/spacing-end-of-line.ly: new file.

	* lily/note-spacing.cc (get_spacing): take into account breakable
	stuff sticking out at the left (time sig change at line break).

	* lily/spacing-spanner.cc (breakable_column_spacing): junk weird
	raggedright code.

	* scm/music-functions.scm (make-voice-props-set): add
	staff-position for mm rests.
 
	* lily/spacing-spanner.cc (musical_column_spacing): shrink space
	before grace notes a little.

	* lily/parser.yy (sup_quotes): use '\'' for sup_quotes.

	* lily/break-align-interface.cc (do_alignment): right-edge spacing
	key adds space at the end of line. 

2002-10-11  Jan Nieuwenhuizen  <janneke@gnu.org>

	* scm/sketch.scm: Fix beams.

	* buildscripts/mf-to-table.py: Add EncodingScheme.

	* scm/sketch.scm: Resurrect.

2002-10-11  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/multi-measure-rest.cc: use breve rests for measure lengths
	longer than 4/4. Patch courtesy Kim Shrier <kim@tinker.com>.

2002-10-10  Jan Nieuwenhuizen  <janneke@gnu.org>

	* stepmake/stepmake/c++-rules.make: Fixes for bison 1.50.

	* lily/lexer.ll (My_lily_lexer): Avoid silly flex induced gcc warnings.

2002-10-11  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/my-lily-lexer.cc (prepare_for_next_token): use previous
	token for origin information.

	* lily/parser.yy (My_lily_lexer): do identifier location and
	cloning from lexer.

	* scm/music-functions.scm (make-multi-measure-rest): move mmrest
	logic out of the parser. Add bar checks on both ends.

	* Documentation/user/refman.itely (Multi measure rests): add more
	notes about mm rests.

2002-10-10  Jan Nieuwenhuizen  <janneke@gnu.org>

	* input/regression/bar-scripts.ly: Re-enable.

	* lily/parser.yy:
	* stepmake/stepmake/c++-rules.make: Fixes for bison 1.51 to be
	released rsn.  Bison 1.50 has a crucial bug and won't work.

	* lily/lexer.ll (My_lily_lexer): Avoid silly flex induced gcc warnings.


2002-10-07  Jan Nieuwenhuizen  <janneke@gnu.org>

	* input/regression/bar-scripts.ly: Blunt documentation build fix.

2002-10-05  Jan Nieuwenhuizen  <janneke@gnu.org>

	* Actually merge changes since 1.6.4 besides ChangeLog, and
	resolve conflicts.  Lots of updates, hope all is well.
	
	* cygwin/lilypond.hint (requires): Add ghostscript.

	* scm: Update some (c).
	
2002-10-07  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* input/test/{various}.ly: add \header fields and texidoc strings.

2002-10-05  Werner Lemberg  <wl@gnu.org>

	* scripts/lilypond-book.py (output_dict) <latex>: `output_tex'
	renamed to `output_latex_quoted'.
	Added `output_latex_noquote'.
	(schedule_lilypond_block): Implement `noquote' option for LaTeX
	mode.

2002-11-03  Jan Nieuwenhuizen  <janneke@gnu.org>

	* ChangeLog: Add 1.6.6 release marker.  See below.

	* stepmake/stepmake/po-targets.make: Remove --c++ option.

	* scripts/midi2ly.py: Fix global syntax warnings.

	* GNUmakefile.in: Generate builddir locale tree too.

	* scripts/ly2dvi.py:
	* scripts/midi2ly.py: 
	* scripts/mup2ly.py: 
	* scripts/update-lily.py:
	* lily/main.cc (setup_paths): Fix for locales setup.

2002-10-29  Jan Nieuwenhuizen  <janneke@gnu.org>

	* Documentation/windows/installing.texi: Soften wording about
	necessity of becoming Administrator.  tommie@iae.nl reports this
	does not seem to be necessary for his flavour of Windows 2000.
	Explicitely discourage text mode mounts.

2002-10-27  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/rest.cc (after_line_breaking): backport dot position fix.

	* lily/rest-collision.cc (do_shift): also remove dots for suicided
	rests. Thanks to Klaus Zimmermann for finding this bug.

2002-10-24  Jan Nieuwenhuizen  <janneke@gnu.org>

	* Documentation/topdocs/INSTALL.texi: Correction for broken /bin/sh.

2002-10-24  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* Documentation/user/music-glossary.tely: fix links.

2002-10-21  Werner Lemberg  <wl@gnu.org>

	* tex/lily-ps-defs.tex (\lilypondsetdimen): Define ID macro.
	(\lilypondpostscript): Define PS macros `lyscaleXXX' (`XXX' is the
	scaling factor) only once and use them in the definition of
	\embeddedps.
	* ps/music-drawing-routines.ps (skeel): Removed.

2002-10-21  Jan Nieuwenhuizen  <janneke@gnu.org>

	* stepmake/aclocal.m4: Changed 6 instances of $( ) to ` `, for
	Solaris7, as we don't use nested $( ) constructs.

2002-10-21  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* VERSION: Release 1.6.6.
	
2002-10-21  Jan Nieuwenhuizen  <janneke@gnu.org>

	* Documentation/topdocs/INSTALL.texi: Add note about using ksh for
	as workaround for /bin/sh problems on Solaris7.

2002-10-19  Werner Lemberg  <wl@gnu.org>

	* GNUmakefile.in (web-doc): Fix typos.
	* tex/lilyponddefs.tex (\lilypondspecial): Don't scan
	`music-drawing-routines.ps' but emit \special{header=...} once.
	* scm/tex.scm (header-end): Updated.

2002-10-19  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/stem-engraver.cc (acknowledge_grob): don't crash on
	undefined tremolo. 

2002-10-15  Werner Lemberg  <wl@gnu.org>

	* scripts/lilypond-book.py (g_make_html): New global variable.
	(schedule_lilypond_block): Don't compute EPS and PNG for `texi'
	if `g_make_html' isn't set.
	[main]: Add format `texi-html'.
	(option_definitions): Updated.
	* Documentation/user/lilypond-book.itely: Updated.

	* make/lilypond-vars.make (LILYPOND_BOOK_FORMAT): New variable.
	* make/ly-rules.make (%.texi, %.nexi): Use it.
	* stepmake/stepmake/www-targets.make (web): Pass `tex-html' as
	format to lilypond-book.
	* GNUmakefile.in (web-doc): Ditto.

2002-10-14  Werner Lemberg  <wl@gnu.org>

	Further improve TeX output.  The produced files are about 40%
	smaller.  `lilyponddefs.tex' is now read only once.

	* tex/lilyponddefs.tex: Remove footer stuff.
	(\ifundefined): Renamed to...
	(\lilypondundefined): This.  Use LaTeX's definition to
	make it nestable and make it global.
	(\lilypondstart, \lilypondend): New macro to initialize LilyPond
	output.
	(\lilypondspecial): New macro to read `music-drawing-routines.ps'.
	(\fetasixteen, \fetafont, \fetachar, \botalign, \leftalign): Make
	them global.
	(\placebox): Renamed to...
	(\lyitem): This.
	Make it global and call \outputscale by itself.
	(\lybox, \lyvrule): New macros to reduce input data.
	(\lilypondfirst, \lilypondsecond, \lilypondloop, \lilyponditerate):
	New auxiliary macros.
	(\SkipLilydefs, \EndLilyPondOutput): Removed.
	* tex/lily-pdf-defs.tex, tex/lily-ps-defs.tex (\lilySpace): Renamed
	to...
	(\lilypondspace): This and made it global.
	(\turnOnPostScript): Renamed to...
	(\lilypondpostscript): This and made it global.
	(\turnOnExperimentalFeatures): Renamed to...
	(\lilypondexperimentalfeatures): This and made it global.
	* tex/lily-ps-defs.tex (\PSsetTeXdimen): Renamed to...
	(\lilypondsetdimen): This and made it global.
	* tex/lilypond-latex.tex, tex/lilypond-plaintex.tex: Removed.
	* tex/GNUmakefile (TEX_FILES): Add `music-drawing-routines.ps'
	(all, $(outdir)/music-drawing-routines.ps): New rules.
	* buildscripts/mf-to-table.py (write_tex_defs): Use \gdef.
	* scm/pdftex.scm, scm/tex.scm (end-output, header-end, placebox,
	start-system, stop-system, stop-last-system, filledbox): Updated to
	use the changed macros from lilyponddefs.tex.
	* scripts/lilypond-book.ly (output_dict) <latex, texi>: Ditto.

2002-10-07  Jan Nieuwenhuizen  <janneke@gnu.org>

	* Documentation/windows/installing.texi: Update.

2002-09-30  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* VERSION: 1.6.5 released

	* scripts/lilypond-book.py (make_pixmap): don't produce empty pages.

2002-09-28  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* scm/translator-property-description.scm (voltaOnThisStaff): add
	property.

2002-09-28  Werner Lemberg  <wl@gnu.org>

	* scm/tex.scm (header-end): Suppress page numbering.

	* scripts/lilypond-book.py (output_dict) <output-texi-quoted>:
	Fix quotation for HTML output.

2002-09-28   Graham Percival   <gperciva@sfu.ca>
	
	* Documentation/user/refman.itely: grammar and phrasing
	  fixes to "Note Entry" section.  Also adds a few new examples.

2002-09-27  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* flower/include/string-data.icc: include string.h

2002-09-25  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* scm/chord-name.scm (chord::inner-name-banter): remove space.

2002-09-27  Jan Nieuwenhuizen  <janneke@gnu.org>

	* Documentation/user/GNUmakefile (extra-local-help): Add.

	* stepmake/stepmake/www-targets.make (local-help): Add.

2002-09-26  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* Documentation/topdocs/INSTALL.texi (Top): recommend binary
	packages.

	* Documentation/topdocs/README.texi (Top): building documentation
	(not website.)

2002-09-26  Jan Nieuwenhuizen  <janneke@gnu.org>

	* Documentation/user/refman.itely: 
	* Documentation/user/tutorial.itely: 
	* Documentation/user/music-glossary.tely: Merge changes.

	* Documentation/user/glossary.html.in: 
	* Documentation/index.texi: 
	* Documentation/header.html.in: Accomodate renaming of glossary.
	
	* Documentation/user/tutorial.itely: Add some glossary references.
	
	* Documentation/user/refman.itely: Minor fixes.
	
	* Documentation/user/lilypond.tely: Add glossary do direntry.

	* Documentation/user/music-glossary.tely: Rename (previously:
	glossary.tely).  Fix anchor placement.

	* Documentation/user/GNUmakefile: Make music-glossary.info too.

2002-09-23  Werner Lemberg  <wl@gnu.org>

	* scripts/lilypond-book.py (output_dict): Fix handling of
	various environments by avoid extraneous newlines.
	Rename `output-all' regexp for html to `output-html'.
	Replace `output-all' regexp for texi with `output-texi-quote'
	and `output-texi-noquote'.
	(compose_full_body): Don't override `linewidth' user option
	for `singleline'.
	(schedule_lilypond_block): Don't indent text specified with
	`intertext' option.
	Add new option `noquote'.
	(compile_all_files): Use latex instead of tex to compile ly
	files directly.

	* Documentation/user/lilypond-book.itely: Updated and revised.
	Improve layout.

	* Documentation/user/glossary.tely,
	Documentation/user/introduction.itely,
	Documentation/user/tutorial.itely,
	Documentation/user/refman.itely,
	Documentation/user/appendices.itely: Fix overfull LilyPond
	boxes caused by the new lilypond-book code.  Other minor
	fixes.

	* Documentation/user/macros.itexi (@texiflat): Don't emit
	trailing space.

	* scm/tex.scm (end-output, header-end): Add preamble and
	postamble to make lilypond output directly compilable with
	latex.

	
2002-09-23  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* Documentation/topdocs/INSTALL.texi (Top): bugfix for RH RPM
	instructions.

2002-09-25  Jan Nieuwenhuizen  <janneke@gnu.org>

	* Documentation/user/glossary.tely: Add titling and hyperlinks.

2002-09-24  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/beam.cc (connect_beams): don't crash if there are quarter
	notes in beams.

2002-09-24  Juergen Reuter  <reuter@ipd.uka.de>

	* Documentation/user/refman.itely: corrected ancient clef
	docu; added docu on ligatures

2002-09-21  Juergen Reuter  <reuter@ipd.uka.de>

	* Documentation/user/glossary.tely,
	Documentation/user/refman.itely, input/les-nereides.ly,
	input/mutopia/W.A.Mozart/mozart-hrn3-defs.ly,
	input/test/bagpipe.ly, lily/stem.cc, ly/grace-init.ly,
	scm/grob-property-description.scm, scripts/convert-ly.py: renamed
	Stem properties: flag-style -> stroke-style, style -> flag-style.


2002-09-22  Werner Lemberg  <wl@gnu.org>

	* scripts/lilypond-book.py: Add option `notime' to suppress
	printing of a time signature.  Specify default indentation of 0pt
	if single line fragment.  Don't emit redundant `\paper{ }'.

	* Documentation/user/lilypond-book.itely: Updated.

	* Documentation/user/glossary.tely: Completely reformatting.

2002-09-23  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* GNUmakefile.in (top-web): generate (possibly empty) examples.html

2002-09-22  Jan Nieuwenhuizen  <janneke@gnu.org>

	* Documentation/user/tutorial.itely: Fix links.
	
	* Documentation/topdocs/index.tely:
	* Documentation/index.texi:
	* Documentation/header.html.in: Small website fixes and updates.

	* debian/: Debian patch by Anthony Fok.

2002-09-21  Jan Nieuwenhuizen  <janneke@gnu.org>

	* Documentation/footer.html.in: How time flies: It's already 2002!

	* Documentation/topdocs/index.tely: Stable/development fix.  Use
	more descriptive link names than 'here'.

2002-09-21  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* VERSION: 1.7.2 released
	* VERSION: 1.6.4 released
	
	* scm/tex.scm (header-end): enclose lily output in begingroup/endgroup.

	* scripts/convert-ly.py (FatalConversionError.conv): add rule for
	(ly-make-music "Foo_bar") -> (make-music-by-name 'FooBarEvent).

	* mf/feta-din.mf (test): add x-height and space.

	* lily/dynamic-engraver.cc (process_music): take dynamic direction
	from ^_ for crescendi. Idem for slurs and phrasing slurs.

	* ly/grace-init.ly: add-to-grace-init: function to portably add
	settings to \grace. 

	* lily/dynamic-engraver.cc (process_music): finish (de)crescendo
	if we get an absolute dynamic event.
 
	* lily/time-signature-engraver.cc (process_music): warn for \time 5/5

	* lily/source-file.cc (get_line): oops. All line numbers were off
	by 2. Fix that. 

	* lily/parser.yy (event_that_take_dir): allow () \< \> \! \( \) to
	be after the note, combined with -_^, i.e. c4-(-\)-\>  

	* ly/params-init.ly (ledgerlinethickness): use Scheme expressions.

	* lily/parser.yy (number_factor): remove (number) as number
	expression. ("Let them eat Lisp").

2002-10-05  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/horizontal-bracket.cc: new file.

	* lily/horizontal-bracket-engraver.cc: new file.

	* input/regression/note-group-bracket.ly: new file. Support
	horizontal note brackets for music analysis.

	* lily/stem.cc (flag): new flag-style: no-flag.

	* input/test/stem-cross-staff.ly: new file
	
	* Documentation/user/internals.itely: Improved formatting, fixing
	typos.  Added a section `Output details' to describe how the TeX
	code looks like.

	* lily/include/midi-stream.hh: use stdio.h iso. iostream.h

	* lily/parser.yy: remove \dynamicscript.

	* ly/dynamic-scripts-init.ly: redo the dynamic scripts
	definitions. 

	* python/midi.c (midi_error): take two arguments.

	* Merge 1.6.5 changes:
	
2002-10-04  Jan Nieuwenhuizen  <janneke@gnu.org>

	* scm/grob-description.scm (minimum-beam-collision-distance): 0.75
	staff-space.  Previous 1.5 was probably meant as half-spaces.
	(cautionary-style): parentheses (was: smaller).  This is what doco
	says, and it seems more logical.

	* Documentation/user/refman.itely (Chromatic alterations): Bugfix
	for 2nd sentence.

2002-10-04  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* make/lilypond.redhat.spec.in: various fixes for RedHat 8.0

2002-10-03  Jan Nieuwenhuizen  <janneke@gnu.org>

	* lily/beam.cc (rest_collision_callback): Fixed: partial rewrite.

2002-09-30  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* scripts/lilypond-book.py (make_pixmap): don't produce empty pages.

2002-09-28  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* scm/translator-property-description.scm (voltaOnThisStaff): add
	property.

2002-09-28  Werner Lemberg  <wl@gnu.org>

	* scm/tex.scm (header-end): Suppress page numbering.

	* scripts/lilypond-book.py (output_dict) <output-texi-quoted>:
	Fix quotation for HTML output.

2002-09-28   Graham Percival   <gperciva@sfu.ca>
	
	* Documentation/user/refman.itely: grammar and phrasing
	  fixes to "Note Entry" section.  Also adds a few new examples.

2002-09-27  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* flower/include/string-data.icc: include string.h

2002-09-25  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* scm/chord-name.scm (chord::inner-name-banter): remove space.

2002-09-27  Jan Nieuwenhuizen  <janneke@gnu.org>

	* Documentation/user/GNUmakefile (extra-local-help): Add.

	* stepmake/stepmake/www-targets.make (local-help): Add.

2002-09-26  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* Documentation/topdocs/INSTALL.texi (Top): recommend binary
	packages.

	* Documentation/topdocs/README.texi (Top): building documentation
	(not website.)

2002-09-26  Jan Nieuwenhuizen  <janneke@gnu.org>

	* Documentation/user/refman.itely: 
	* Documentation/user/tutorial.itely: 
	* Documentation/user/music-glossary.tely: Merge changes.

	* Documentation/user/glossary.html.in: 
	* Documentation/index.texi: 
	* Documentation/header.html.in: Accomodate renaming of glossary.
	
	* Documentation/user/tutorial.itely: Add some glossary references.
	
	* Documentation/user/refman.itely: Minor fixes.
	
	* Documentation/user/lilypond.tely: Add glossary do direntry.

	* Documentation/user/music-glossary.tely: Rename (previously:
	glossary.tely).  Fix anchor placement.

	* Documentation/user/GNUmakefile: Make music-glossary.info too.

2002-09-23  Werner Lemberg  <wl@gnu.org>

	* scripts/lilypond-book.py (output_dict): Fix handling of
	various environments by avoid extraneous newlines.
	Rename `output-all' regexp for html to `output-html'.
	Replace `output-all' regexp for texi with `output-texi-quote'
	and `output-texi-noquote'.
	(compose_full_body): Don't override `linewidth' user option
	for `singleline'.
	(schedule_lilypond_block): Don't indent text specified with
	`intertext' option.
	Add new option `noquote'.
	(compile_all_files): Use latex instead of tex to compile ly
	files directly.

	* Documentation/user/lilypond-book.itely: Updated and revised.
	Improve layout.

	* Documentation/user/glossary.tely,
	Documentation/user/introduction.itely,
	Documentation/user/tutorial.itely,
	Documentation/user/refman.itely,
	Documentation/user/appendices.itely: Fix overfull LilyPond
	boxes caused by the new lilypond-book code.  Other minor
	fixes.

	* Documentation/user/macros.itexi (@texiflat): Don't emit
	trailing space.

	* scm/tex.scm (end-output, header-end): Add preamble and
	postamble to make lilypond output directly compilable with
	latex.

	
2002-09-23  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* Documentation/topdocs/INSTALL.texi (Top): bugfix for RH RPM
	instructions.

2002-09-25  Jan Nieuwenhuizen  <janneke@gnu.org>

	* Documentation/user/glossary.tely: Add titling and hyperlinks.

2002-09-24  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/beam.cc (connect_beams): don't crash if there are quarter
	notes in beams.

2002-09-24  Juergen Reuter  <reuter@ipd.uka.de>

	* Documentation/user/refman.itely: corrected ancient clef
	docu; added docu on ligatures

2002-09-21  Juergen Reuter  <reuter@ipd.uka.de>

	* Documentation/user/glossary.tely,
	Documentation/user/refman.itely, input/les-nereides.ly,
	input/mutopia/W.A.Mozart/mozart-hrn3-defs.ly,
	input/test/bagpipe.ly, lily/stem.cc, ly/grace-init.ly,
	scm/grob-property-description.scm, scripts/convert-ly.py: renamed
	Stem properties: flag-style -> stroke-style, style -> flag-style.

2002-09-22  Werner Lemberg  <wl@gnu.org>

	* scripts/lilypond-book.py: Add option `notime' to suppress
	printing of a time signature.  Specify default indentation of 0pt
	if single line fragment.  Don't emit redundant `\paper{ }'.

	* Documentation/user/lilypond-book.itely: Updated.

	* Documentation/user/glossary.tely: Completely reformatting.

2002-09-23  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* GNUmakefile.in (top-web): generate (possibly empty) examples.html

2002-09-22  Jan Nieuwenhuizen  <janneke@gnu.org>

	* Documentation/user/tutorial.itely: Fix links.
	
	* Documentation/topdocs/index.tely:
	* Documentation/index.texi:
	* Documentation/header.html.in: Small website fixes and updates.

	* debian/: Debian patch by Anthony Fok.

2002-09-21  Jan Nieuwenhuizen  <janneke@gnu.org>

	* Documentation/footer.html.in: How time flies: It's already 2002!

	* Documentation/topdocs/index.tely: Stable/development fix.  Use
	more descriptive link names than 'here'.

2002-10-03  Jan Nieuwenhuizen  <janneke@gnu.org>

	* lily/beam.cc (rest_collision_callback): Fixed: partial rewrite.

2002-10-02  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/part-combine-music-iterator.cc (get_state): cleanup
	(get_music_info): cleanup.

2002-10-01  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* scm/backend-documentation-lib.scm (interface-doc-string):
	crosslinks between interfaces and grobs. Headings for interfaces
	in grob explanation.

2002-09-30  Jan Nieuwenhuizen  <janneke@gnu.org>

	* scm/to-xml.scm: Fixes.  input/trip.ly now parses as xml (without
	dtd).  Add preliminary dtd.
	(re-sub-alist): Robustify.

2002-09-29  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/include/event-chord-iterator.hh,
	lily/context-specced-music-iterator.cc,
	lily/event.cc, lily/event-chord-iterator.cc: add

2002-09-29  Jan Nieuwenhuizen  <janneke@gnu.org>

	* lily/: some (c) header fixes.
	
	* lily/request-chord.cc: Remove.
	
	* lily/include/event-chord-iterator.hh:
	* lily/include/event.hh:
	* lily/event-chord.cc: New file.
	
	* lily/stem-engraver.cc (acknowledge_grob): rename evented back to
	requested.

2002-09-28  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/ : rename Request to Event

	* lily/parser.yy (command_element): move clef stuff into Scheme.

	* lily/:  rename length_mom () to get_length()

	* lily/part-combine-music.cc: removed file and class.

	* lily/context-specced-music-iterator.cc (class
	Context_specced_music_iterator): new file. Obsoletes the
	Context_specced_music type.

	* scm/music-types.scm (make-repeated-music): put different kinds
	of repeated music into music-type table.

	* VERSION: 1.7.1 released.

	* scm/to-xml.scm: new file.

	* input/test/to-xml.ly (fooBar): demo of what is possible with the
	new Input representation: dump music as XML.

	* scm/engraver-documentation-lib.scm
	(engraver-accepts-music-types?): add links from music to engraver,
	from music-type to engraver.

	* lily/include/command-request.hh: removed
	lily/include/musical-request.hh: removed. Removed all _req classes
	except Key_change_req. Changes throughout.

2002-09-28  Jan Nieuwenhuizen  <janneke@gnu.org>

	* lily/tuplet-engraver.cc (try_music): Compile kludge.

2002-09-28  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/*.cc: specify accepts for many engravers.

	* scm/music-documentation-lib.scm: dump music expressions and
	music subtypes.

	* scm/documentation-lib.scm: complete revision.
	Use GOOPS objects to store document tree explicitly. Cleaned up and
	sped up doco generation a lot.

2002-09-27  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* input/trip.ly (fugaIILeft): add arpeggio

	* lily/translator-group.cc (try_music_on_nongroup_children):
	oops. The name symbol is in the cdr of the assoc handle.

	* lily/:  remove Arpeggio_req, Breathing_sign_req, Extender_req,
	Hyphen_req, Glissando_req, Break_req, Mark_req 

2002-09-26  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/musical-request.cc (music-duration-length,
	music-duration-compress): new functions.

	* lily/ : Remove Note_req, Rest_req, Busy_playing_req. Changes
	throughout. Warning doesn't work yet.

	* lily/translator-group.cc (try_music_on_nongroup_children):
	new implementation: store candidate acceptors in a hashTable.

2002-09-25  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* scm/music-types.scm (music-descriptions): change name to
	internal-class-name

	* scm/chord-name.scm (chord::inner-name-banter): remove space.

2002-09-24  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/beam.cc (connect_beams): don't crash if there are quarter
	notes in beams.

2002-09-24  Juergen Reuter  <reuter@ipd.uka.de>

	* Documentation/user/refman.itely: corrected ancient clef
	docu; added docu on ligatures

2002-09-21  Juergen Reuter  <reuter@ipd.uka.de>

	* Documentation/user/glossary.tely,
	Documentation/user/refman.itely, input/les-nereides.ly,
	input/mutopia/W.A.Mozart/mozart-hrn3-defs.ly,
	input/test/bagpipe.ly, lily/stem.cc, ly/grace-init.ly,
	scm/grob-property-description.scm, scripts/convert-ly.py: renamed
	Stem properties: flag-style -> stroke-style, style -> flag-style.

2002-09-24  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* scm/music-functions.scm (music-separator?): don't use name music
	property.

2002-09-24  Jan Nieuwenhuizen  <janneke@gnu.org>

	* stepmake/stepmake/generic-targets.make (help): Document check
	target.

	* lily/new-accidental-engraver.cc: Compile fix.

2002-09-23  Jan Nieuwenhuizen  <janneke@gnu.org>

	* scripts/convert-ly.py: Add rule.

	* input/test/music-creation.ly:
	* input/test/add-staccato.ly:
	* input/test/add-text-script.ly: ly-make-music.

	* scm/drums.scm (make-head-type-elem, make-articulation-script):
	More ly-make-music renamings.

	* lily/command-request.cc: ADD_MUSIC: arpeggio_req.

	* lily/music-constructor.cc (make_music): Add debugging info.

	* scm/music-functions.scm (make-simultaneous-music,
	(make-sequential-music, context-spec-music):
	* scm/music-types.scm (music-descriptions): Get lily to run.

2002-09-23  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/command-request.cc (transpose_key_alist): new function.

	* lily/key-performer.cc (create_audio_elements): cleanup. 

2002-09-22  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/parser.yy: remove TYPED_MAKE_MUSIC().

	* lily/include/translator.hh (ENTER_DESCRIPTION): add
	events-accepted field.

	* scm/music-types.scm: new file.

	* lily/parser.yy: put music type initialization into scheme,
	similar to grob initialization.  Changes throughout.

2002-09-22  Jan Nieuwenhuizen  <janneke@gnu.org>

	* Documentation/user/tutorial.itely: Fix links.
	
	* Documentation/index.texi: 
	* Documentation/header.html.in: 
	* Documentation/topdocs/index.tely: Small website fixes and updates.

	* debian/: Debian patch by Anthony Fok.

2002-09-21  Jan Nieuwenhuizen  <janneke@gnu.org>

	* Documentation/footer.html.in: How time flies: It's already 2002!

	* Documentation/topdocs/index.tely: Stable/development fix.  Use
	more descriptive link names than 'here'.

	* ROADMAP: Remove test stuff.

	* scripts/update-lily.py: Allow auto-building of stable and
	development versions.  Bugfixes.

2002-09-21  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* VERSION: released 1.7.0

	* scm/tex.scm (header-end): enclose lily output in begingroup/endgroup.

	* tex/lilyponddefs.tex: set hsize for plain tex, but only for
	positive line widths.

2002-09-20  Jan Nieuwenhuizen  <janneke@gnu.org>

	* tex/lilyponddefs.tex: Handle \scoreshift and \outputscale in one
	go.  Fix comments.

	* cygwin: Cygwin updates.

2002-09-19  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* Documentation/windows/installing.texi (Top): version for python,
	urls for ghostscript (thanks to John Potelle)
	
	* lily/simultaneous-music-iterator.cc
	(Simultaneous_music_iterator): init children_list_ before
	triggering GC.

	* lily/*-iterator.cc: be even more careful with smobbed copy
	constructors. 

	* lily/break-align-engraver.cc (acknowledge_grob): also typeset
	LeftEdge item.

2002-09-15  Werner Lemberg  <wl@gnu.org>

	Improving LilyPond's output to make them ordinary TeX boxes with
	predictable dimensions.  System boxes are now vertically centered on
	the baseline; this offset can be further controlled with
	\lilypondscoreshift.

	* lily/system.cc (System::post_processing): Pass length of current
	system to `start-system' (including any horizontal indentation).

	* scm/tex.scm, scm/pdftex.scm: Make output of various functions
	prettier.
	(lily-def): Append `%'.
	(start-system): Add parameter `wd'.  Output more TeX code to specify
	box dimensions.
	(stop-system, stop-last-system): Complement changes in
	`start-system'.
	* scm/sketch.scm, scm/ps.scm, scm/pdf.scm, scm/ascii-script.scm:
	Updated.

	* scripts/ly2dvi.py (global_latex_definition): Set \parindent to 0.
	* buildscripts/mf-to-table.py (write_tex_defs): Append `%'.
	Write final `\endinput'.

	* tex/lily-ps-defs.tex, tex/lily-pdf-defs.tex,
	tex/lilypond-plaintex.tex, tex/lilypond-latex.tex,
	tex/lilyponddefs.tex, tex/titledefs.tex: Reformat code.  Assure that
	files and macro definitions don't produce spurious spaces and
	paragraphs (using \endlinechar).
	* tex/lilyponddefs.tex: New dimension `\scoreshift'.

	* Documentation/user/internals.itely: Improved formatting, fixing
	typos.  Added a section `Output details' to describe how the TeX
	code looks like.

2002-09-17  Rune Zedeler  <rune@zedeler.dk>

	* lily/accidental-engraver.cc: Also work with partial measures.

2002-09-17  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/text-spanner-engraver.cc: whoops. Set bound in the correct
	spanner.

2002-09-21  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/identifier-smob.cc (unpack_identifier): new file.

	* lily/lexer.ll (identifier_type): new function.  use ly-id to
	pass off scheme expressions as music identifiers.

	* scm/lily.scm: reorganisation, cleanups.

	* lily/main.cc: small cleanups.

2002-09-20  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/ly-module.{cc,hh}: new file.

2002-09-17  Rune Zedeler  <rune@zedeler.dk>

	* lily/accidental-engraver.cc: Also work with partial measures.

2002-09-16  Jan Nieuwenhuizen  <janneke@gnu.org>

	* VERSION (PACKAGE_NAME): Remove HEAD trap leftover.

2002-09-16  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/my-lily-lexer.cc: use SCM module in stead of
	Scheme_hash_table. Changes throughout.  

2002-09-15  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* VERSION (MY_PATCH_LEVEL): make 1.7.0

