2002-10-06  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* scripts/convert-ly.py (FatalConversionError.conv): add rule for
	(ly-make-music "Foo_bar") -> (make-music-by-name 'FooBarEvent).

	* mf/feta-din.mf (test): add x-height and space.

	* lily/dynamic-engraver.cc (process_music): take dynamic direction
	from ^_ for crescendi. Idem for slurs and phrasing slurs.

	* ly/grace-init.ly: add-to-grace-init: function to portably add
	settings to \grace. 

	* lily/dynamic-engraver.cc (process_music): finish (de)crescendo
	if we get an absolute dynamic event.
 
	* lily/time-signature-engraver.cc (process_music): warn for \time 5/5

	* lily/source-file.cc (get_line): oops. All line numbers were off
	by 2. Fix that. 

	* lily/parser.yy (event_that_take_dir): allow () \< \> \! \( \) to
	be after the note, combined with -_^, i.e. c4-(-\)-\>  

	* ly/params-init.ly (ledgerlinethickness): use Scheme expressions.

	* lily/parser.yy (number_factor): remove (number) as number
	expression. ("Let them eat Lisp").

2002-10-05  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/horizontal-bracket.cc: new file.

	* lily/horizontal-bracket-engraver.cc: new file.

	* input/regression/note-group-bracket.ly: new file. Support
	horizontal note brackets for music analysis.

	* lily/stem.cc (flag): new flag-style: no-flag.

	* input/test/stem-cross-staff.ly: new file

	* lily/include/midi-stream.hh: use stdio.h iso. iostream.h

	* lily/parser.yy: remove \dynamicscript.

	* ly/dynamic-scripts-init.ly: redo the dynamic scripts
	definitions. 

	* python/midi.c (midi_error): take two arguments.

	* Merge 1.6.5 changes:
	
2002-10-04  Jan Nieuwenhuizen  <janneke@gnu.org>

	* scm/grob-description.scm (minimum-beam-collision-distance): 0.75
	staff-space.  Previous 1.5 was probably meant as half-spaces.
	(cautionary-style): parentheses (was: smaller).  This is what doco
	says, and it seems more logical.

	* Documentation/user/refman.itely (Chromatic alterations): Bugfix
	for 2nd sentence.

2002-10-04  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* make/lilypond.redhat.spec.in: various fixes for RedHat 8.0

2002-10-03  Jan Nieuwenhuizen  <janneke@gnu.org>

	* lily/beam.cc (rest_collision_callback): Fixed: partial rewrite.

2002-09-30  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* scripts/lilypond-book.py (make_pixmap): don't produce empty pages.

2002-09-28  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* scm/translator-property-description.scm (voltaOnThisStaff): add
	property.

2002-09-28  Werner Lemberg  <wl@gnu.org>

	* scm/tex.scm (header-end): Suppress page numbering.

	* scripts/lilypond-book.py (output_dict) <output-texi-quoted>:
	Fix quotation for HTML output.

2002-09-28   Graham Percival   <gperciva@sfu.ca>
	
	* Documentation/user/refman.itely: grammar and phrasing
	  fixes to "Note Entry" section.  Also adds a few new examples.

2002-09-27  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* flower/include/string-data.icc: include string.h

2002-09-25  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* scm/chord-name.scm (chord::inner-name-banter): remove space.

2002-09-27  Jan Nieuwenhuizen  <janneke@gnu.org>

	* Documentation/user/GNUmakefile (extra-local-help): Add.

	* stepmake/stepmake/www-targets.make (local-help): Add.

2002-09-26  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* Documentation/topdocs/INSTALL.texi (Top): recommend binary
	packages.

	* Documentation/topdocs/README.texi (Top): building documentation
	(not website.)

2002-09-26  Jan Nieuwenhuizen  <janneke@gnu.org>

	* Documentation/user/refman.itely: 
	* Documentation/user/tutorial.itely: 
	* Documentation/user/music-glossary.tely: Merge changes.

	* Documentation/user/glossary.html.in: 
	* Documentation/index.texi: 
	* Documentation/header.html.in: Accomodate renaming of glossary.
	
	* Documentation/user/tutorial.itely: Add some glossary references.
	
	* Documentation/user/refman.itely: Minor fixes.
	
	* Documentation/user/lilypond.tely: Add glossary do direntry.

	* Documentation/user/music-glossary.tely: Rename (previously:
	glossary.tely).  Fix anchor placement.

	* Documentation/user/GNUmakefile: Make music-glossary.info too.

2002-09-23  Werner Lemberg  <wl@gnu.org>

	* scripts/lilypond-book.py (output_dict): Fix handling of
	various environments by avoid extraneous newlines.
	Rename `output-all' regexp for html to `output-html'.
	Replace `output-all' regexp for texi with `output-texi-quote'
	and `output-texi-noquote'.
	(compose_full_body): Don't override `linewidth' user option
	for `singleline'.
	(schedule_lilypond_block): Don't indent text specified with
	`intertext' option.
	Add new option `noquote'.
	(compile_all_files): Use latex instead of tex to compile ly
	files directly.

	* Documentation/user/lilypond-book.itely: Updated and revised.
	Improve layout.

	* Documentation/user/glossary.tely,
	Documentation/user/introduction.itely,
	Documentation/user/tutorial.itely,
	Documentation/user/refman.itely,
	Documentation/user/appendices.itely: Fix overfull LilyPond
	boxes caused by the new lilypond-book code.  Other minor
	fixes.

	* Documentation/user/macros.itexi (@texiflat): Don't emit
	trailing space.

	* scm/tex.scm (end-output, header-end): Add preamble and
	postamble to make lilypond output directly compilable with
	latex.

	
2002-09-23  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* Documentation/topdocs/INSTALL.texi (Top): bugfix for RH RPM
	instructions.

2002-09-25  Jan Nieuwenhuizen  <janneke@gnu.org>

	* Documentation/user/glossary.tely: Add titling and hyperlinks.

2002-09-24  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/beam.cc (connect_beams): don't crash if there are quarter
	notes in beams.

2002-09-24  Juergen Reuter  <reuter@ipd.uka.de>

	* Documentation/user/refman.itely: corrected ancient clef
	docu; added docu on ligatures

2002-09-21  Juergen Reuter  <reuter@ipd.uka.de>

	* Documentation/user/glossary.tely,
	Documentation/user/refman.itely, input/les-nereides.ly,
	input/mutopia/W.A.Mozart/mozart-hrn3-defs.ly,
	input/test/bagpipe.ly, lily/stem.cc, ly/grace-init.ly,
	scm/grob-property-description.scm, scripts/convert-ly.py: renamed
	Stem properties: flag-style -> stroke-style, style -> flag-style.


2002-09-22  Werner Lemberg  <wl@gnu.org>

	* scripts/lilypond-book.py: Add option `notime' to suppress
	printing of a time signature.  Specify default indentation of 0pt
	if single line fragment.  Don't emit redundant `\paper{ }'.

	* Documentation/user/lilypond-book.itely: Updated.

	* Documentation/user/glossary.tely: Completely reformatting.

2002-09-23  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* GNUmakefile.in (top-web): generate (possibly empty) examples.html

2002-09-22  Jan Nieuwenhuizen  <janneke@gnu.org>

	* Documentation/user/tutorial.itely: Fix links.
	
	* Documentation/topdocs/index.tely:
	* Documentation/index.texi:
	* Documentation/header.html.in: Small website fixes and updates.

	* debian/: Debian patch by Anthony Fok.

2002-09-21  Jan Nieuwenhuizen  <janneke@gnu.org>

	* Documentation/footer.html.in: How time flies: It's already 2002!

	* Documentation/topdocs/index.tely: Stable/development fix.  Use
	more descriptive link names than 'here'.

2002-10-03  Jan Nieuwenhuizen  <janneke@gnu.org>

	* lily/beam.cc (rest_collision_callback): Fixed: partial rewrite.

2002-10-02  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/part-combine-music-iterator.cc (get_state): cleanup
	(get_music_info): cleanup.

2002-10-01  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* scm/backend-documentation-lib.scm (interface-doc-string):
	crosslinks between interfaces and grobs. Headings for interfaces
	in grob explanation.

2002-09-30  Jan Nieuwenhuizen  <janneke@gnu.org>

	* scm/to-xml.scm: Fixes.  input/trip.ly now parses as xml (without
	dtd).  Add preliminary dtd.
	(re-sub-alist): Robustify.

2002-09-29  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/include/event-chord-iterator.hh,
	lily/context-specced-music-iterator.cc,
	lily/event.cc, lily/event-chord-iterator.cc: add

2002-09-29  Jan Nieuwenhuizen  <janneke@gnu.org>

	* lily/: some (c) header fixes.
	
	* lily/request-chord.cc: Remove.
	
	* lily/include/event-chord-iterator.hh:
	* lily/include/event.hh:
	* lily/event-chord.cc: New file.
	
	* lily/stem-engraver.cc (acknowledge_grob): rename evented back to
	requested.

2002-09-28  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/ : rename Request to Event

	* lily/parser.yy (command_element): move clef stuff into Scheme.

	* lily/:  rename length_mom () to get_length()

	* lily/part-combine-music.cc: removed file and class.

	* lily/context-specced-music-iterator.cc (class
	Context_specced_music_iterator): new file. Obsoletes the
	Context_specced_music type.

	* scm/music-types.scm (make-repeated-music): put different kinds
	of repeated music into music-type table.

	* VERSION: 1.7.1 released.

	* scm/to-xml.scm: new file.

	* input/test/to-xml.ly (fooBar): demo of what is possible with the
	new Input representation: dump music as XML.

	* scm/engraver-documentation-lib.scm
	(engraver-accepts-music-types?): add links from music to engraver,
	from music-type to engraver.

	* lily/include/command-request.hh: removed
	lily/include/musical-request.hh: removed. Removed all _req classes
	except Key_change_req. Changes throughout.

2002-09-28  Jan Nieuwenhuizen  <janneke@gnu.org>

	* lily/tuplet-engraver.cc (try_music): Compile kludge.

2002-09-28  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/*.cc: specify accepts for many engravers.

	* scm/music-documentation-lib.scm: dump music expressions and
	music subtypes.

	* scm/documentation-lib.scm: complete revision.
	Use GOOPS objects to store document tree explicitly. Cleaned up and
	sped up doco generation a lot.

2002-09-27  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* input/trip.ly (fugaIILeft): add arpeggio

	* lily/translator-group.cc (try_music_on_nongroup_children):
	oops. The name symbol is in the cdr of the assoc handle.

	* lily/:  remove Arpeggio_req, Breathing_sign_req, Extender_req,
	Hyphen_req, Glissando_req, Break_req, Mark_req 

2002-09-26  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/musical-request.cc (music-duration-length,
	music-duration-compress): new functions.

	* lily/ : Remove Note_req, Rest_req, Busy_playing_req. Changes
	throughout. Warning doesn't work yet.

	* lily/translator-group.cc (try_music_on_nongroup_children):
	new implementation: store candidate acceptors in a hashTable.

2002-09-25  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* scm/music-types.scm (music-descriptions): change name to
	internal-class-name

	* scm/chord-name.scm (chord::inner-name-banter): remove space.

2002-09-24  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/beam.cc (connect_beams): don't crash if there are quarter
	notes in beams.

2002-09-24  Juergen Reuter  <reuter@ipd.uka.de>

	* Documentation/user/refman.itely: corrected ancient clef
	docu; added docu on ligatures

2002-09-21  Juergen Reuter  <reuter@ipd.uka.de>

	* Documentation/user/glossary.tely,
	Documentation/user/refman.itely, input/les-nereides.ly,
	input/mutopia/W.A.Mozart/mozart-hrn3-defs.ly,
	input/test/bagpipe.ly, lily/stem.cc, ly/grace-init.ly,
	scm/grob-property-description.scm, scripts/convert-ly.py: renamed
	Stem properties: flag-style -> stroke-style, style -> flag-style.

2002-09-24  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* scm/music-functions.scm (music-separator?): don't use name music
	property.

2002-09-24  Jan Nieuwenhuizen  <janneke@gnu.org>

	* stepmake/stepmake/generic-targets.make (help): Document check
	target.

	* lily/new-accidental-engraver.cc: Compile fix.

2002-09-23  Jan Nieuwenhuizen  <janneke@gnu.org>

	* scripts/convert-ly.py: Add rule.

	* input/test/music-creation.ly:
	* input/test/add-staccato.ly:
	* input/test/add-text-script.ly: ly-make-music.

	* scm/drums.scm (make-head-type-elem, make-articulation-script):
	More ly-make-music renamings.

	* lily/command-request.cc: ADD_MUSIC: arpeggio_req.

	* lily/music-constructor.cc (make_music): Add debugging info.

	* scm/music-functions.scm (make-simultaneous-music,
	(make-sequential-music, context-spec-music):
	* scm/music-types.scm (music-descriptions): Get lily to run.

2002-09-23  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/command-request.cc (transpose_key_alist): new function.

	* lily/key-performer.cc (create_audio_elements): cleanup. 

2002-09-22  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/parser.yy: remove TYPED_MAKE_MUSIC().

	* lily/include/translator.hh (ENTER_DESCRIPTION): add
	events-accepted field.

	* scm/music-types.scm: new file.

	* lily/parser.yy: put music type initialization into scheme,
	similar to grob initialization.  Changes throughout.

2002-09-22  Jan Nieuwenhuizen  <janneke@gnu.org>

	* Documentation/user/tutorial.itely: Fix links.
	
	* Documentation/index.texi: 
	* Documentation/header.html.in: 
	* Documentation/topdocs/index.tely: Small website fixes and updates.

	* debian/: Debian patch by Anthony Fok.

2002-09-21  Jan Nieuwenhuizen  <janneke@gnu.org>

	* Documentation/footer.html.in: How time flies: It's already 2002!

	* Documentation/topdocs/index.tely: Stable/development fix.  Use
	more descriptive link names than 'here'.

	* ROADMAP: Remove test stuff.

	* scripts/update-lily.py: Allow auto-building of stable and
	development versions.  Bugfixes.

2002-09-21  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* VERSION: released 1.7.0

	* scm/tex.scm (header-end): enclose lily output in begingroup/endgroup.

	* tex/lilyponddefs.tex: set hsize for plain tex, but only for
	positive line widths.

2002-09-20  Jan Nieuwenhuizen  <janneke@gnu.org>

	* tex/lilyponddefs.tex: Handle \scoreshift and \outputscale in one
	go.  Fix comments.

	* cygwin: Cygwin updates.

2002-09-19  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* Documentation/windows/installing.texi (Top): version for python,
	urls for ghostscript (thanks to John Potelle)
	
	* lily/simultaneous-music-iterator.cc
	(Simultaneous_music_iterator): init children_list_ before
	triggering GC.

	* lily/*-iterator.cc: be even more careful with smobbed copy
	constructors. 

	* lily/break-align-engraver.cc (acknowledge_grob): also typeset
	LeftEdge item.

2002-09-15  Werner Lemberg  <wl@gnu.org>

	Improving LilyPond's output to make them ordinary TeX boxes with
	predictable dimensions.  System boxes are now vertically centered on
	the baseline; this offset can be further controlled with
	\lilypondscoreshift.

	* lily/system.cc (System::post_processing): Pass length of current
	system to `start-system' (including any horizontal indentation).

	* scm/tex.scm, scm/pdftex.scm: Make output of various functions
	prettier.
	(lily-def): Append `%'.
	(start-system): Add parameter `wd'.  Output more TeX code to specify
	box dimensions.
	(stop-system, stop-last-system): Complement changes in
	`start-system'.
	* scm/sketch.scm, scm/ps.scm, scm/pdf.scm, scm/ascii-script.scm:
	Updated.

	* scripts/ly2dvi.py (global_latex_definition): Set \parindent to 0.
	* buildscripts/mf-to-table.py (write_tex_defs): Append `%'.
	Write final `\endinput'.

	* tex/lily-ps-defs.tex, tex/lily-pdf-defs.tex,
	tex/lilypond-plaintex.tex, tex/lilypond-latex.tex,
	tex/lilyponddefs.tex, tex/titledefs.tex: Reformat code.  Assure that
	files and macro definitions don't produce spurious spaces and
	paragraphs (using \endlinechar).
	* tex/lilyponddefs.tex: New dimension `\scoreshift'.

	* Documentation/user/internals.itely: Improved formatting, fixing
	typos.  Added a section `Output details' to describe how the TeX
	code looks like.

2002-09-17  Rune Zedeler  <rune@zedeler.dk>

	* lily/accidental-engraver.cc: Also work with partial measures.

2002-09-17  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/text-spanner-engraver.cc: whoops. Set bound in the correct
	spanner.

2002-09-21  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/identifier-smob.cc (unpack_identifier): new file.

	* lily/lexer.ll (identifier_type): new function.  use ly-id to
	pass off scheme expressions as music identifiers.

	* scm/lily.scm: reorganisation, cleanups.

	* lily/main.cc: small cleanups.

2002-09-20  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/ly-module.{cc,hh}: new file.

2002-09-17  Rune Zedeler  <rune@zedeler.dk>

	* lily/accidental-engraver.cc: Also work with partial measures.

2002-09-16  Jan Nieuwenhuizen  <janneke@gnu.org>

	* VERSION (PACKAGE_NAME): Remove HEAD trap leftover.

2002-09-16  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/my-lily-lexer.cc: use SCM module in stead of
	Scheme_hash_table. Changes throughout.  

2002-09-15  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* VERSION (MY_PATCH_LEVEL): make 1.7.0

