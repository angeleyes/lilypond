2002-09-05  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* input/test/poly-metric.ly: new file.

	* scripts/lilypond-book.py (output_verbatim): python 2.2 workaround.

	* scm/documentation-lib.scm (scm->string): print procedure name in
	stead of #<procedure .. > 

	* scripts/ly2dvi.py (run_lilypond): exit with error if lily exited
	any file with an error.

	* input/regression/molecule-hacking.ly: also restore Y
	extent. Fixes bugs with stem attachment of parenthesized note
	heads.

2002-09-04  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* input/test/clef-end-of-line.ly: new file.

	* lily/stem-engraver.cc (acknowledge_grob): warn about too long
	tremolos. Thanks to Erik Sandberg

	* input/trip.ly (fugaIIPedal): small cleanups.

	* lily/grob-pq-engraver.cc: more helpful message.
	(stop_translation_timestep): use scm_merge_x for merging the lists.

	* Documentation/user/appendices.itely: switch off parmesan listing

2002-09-01  Juergen Reuter  <reuter@ipd.uka.de>

	* input/test/ancient-font.ly, input/test/ancient-time.ly,
	  input/test/mensural-ligatures.ly, lily/ligature-head.cc,
	  lily/mensural-ligature-engraver.cc, lily/note-head.cc,
	  lily/time-signature.cc, scm/output-lib.scm: removed obsolete
	  code that sets grob property font-family; also small updates to
	  various input/test files.

2002-09-01  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* input/test/tab-staff.ly: removed.
	
	* lily/paper-def.cc (find_font): load virtual font for a list of
	font names.

	* scm/font.scm (paper20-style-sheet-alist): equate ancient and
	music font-families.

	* lily/virtual-font-metric.cc (get_char_molecule): new function

	* lily/system-start-delimiter.cc (staff_brace): use virtual fonts
	for the list of braces

	* lily/font-metric.cc (get_char_molecule): new function.

2002-08-31  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/virtual-font-metric.cc: new file

	* lily/include/virtual-font-metric.hh (class Virtual_font_metric):
	new file

	* scripts/lilypond-book.py: use old re's for python 2.2 as well

	* debian/control: Debian patches by Anthony Fok

	* input/regression/lyric-combine-polyphonic.ly: new file.

	* ly/engraver-init.ly (VoiceContext): add Grob_pq_engraver to
	Voice context.

2002-08-31 Graham Percival  <gperciva@sfu.ca>

        * Documentation/user/tutorial.itely:  editorial changes
	(spelling, grammar, etc) of the orchestral score, integrating text +
	music, and the end of tutorial.

2002-08-31 Rune Zedeler  <rune@zedeler.dk>

	* input/test/sondag-morgen/*.ly: 1.6 compatibility knee fixes

	* lily/tab-note-heads-engraver.cc: Bugfix for instruments not
	having 6 strings.
	
2002-08-31  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* VERSION: 1.6.1 released
	
	* lily/kpath.cc: 
	* lily/lily-guile.cc: macosx fixes.

	* lily/script-column.cc (before_line_breaking): use stable sorting
	algorithm to preserve script ordering.
	(grob_script_priority_less): new function

	* lily/script-engraver.cc (process_music): 
	* lily/text-engraver.cc (process_acknowledged_grobs):
	* lily/fingering-engraver.cc (make_script): don't use direction
	for script-priority. This fixes orderings for multiple down
	script/fingering.

	* scripts/ly2dvi.py (run_lilypond): don't exit if LilyPond fails,
	but try to assemble the files anyway.

	* input/regression/prefatory-empty-spacing.ly: new file.

	* lily/break-align-interface.cc (do_alignment): translate last
	break-align-group if it is invisible/empty.

	* scm/grob-description.scm (all-grob-descriptions): LeftEdge is
	not a BreakAlignGroup. Do not use
	Break_align_interface::alignment_callback

2002-08-30  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* scripts/lilypond-book.py (LatexPaper.find_latex_dims): give more
	meaningful error if running latex fails 

	* Documentation/user/refman.itely (Tablatures): small
	corrections. Thanks to Karl Berry

2000-08-30  Heikki Junes <hjunes@cc.hut.fi>

        * make/lilypond.mandrake.spec.in: Mandrake adaptations from
        redhat spec and rpm-skeleton found in Mandrake's home page.

2002-08-29 Graham Percival  <gperciva@sfu.ca>

	* Documentation/user/tutorial.itely:  editorial changes (spelling,
	grammar, etc) of the "Fine tuning" section.

2002-08-29  Juergen Reuter  <reuter@ipd.uka.de>

	* input/test/ancient-font.ly, mf/parmesan-heads.mf,
	scm/output-lib.scm, lily/note-head.cc: bugfix: make neume note
	heads accessible
 
2002-08-29  Mats Bengtsson  <mats.bengtsson@s3.kth.se>

	* scm/music-functions.scm (unfold-repeats): Call new
	shift-duration-log correctly also for unfolded repeats.

2002-08-27  Mats Bengtsson  <mats.bengtsson@s3.kth.se>

	* tex/titledefs.tex: Define \fetafont for use in titles.

	* scm/music-functions.scm (shift-duration-log), lily/parser.yy
	(Repeated_music): Handle dots correctly for \repeat tremolo.

2002-08-26  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* lily/score.cc: remove paranoia code.

	* lily/parser.yy: don't include malloc.h

2002-08-25  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* flower/polynomial.cc (operator +): optimize += operator. No
	copying.

	* lily/source-file.cc (get_line): use binary search to determine
	line number. This kills another quadratic time-complexity term.

	* lily/include/source-file.hh (class Source_file): add newline_locations

	* flower/include/array.icc (binary_search_bounds): new function.

2002-08-22  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* input/regression/tuplet-properties.ly (texidoc): bugfix

	* input/regression/beam-shortened-lengths.ly: add \stemUp

	* Documentation/user/refman.itely: 

2002-08-22  Tom Cato

        * Documentation/user/refman.itely: spelling fix.

2002-08-21  Jan Nieuwenhuizen  <janneke@gnu.org>

	* lily/main.cc (setup_paths): Prepend dirs to search path, instead
	of appending.  Fixes build when typical LilyPond 1.4 leftovers clutter
	the system.

	* flower/include/file-path.hh (prepend): New function.

2002-08-20  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* Documentation/misc/ChangeLog-1.5: move 1.5 ChangeLog to misc/

	* lily/completion-note-heads-engraver.cc (class
	Completion_heads_engraver): don't be confused by polyphonic rhythms.

	* input/regression/completion-heads-polyphony.ly: new file.

2002-08-19  Han-Wen Nienhuys  <hanwen@cs.uu.nl>

	* GNUmakefile.in (web-ext): distribute .ly with web tarball too.
	This means that the 1.6 binaries must be rebuilt.

	* make/lilypond-vars.make: banish ps-to-X scripts

	* make/generic-rules.make: remove blurb rule.

	* GNUmakefile.in: make lilypond-fource file, so PK fonts are not
	removed every make-run.
 
	* make/ly-rules.make: don't remove .tely file.

	* input/test/chords.ly (scales): whole notes only. Prevents
	weird breaks.

