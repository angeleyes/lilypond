<h1> Packaging instructions</h1>

Please help us by compiling and packing up Lily, and we will link to
your site.


<h2>RedHat</h2>

A spec file is in
<code>make/out/lilypond.redhat.spec</code>. This file is distributed along
with the sources.  You can make the rpm by issuing
<p>
<pre>     
        cp lilypond-x.y.z.tar.gz /usr/src/redhat/SOURCES/
        tar xfz lilypond-x.y.z.tar.gz
     	rpmbuild -bb lilypond-x.y.z/make/out/lilypond.redhat.spec
     </pre>

<p>For compilation on a Red Hat system you need these packages, in
addition to the those needed for running: glibc-devel, gcc-c++,
libstdc++-devel, guile-devel, flex, bison, texinfo, groff, mftrace,
netpbm-progs, autotrace, t1utils.



<h2>Mandrake</h2>

<p>You can also compile a RPM for Mandrake yourself.  A spec file is
in <code>make/out/lilypond.mandrake.spec</code>, see the instructions
for building the Red Hat RPM.</a>


<h2>SuSE</h2>

A spec file is in <code>make/out/lilypond.suse.spec</code>, see the
instructions building the Red Hat RPM.</a>

<p>You must have the following packages: guile tcsh tetex te_latex
te_kpath te_mpost libpng python gpp libgpp gettext autoconf netpbm
libnetpb gs_serv gs_lib gs_fonts guile



<h2>Debian</h2>

<p>If you're real impatient, you may even do:
<pre>     
     	cd lilypond-x.y.z   # a previous version
             uscan               # download and build latest directly from upstream
     </pre>

   <p>The build scripts are in the subdirectory <code>debian/</code>; you can
make the .deb by doing, for example:

<pre>       $ su - root
       # dpkg --purge lilypond lilypond1.3
       # exit
       $ tar xzf lilypond-1.8.0.tar.gz
       $ cd lilypond-1.8.0
       $ dch -p -v 1.8.0-0.local.1 "Local build."
       $ debuild -B
       $ su - root
       # dpkg -i ../lilypond_1.8.0-*.deb
       # exit
       $
</pre>

<p>
To ensure the creation of the lilypond deb is
trouble-free, we recommend that you first install the following packages
by running apt-get as root before building the package:

<p>
For Debian 3.0:
<pre>  
       apt-get install g++ libc6-dev \
               python libguile-dev tetex-bin libkpathsea-dev \
               tetex-extra flex bison texinfo groff gs \
               netpbm m4 gettext mftrace pfaedit autotrace t1utils
</pre>


<h2>Cygwin</h2>


<h3>Requirements</h3>

   <p>You need the following packages to compile Lilypond for Windows
(ie, for Cygwin).

     <dl>
<dt><code>The GNU + Cygnus tools, 1.3.10 or newer.</code>
     <dd>Check out the <a href="http://cygwin.com">Cygwin webpage</a>. 
You can get the latest version of the GNU + Cygnus tools from a Cygwin
<a href="http://cygwin.com/mirrors.html">mirror site</a>. 
</dl>

<h4>Native compiling</h4>

We just had a first <a href="http://mail.gnu.org/archive/html/lilypond-devel/2003-08/msg00118.html">success report</a>

from Józsa Márton, who compiled LilyPond 1.9.0 on Cygwin-1.3.22.

The packages autotrace, t1utils and mftrace are not included in
Cygwin, but compile out of the box.  pfaedit for Cygwin can be <a
href="http://pfaedit.sourceforge.net/pfaedit_cygwin-030827.tgz">
downloaded</a> from <a href="http://pfaedit.sf.net">pfaedit's
sourceforge page</a>.

<h4>Cross compiling</h4>

Current LilyPond releases are cross compiled on a GNU/Linux box.

<p>
Cross compiling for Windows on a GNU/Linux box is done with
mknetrel.  Get it from:
<pre>
        cvs -d:pserver:anoncvs@sources.redhat.com:/cvs/cygwin-apps co mknetrel
</pre>

<p>Setup a binary Cygwin environment.  There is a bare bones <a
href="http://lilypond.org/cygwin/cyg-apt">cyg-apt</a> script that can
set it up and help keep it up to date.

<p>Create a Cygwin cross building environment.

<p>You can also get <a
href="http://lilypond.org/debian/dists/unstable">precompiled toolchain
gcc-i686-cygwin binaries for Debian GNU/Linux i386</a>.

<h3>installation specifics</h3>

<p>Installing LilyPond on Windows is similar to a unix installation,
but needs a number of extra tricks.  All code for these tricks can be
found in LilyPond's mknetrel build script in the source package
directory <code>cygwin/mknetrel</code>.
